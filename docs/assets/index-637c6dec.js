import{o as e,f as t,g as s,c as a,F as n,r as l,a8 as i,a9 as y,n as d,aa as o,x as p,u as x,t as c,C as r,w as m,i as u,Z as C,l as v,m as h,aO as f,ab as L,p as g,h as W,e as H,ae as b,B as k,s as _,q as P,J as V,ai as w,bF as T,as as D,at as Q,aC as O,aw as $,ax as M,bG as z,bH as B}from"./vendor-828bb737.js";import{h as X,_ as F,u as S,j as I}from"./common-404c9468.js";const J={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},G=[s("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"},null,-1)];const E={name:"ep-delete",render:function(s,a){return e(),t("svg",J,[...G])}},j={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},U=[s("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"},null,-1)];const A={name:"ep-plus",render:function(s,a){return e(),t("svg",j,[...U])}},Y={name:"5-3-5-5",id:"5-3-5-5",devices:[{name:"分集水器",type:"JSQ",style:{x:173.71683135097686,y:47.8655025998552}},{name:"分集水器",type:"JSQ",style:{x:623.7160924526664,y:48.98920883101867}},{name:"1#冷冻泵",type:"LDB",deviceCode:"CHWP1",style:{x:100.36049026676278,y:199.2790282675063}},{name:"2#冷冻泵",type:"LDB",deviceCode:"CHWP2",style:{x:250.90122566690698,y:199.27902826750628}},{name:"3#冷冻泵",type:"LDB",deviceCode:"CHWP3",style:{x:401.4993419790782,y:197.49129407501778}},{name:"4#冷冻泵",type:"LDB",deviceCode:"CHWP4",style:{x:548.5219899062724,y:199.27902826750628}},{name:"5#冷冻泵",type:"LDB",deviceCode:"CHWP5",style:{x:700.793078586878,y:198.41385162727556}},{name:"1#离心机",type:"LXJ",deviceCode:"CHL1",style:{x:165.75212866603596,y:396.59414589123105}},{name:"2#离心机",type:"LXJ",deviceCode:"CHL2",style:{x:399.62157048249765,y:396.59414589123105}},{name:"3#离心机",type:"LXJ",deviceCode:"CHL3",style:{x:628.9498580889309,y:397.72943444373817}},{name:"1#冷却泵",type:"LQB",deviceCode:"CWP1",style:{x:99.15751035254021,y:572.9596503008339}},{name:"2#冷却泵",type:"LQB",deviceCode:"CWP2",style:{x:247.94383149448345,y:573.247718742164}},{name:"3#冷却泵",type:"LQB",deviceCode:"CWP3",style:{x:398.80240722166496,y:572.8404970771691}},{name:"4#冷却泵",type:"LQB",deviceCode:"CWP4",style:{x:548.8465396188566,y:573.247718742164}},{name:"5#冷却泵",type:"LQB",deviceCode:"CWP5",style:{x:698.5015045135406,y:573.4513295746615}},{name:"1#冷却塔",type:"LQT",deviceCode:"COT1",style:{x:697.8662604345353,y:747.5683448662304}},{name:"1#阀门(冷冻)",type:"LDFM",deviceCode:"CHWV1",style:{x:248.74254742547427,y:361.2357723577236},rotate:90},{name:"1#阀门(冷却)",type:"LQFM",deviceCode:"CWV1",style:{x:250.29058391379672,y:465.99498968464485},rotate:90},{name:"2#阀门(冷冻)",type:"LDFM",deviceCode:"CHWV2",style:{x:485.7425474254743,y:361.2357723577236},rotate:90},{name:"3#阀门(冷冻)",type:"LDFM",deviceCode:"CHWV3",style:{x:714.7425474254743,y:361.2357723577236},rotate:90},{name:"2#冷却塔",type:"LQT",deviceCode:"COT2",style:{x:548.4971099191288,y:747.0377326213325}},{name:"3#冷却塔",type:"LQT",deviceCode:"COT3",style:{x:398.1432498857984,y:748.4502427403049}},{name:"4#冷却塔",type:"LQT",deviceCode:"COT4",style:{x:248.85678162428923,y:747.2156868597556}},{name:"5#冷却塔",type:"LQT",deviceCode:"COT5",style:{x:98.17487180975786,y:747.7009632014001}},{name:"2#阀门(冷却)",type:"LQFM",deviceCode:"CWV2",style:{x:486.2905839137967,y:465.99498968464485},rotate:90},{name:"3#阀门(冷却)",type:"LQFM",deviceCode:"CWV3",style:{x:716.2905839137967,y:465.99498968464485},rotate:90},{name:"分水器压力",type:"DOT",unit:"kPa",deviceCode:"SYS_CHW_SP",style:{x:768.5201462561238,y:50.26536399073092}},{name:"水流量",type:"DOT",unit:"m³/h",style:{x:806.1468037663858,y:114.38106644708931}},{name:"冷冻供水温度",type:"DOT",unit:"℃",deviceCode:"SYS_CHW_ST",style:{x:627.190332326284,y:51.83383685800604}},{name:"集水器压力",type:"DOT",unit:"kPa",deviceCode:"SYS_CHW_RP",style:{x:54.330636949863475,y:48.91172608886967}},{name:"冷冻回水温度",type:"DOT",unit:"℃",deviceCode:"SYS_CHW_RT",style:{x:172.19730941704026,y:49.40209267563525}}],pipes:[{name:"冷冻回",type:"LDH",style:{x:5.1468713285025665,y:119.743904130075},bind:["CHWP2","CHWP3","CHWP5","CHWP4"],paths:[{x:5,y:5},{x:181.43334978906609,y:5}]},{name:"冷冻回",type:"LDH",style:{x:5.176112015520282,y:41.56947412716088},bind:["CHWP1","CHWP3","CHWP5","CHWP4","CHWP2"],paths:[{x:121.78163250171538,y:5},{x:5,y:5},{x:5,y:83.73139170559142}]},{name:"冷冻回",type:"LDH",style:{x:5.4890825472675395,y:118.57888049498001},bind:["CHWP1"],paths:[{x:5,y:5},{x:5,y:80.56866048862682},{x:61.183048600273366,y:80.56866048862682}]},{name:"冷冻回",type:"LDH",style:{x:180.69706491466138,y:120.32899777762339},bind:["CHWP2"],paths:[{x:5,y:5},{x:5,y:77.36875746530085},{x:40.086366504276874,y:77.36875746530085}]},{name:"冷冻回",type:"LDH",style:{x:181.08153093334235,y:119.84528353228083},bind:["CHWP3","CHWP4","CHWP5"],paths:[{x:5,y:5},{x:156.6006950607715,y:5}]},{name:"冷冻回",type:"LDH",style:{x:71.30101523260038,y:145.1144481926092},bind:["CHWP1"],paths:[{x:5,y:32.52867570385822},{x:5,y:5},{x:92.33585982761926,y:5},{x:92.33585982761926,y:105.75901328273231}]},{name:"冷冻回",type:"LDH",style:{x:220.785319932254,y:144.8291277979827},bind:["CHWP2"],paths:[{x:5,y:40.026151718524005},{x:5,y:5},{x:96.12568617852551,y:5},{x:96.12568617852551,y:104.99646682523225}]},{name:"冷冻回",type:"LDH",style:{x:93.23327466902668,y:288.43252970621137},bind:[[["CHWP1","CHWP2","CHWP3"],["CHWV1"]]],paths:[{x:5,y:5},{x:5,y:112.7787220842742},{x:37.17173510582402,y:112.7787220842742}]},{name:"冷冻回",type:"LDH",style:{x:93.02647889259275,y:292.3478155090287},bind:[[["CHWP1","CHWP2","CHWP3"],["CHWV2"]]],paths:[{x:5,y:5},{x:238.94962714723272,y:5},{x:238.94962714723272,y:108.77566818376444},{x:269.4623463761736,y:108.77566818376444}]},{name:"冷冻回",type:"LDH",style:{x:553.3288315260517,y:246.25046381346257},bind:[[["CHWP4","CHWP5"],["CHWV3"]]],paths:[{x:61.285859533609546,y:5},{x:5,y:5},{x:5,y:155.17543923416935},{x:36.27692922658564,y:155.17543923416935}]},{name:"冷冻供",type:"LDG",style:{x:199.19120710555012,y:324.0564903455582},bind:[[["CHL1"],["CHWV1"]]],paths:[{x:5,y:76.46171693735494},{x:45.621193647481185,y:76.46171693735494},{x:45.621193647481185,y:5},{x:282.00202373523354,y:5}]},{name:"冷冻供",type:"LDG",style:{x:434.9992945066391,y:324.1318736695971},bind:[[["CHL2"],["CHWV2"]]],paths:[{x:5,y:77.34106783965899},{x:46.7927711568358,y:77.34106783965899},{x:46.7927711568358,y:5}]},{name:"冷冻供",type:"LDG",style:{x:662.4871977324457,y:324.1318736695971},bind:[[["CHL3"],["CHWV3"]]],paths:[{x:5,y:77.64348719449768},{x:48.30486793102934,y:77.64348719449768},{x:48.30486793102934,y:5}]},{name:"冷冻供",type:"LDG",style:{x:475.915393654524,y:323.7943595769682},bind:[[["CHL1","CHL2"],["CHWV1","CHWV2"]]],paths:[{x:5,y:5},{x:234.6569122098892,y:5}]},{name:"冷冻供",type:"LDG",style:{x:658.9120373187887,y:43.628009620656144},bind:[[["CHL3","CHL2","CHL1"],["CHWV1","CHWV2","CHWV3"]]],paths:[{x:51.78744908635388,y:285.3372715017677},{x:145.94829460962507,y:285.3372715017677},{x:145.94829460962507,y:5},{x:5,y:5}]},{name:"冷冻供",type:"LDG",style:{x:404.22505307855675,y:44.16135881104034},paths:[{x:178.2696390658173,y:5},{x:5,y:5}]},{name:"冷冻回",type:"LDH",style:{x:210.62121052804295,y:43.673269144891414},paths:[{x:198.30726818918956,y:5},{x:5,y:5}]},{name:"冷却供",type:"LQG",style:{x:327.3562841506394,y:411.13828473348724},bind:[[["CHL3"],["CWV3"]]],paths:[{x:266.3260918845066,y:5},{x:230.18715847431795,y:5},{x:230.18715847431795,y:36.93595544710095},{x:5,y:36.93595544710095}]},{name:"冷却供",type:"LQG",style:{x:326.823950870011,y:410.3983225998629},bind:[[["CHL2"],["CWV2"]]],paths:[{x:42.76867963152509,y:5},{x:5,y:5},{x:5,y:38.02303378573207}]},{name:"冷却供",type:"LQG",style:{x:92.823950870011,y:410.0959032450242},bind:[[["CHL1"],["CWV1"]]],paths:[{x:42.76867963152509,y:5},{x:5,y:5},{x:5,y:38.32545314057078}]},{name:"冷却供",type:"LQG",style:{x:92.47980353740024,y:443.28273159352307},bind:[[["CHL3","CHL2"],["CWV2","CWV3"]]],paths:[{x:239.98340427063522,y:5},{x:5,y:5}]},{name:"冷却供",type:"LQG",style:{x:5.02571697480915,y:442.8169476052989},bind:[[["COT1","COT4","COT5","COT2","COT3"],["CWV1","CWV3","CWV2"]]],paths:[{x:92.35414572541963,y:5},{x:5,y:5},{x:5,y:245.11480061613295},{x:95.75633236350072,y:245.11480061613295}]},{name:"冷却供",type:"LQG",style:{x:94.60864141000266,y:682.5961543146217},bind:[[["COT5"],["CWV1","CWV3","CWV2"]]],paths:[{x:5.0000427495003885,y:5},{x:5,y:62.195964596726746}]},{name:"冷却供",type:"LQG",style:{x:95.44513137557956,y:683.2349681824767},bind:[[["COT2","COT3","COT4","COT1"],["CWV1","CWV3","CWV2"]]],paths:[{x:5,y:5},{x:154.59498553519785,y:5}]},{name:"冷却供",type:"LQG",style:{x:245.04258547943388,y:682.3637531574375},bind:[[["COT4"],["CWV1","CWV3","CWV2"]]],paths:[{x:5.0000427495003885,y:5},{x:5,y:62.195964596726746}]},{name:"冷却供",type:"LQG",style:{x:395.7306588739294,y:682.6343953592724},bind:[[["COT3"],["CWV1","CWV3","CWV2"]]],paths:[{x:5.0000427495003885,y:5},{x:5,y:62.195964596726746}]},{name:"冷却供",type:"LQG",style:{x:545.1200754275252,y:682.1662813836957},bind:[[["COT2"],["CWV1","CWV3","CWV2"]]],paths:[{x:5.0000427495003885,y:5},{x:5,y:62.195964596726746}]},{name:"冷却供",type:"LQG",style:{x:695.7306588739295,y:681.9098363362059},bind:[[["COT1"],["CWV2","CWV1","CWV3"]]],paths:[{x:5.0000427495003885,y:5},{x:5,y:62.195964596726746}]},{name:"冷却供",type:"LQG",style:{x:245.35147578645567,y:682.6246962791535},bind:[[["COT3","COT1","COT2"],["CWV2","CWV1","CWV3"]]],paths:[{x:5,y:5},{x:154.59498553519785,y:5}]},{name:"冷却供",type:"LQG",style:{x:394.0516655397763,y:683.0857968484133},bind:[[["COT2","COT1"],["CWV1","CWV3","CWV2"]]],paths:[{x:5,y:5},{x:154.59498553519785,y:5}]},{name:"冷却供",type:"LQG",style:{x:543.7670355587516,y:683.1412996947131},bind:[[["COT1"],["CWV2","CWV1","CWV3"]]],paths:[{x:5,y:5},{x:161.55063069648824,y:5}]},{name:"冷却回",type:"LQH",style:{x:95.05491990846676,y:760.2974828375284},bind:["COT5"],paths:[{x:5,y:5},{x:5,y:45.503432494279146},{x:154.5026489965244,y:45.503432494279146}]},{name:"冷却回",type:"LQH",style:{x:245.3017902813296,y:749.0000000000003},bind:["COT4"],paths:[{x:5,y:5},{x:5,y:57.173913043478294}]},{name:"冷却回",type:"LQH",style:{x:396.3017902813296,y:749.0000000000003},bind:["COT3"],paths:[{x:5,y:5},{x:5,y:57.173913043478294}]},{name:"冷却回",type:"LQH",style:{x:545.3017902813297,y:749.0000000000003},bind:["COT2"],paths:[{x:5,y:5},{x:5,y:57.173913043478294}]},{name:"冷却回",type:"LQH",style:{x:696.3017902813297,y:749.0000000000003},bind:["COT1"],paths:[{x:5,y:5},{x:5,y:57.173913043478294}]},{name:"冷却回",type:"LQH",style:{x:244.19537959054514,y:800.5343300954929},bind:["COT4","COT5"],paths:[{x:5,y:5},{x:156.7356279751008,y:5}]},{name:"冷却回",type:"LQH",style:{x:395.19537959054514,y:800.5343300954929},bind:["COT3","COT4","COT5"],paths:[{x:5,y:5},{x:156.7356279751008,y:5}]},{name:"冷却回",type:"LQH",style:{x:545.4505006333757,y:800.7894511383234},bind:["COT2","COT3","COT4","COT5"],paths:[{x:5,y:5},{x:156.7356279751008,y:5}]},{name:"冷却回",type:"LQH",style:{x:621.935924679972,y:639.6098457640825},bind:["COT2","COT1","COT3","COT4","COT5"],paths:[{x:80.17104391893645,y:166.35703552144815},{x:182.8023433836652,y:166.35703552144815},{x:182.8023433836652,y:5},{x:5,y:5}]},{name:"冷却回",type:"LQH",style:{x:623.4399649430319,y:568.3172655565289},bind:["CWP5"],paths:[{x:5,y:77.04206836108682},{x:5,y:5},{x:52.103418054338256,y:5}]},{name:"冷却回",type:"LQH",style:{x:27.439964943031896,y:568.3172655565289},bind:["CWP1"],paths:[{x:147.12548015364916,y:76.74774327527875},{x:5,y:76.74774327527875},{x:5,y:5},{x:52.103418054338256,y:5}]},{name:"冷却回",type:"LQH",style:{x:170.77395938968004,y:567.6512600031771},bind:["CWP2"],paths:[{x:5,y:77.04206836108682},{x:5,y:5},{x:52.103418054338256,y:5}]},{name:"冷却回",type:"LQH",style:{x:327.4399649430319,y:568.3172655565289},bind:["CWP3"],paths:[{x:5,y:77.04206836108682},{x:5,y:5},{x:52.103418054338256,y:5}]},{name:"冷却回",type:"LQH",style:{x:474.4399649430319,y:568.3172655565289},bind:["CWP4"],paths:[{x:5,y:77.04206836108682},{x:5,y:5},{x:52.103418054338256,y:5}]},{name:"冷却回",type:"LQH",style:{x:168.56789069171631,y:639.6384777085682},bind:["CWP1","CWP2"],paths:[{x:164.91768554582214,y:5},{x:5,y:5}]},{name:"冷却回",type:"LQH",style:{x:326.56789069171634,y:639.6384777085682},bind:["CWP1","CWP2","CWP3"],paths:[{x:153.67222000773245,y:5},{x:5,y:5}]},{name:"冷却回",type:"LQH",style:{x:474.56789069171634,y:639.6384777085682},bind:["CWP1","CWP2","CWP3","CWP4"],paths:[{x:153.67222000773245,y:5},{x:5,y:5}]},{name:"冷却回",type:"LQH",style:{x:69.311315582179,y:523.761340449448},bind:["CWP1"],paths:[{x:5,y:43.738427821212454},{x:5,y:5}]},{name:"冷却回",type:"LQH",style:{x:216.88088883195564,y:525.0918367346961},bind:["CWP2"],paths:[{x:5,y:40.204081632653015},{x:5,y:5}]},{name:"冷却回",type:"LQH",style:{x:217.1662565050762,y:524.5532370937624},bind:["CWP3"],paths:[{x:157.9728422624275,y:40.742681273586584},{x:157.9728422624275,y:5},{x:5,y:5}]},{name:"冷却回",type:"LQH",style:{x:519.098807698555,y:525.0918367346961},bind:["CWP4"],paths:[{x:5,y:34.58227584048946},{x:5,y:5},{x:154.6026526916489,y:5}]},{name:"冷却回",type:"LQH",style:{x:668.7295451261565,y:525.0918367346961},bind:["CWP5"],paths:[{x:5.00007473692602,y:40.204081632653015},{x:5,y:5}]},{name:"冷却回",type:"LQH",style:{x:665.4834412192785,y:411.5870923736879},bind:[[["CWP4","CWP5"],["CWV3"]]],paths:[{x:7.549129277015011,y:118.30074365537237},{x:45.39646100979569,y:118.30074365537237},{x:45.39646100979569,y:5},{x:5,y:5}]},{name:"冷却回",type:"LQH",style:{x:239.7619481770813,y:409.99168462102205},bind:[[["CWP1","CWP4","CWP2","CWP5","CWP3"],["CWV2"]]],paths:[{x:5,y:75.4896017248002},{x:242.01494889316112,y:75.4896017248002},{x:242.01494889316112,y:5},{x:201.92090723820417,y:5}]},{name:"冷却回",type:"LQH",style:{x:200.71608804368435,y:410.14243747162135},bind:[[["CWP1","CWP4","CWP5","CWP2","CWP3"],["CWV1"]]],paths:[{x:45.396461009795686,y:74.46164413950592},{x:45.396461009795686,y:5},{x:5,y:5}]},{name:"冷却回",type:"LQH",style:{x:68.55817496082885,y:480.0055720524886},bind:[[["CWP1","CWP2","CWP3"],["CWV1","CWV2"]]],paths:[{x:5,y:48.687108148666475},{x:5,y:5},{x:176.9197525982724,y:5}]},{name:"冷冻回",type:"LDH",style:{x:331.6970649146614,y:120.32899777762339},bind:["CHWP3"],paths:[{x:5,y:5},{x:5,y:77.36875746530085},{x:40.086366504276874,y:77.36875746530085}]},{name:"冷冻回",type:"LDH",style:{x:332.0815309333424,y:119.84528353228083},bind:["CHWP4","CHWP5"],paths:[{x:5,y:5},{x:153.6073469454721,y:5}]},{name:"冷冻回",type:"LDH",style:{x:311.59716169553894,y:144.8291277979827},bind:["CHWP3"],paths:[{x:65.18815823671473,y:40.026151718524005},{x:65.18815823671473,y:5},{x:156.85244405617362,y:5},{x:156.85244405617362,y:106.15187245081323},{x:5,y:106.15187245081323}]},{name:"冷冻回",type:"LDH",style:{x:479.6970649146614,y:120.32899777762339},bind:["CHWP4"],paths:[{x:5,y:5},{x:5,y:77.36875746530085},{x:40.086366504276874,y:77.36875746530085}]},{name:"冷冻回",type:"LDH",style:{x:632.6970649146614,y:120.32899777762339},bind:["CHWP5"],paths:[{x:5,y:5},{x:5,y:77.36875746530085},{x:40.086366504276874,y:77.36875746530085}]},{name:"冷冻回",type:"LDH",style:{x:480.0815309333424,y:119.84528353228083},bind:["CHWP5"],paths:[{x:5,y:5},{x:163.25257976143683,y:5}]},{name:"冷冻回",type:"LDH",style:{x:518.7853199322537,y:144.8291277979827},bind:["CHWP4"],paths:[{x:5,y:40.026151718524005},{x:5,y:5},{x:96.664285819459,y:5},{x:95.74509279370972,y:106.15187245081323}]},{name:"冷冻回",type:"LDH",style:{x:608.6967350805852,y:144.8291277979827},bind:["CHWP5"],paths:[{x:68.08858485166864,y:40.026151718524005},{x:68.08858485166864,y:5},{x:159.7528706711276,y:5},{x:159.7528706711276,y:106.15187245081323},{x:5,y:106.15187245081323}]},{name:"冷冻回",type:"LDH",style:{x:158.17991604211105,y:246.242774566474},bind:["CHWP2","CHWP3"],paths:[{x:160.3229741312994,y:5},{x:5,y:5}]},{name:"冷冻回",type:"LDH",style:{x:92.64023144378301,y:246.30411826821563},bind:["CHWP1","CHWP2","CHWP3"],paths:[{x:71.38827964386239,y:5},{x:5,y:5},{x:5,y:47.63275991024684}]},{name:"冷却回",type:"LQH",style:{x:67.84299319129771,y:524.6437768240348},bind:["CWP2","CWP3"],paths:[{x:153.82224286020445,y:5},{x:5,y:5}]}]},N=Object.assign({"./json/5-3-5-5/index.ts":Y}),R=Object.keys(N).map((e=>N[e])),K="CHL",q="CWP",Z="CHWP",ee="COT",te="CWV",se="CHWV",ae={LDB:"LDB",LQB:"LQB",FM:"FM",LDFM:"LDFM",LQFM:"LQFM",LQT:"LQT",BSHLQ:"BSHLQ",LXJ:"LXJ",JSQ:"JSQ",DOT:"DOT"},ne="LDH",le="LDG",ie="LQG",ye="LQH",de=["onClick","onMousedown"],oe={class:"device-item__wrap"},pe=["src"],xe={class:"device-item--mark"},ce={class:"device-item--text"},re={class:"device-item--name"},me=F(a({__name:"device",props:{list:{},active:{},type:{},locked:{type:Boolean},display:{type:Boolean},hideType:{}},emits:["click","mousedown","mouseup"],setup(a,{emit:r}){const m=X(),u=a,C=e=>{var t;return!u.display||!(null==(t=u.hideType)?void 0:t.includes(e.type))},v=(e="")=>"℃"==e?"T":"kPa"==e?"AP":"m³/h"==e?"F":"",h=r,f=e=>{const{error:t,status:s}=e;let a=t>0?"error":s>0?"run":"normal",n=e.type;return[ae.LDB,ae.LQB].includes(n)?n="LDB":[ae.LXJ].includes(n)?n="LXJ":[ae.LDFM,ae.LQFM].includes(n)&&(n="FM"),`${m.oss}/img/device/${a}/${n}.png`};return(a,r)=>(e(),t("div",{class:d(["devices",{"is-locked":a.locked}])},[(e(!0),t(n,null,l(a.list,((l,r)=>i((e(),t("div",{key:r,class:d(["device-item",{[l.type]:!0,"is-active":a.active==r}]),style:o({left:`${l.style.x}px`,top:`${l.style.y}px`,color:l.color,marginTop:`${l.my}px`,marginLeft:`${l.mx}px`,zIndex:l.zIndex}),onClick:e=>h("click",a.type,l,r),onMousedown:p((e=>h("mousedown",e,a.type,l,r)),["stop"])},[s("div",oe,[l.type!=x(ae).DOT?(e(),t("img",{key:0,src:f(l),style:o({transform:`rotate(${l.rotate}deg)`})},null,12,pe)):(e(),t(n,{key:1},[s("div",xe,c(v(l.unit)),1),s("div",ce,c(l.value??0)+c(l.unit),1)],64)),s("div",re,c(l.name)+c(l.deviceCode?`(${l.deviceCode})`:""),1)])],46,de)),[[y,C(l)]]))),128))],2))}}),[["__scopeId","data-v-06585958"]]),ue=F(a({__name:"line-point",props:{x:{},y:{},isEnd:{type:Boolean},isStart:{type:Boolean},isX:{type:Boolean}},emits:["mousedown","direction"],setup(s,{emit:a}){const n=a;return(s,a)=>(e(),t("div",{class:d({[s.$style.point]:!0,[s.$style["is-end"]]:s.isEnd,[s.$style["is-x"]]:!s.isEnd&&s.isX,[s.$style["is-y"]]:!s.isEnd&&!s.isX}),style:o({left:`${s.x}px`,top:`${s.y}px`}),onMousedown:a[1]||(a[1]=p((e=>n("mousedown",e)),["stop"]))},[s.isEnd?(e(),t("div",{key:0,class:d({[s.$style["point-direction"]]:!0,[s.$style["d-x"]]:s.isX,[s.$style["d-y"]]:!s.isX,[s.$style["is-start"]]:s.isStart}),onMousedown:a[0]||(a[0]=p((e=>n("direction",e)),["stop"]))},null,34)):r("",!0)],38))}}),[["__cssModules",{$style:{point:"_point_nafi7_2","is-end":"_is-end_nafi7_12","is-x":"_is-x_nafi7_16","is-y":"_is-y_nafi7_19","point-direction":"_point-direction_nafi7_22","d-x":"_d-x_nafi7_26","d-y":"_d-y_nafi7_33"}}]]),Ce=[(e=>(g("data-v-463b0bd3"),e=e(),W(),e))((()=>s("span",null,"你的浏览器不支持 canvas，请升级你的浏览器。",-1)))],ve=["width","height"],he=["stroke","stroke-width","d"],fe={key:0,attributeName:"stroke-dashoffset",values:"0;-120",dur:"2s",repeatCount:"indefinite"},Le=F(a({__name:"pipe",props:{list:{},active:{},type:{},width:{default:6},scale:{},gap:{default:2},display:{type:Boolean},hideType:{},locked:{type:Boolean},animate:{type:Boolean}},emits:["click","mousedown","mouseup","change"],setup(a,{expose:p,emit:c}){const g=a,W=c;m((()=>g.list),(async()=>{N(),await L(),U()}),{deep:!0});const H=u([]),b=u(),k=C({isPointer:!1,isMove:!1,list:[]}),_=e=>{const t=b.value.parentNode.parentNode.parentNode.getBoundingClientRect(),s=g.scale??1,a=(e.clientX-t.x)/s,n=(e.clientY-t.y)/s,l=H.value;let i=!1,y=-1;for(let d=0;d<l.length;d++){const e=l[d],t=k.list[d];if(!t)break;const s=t.style||{},o=e.getContext("2d"),p=a-(s.x??0),x=n-(s.y??0);if(i=o.isPointInStroke(p,x),i){y=d;break}}return{isInside:i,index:y}},P=e=>{const t=_(e).isInside;k.isPointer=t},V=e=>{const{isInside:t,index:s}=_(e);t&&(e.stopPropagation(),e.preventDefault(),W("mousedown",e,g.type,k.list[s],s))},w=e=>{var t;return!g.display||!(null==(t=g.hideType)?void 0:t.includes(e.type))},T=()=>(g.width??6)+2*(g.gap??0),D=e=>{const t=X.i,s=k.list[e],a=s.paths.length;return a==s.points.length?t:t==a?a-1:0==t?0:t-1};let Q=.5;const O=e=>{if(e>k.list.length-1)return;const t=k.list[e],s=T()/2,a=t.paths,n=a.length;let l=0,i=0,y=a[0].x,d=a[0].y;for(let o=n-1;o>=0;o--){const t=a[o];if(!t)break;const{x:s,y:p}=t;s>l&&(l=s),p>i&&(i=p),y>s&&(y=s),d>p&&(d=p);const x=a[o-1];if(!x)break;const{x:c,y:r}=x;if(c!=s&&r!=p&&n<=2){const t=(s-c)/2+c,n={x:t,y:r},l={x:t,y:p};o==D(e)&&(X.i+=2),a.splice(o,0,n,l)}a.length>2&&(s==c&&p==r||Math.abs(s-c)<=Q&&Math.abs(p-r)<=Q&&(t.moved||R))&&(o<=X.i&&(X.i-=1),a[o].moved=!0,a.splice(o-1,1));const m=a[o+1];m&&((m.x==t.x&&t.x==x.x&&(m.y>t.y&&t.y>x.y||m.y<t.y&&t.y<x.y)||m.y==t.y&&t.y==x.y&&(m.x>t.x&&t.x>x.x||m.x<t.x&&t.x<x.x))&&(X.i-o>2||R)&&(X.i-=1,a.splice(o,1)))}y>s&&M(e,y-s),d>s&&z(e,d-s),(e=>{const t=k.list[e].paths;if(t.length<=2)return;const s=D(e),a=t[s],n=0==s?1:-1,l=t[s+n];if(!l)return;let{x:i,y:y}=l,{x:d,y:o}=a;d!==i&&(y=o),t[s+n].y=y})(e),t.width=l+s,t.height=i+s},$=(e,t)=>{const{x:s,y:a}=e,n=k.list[t],l=D(t),i=T()/2,y=n.paths,d=y.length;if(0==l||l==d-1){const e=0==l?l:d-1;let{x:o,y:p}=y[e];o+=s,p+=a,p<i&&(z(t,p-i),p=i),o<i&&(M(t,o-i),o=i);n.paths[e].moved&&!X.isDire?((e,t)=>{const s=k.list[e].paths,a=s.length,n=D(e),{x:l,y:i,moved:y}=s[n];if(!y)return;const d=s[n+1];if(0==n&&d)if(d.moved){const e=(t.y-i)/2+i,a={x:t.x,y:t.y},y={x:l,y:e};s.splice(n+1,0,a,y)}else s[n].x=t.x,s[n].y=t.y;if(n==a-1){const a={x:l,y:(t.y-i)/2+i},y={x:l,y:t.y};n==D(e)&&(X.i+=2),s.splice(n+1,0,a,y)}})(t,{x:o,y:p}):(n.paths[e].x=o,n.paths[e].y=p)}O(t)},M=(e,t)=>{const s=k.list[e];s.style.x+=t;const a=s.paths;for(let n=0;n<a.length;n++)a[n].x-=t},z=(e,t)=>{const s=k.list[e];s.style.y+=t;const a=s.paths;for(let n=0;n<a.length;n++)a[n].y-=t},B=e=>{const{index:t,i:s}=X;let{x:a,y:n}=e;const l=g.scale??1;a/=l,n/=l;const i=k.list[t].points;0==s||s==i.length-1?$({x:a,y:n},t):(e=>{const{index:t,i:s}=X,a=k.list[t].paths,n=a[s],l=a[s-1];if(!n||!l)return;const i=T()/2;if(Y(n,l)){let l=n.y+e.y;l<i&&(z(t,l-i),l=i),a[s].y=l,a[s-1].y=l}else{let l=n.x+e.x;l<i&&(M(t,l-i),l=i),a[s].x=l,a[s-1].x=l}a[s].moved=!0,a[s-1].moved=!0,O(t)})({x:a,y:n})},X={x:0,y:0,index:-1,i:-1,isDire:!1,isX:!1},F=e=>{let t=!Boolean(e.changedTouches);const s=t?e:e.changedTouches[0];return{x:s[t?"clientX":"pageX"],y:s[t?"clientY":"pageY"]}},S=e=>{const t=X.isDire,s=X.isX,{x:a,y:n}=F(e),l={x:a-X.x,y:n-X.y};t&&(s?l.y=0:l.x=0),B(l),X.x=a,X.y=n},I=()=>{X.i=-1},J=(e,t,s)=>{X.isDire=!1;const{x:a,y:n}=F(e);X.x=a,X.y=n,X.i=s,X.index=t,document.body.onmousemove=e=>{S(e)},document.body.onmouseleave=G,document.body.onmouseup=G},G=e=>{X.i<0||(S(e),document.body.onmousemove=null,document.body.onmouseup=null,document.body.onmouseleave=null,W("change"))},E=(e,t)=>{const s=Number(`0x${e.substring(1)}`);return`rgba(${s>>16&255}, ${s>>8&255}, ${255&s}, ${t})`},j=(e,t)=>{const s=window.devicePixelRatio??1,{x:a,y:n}=t;e.lineTo(a*s,n*s)},U=()=>{H.value.forEach(((e,t)=>{(e=>{const t=window.devicePixelRatio??1,s=H.value[e];if(!s)return;const a=k.list[e];s.width=a.width*t,s.height=a.height*t;const n=s.getContext("2d");if(!s.getContext)return;a.paths.forEach(((e,s)=>{if(0==s){const{x:s,y:a}=e;n.moveTo(s*t,a*t)}else j(n,e)})),n.lineWidth=T()*t,n.strokeStyle=E(a.color,.4),n.stroke()})(t)}))},A=(e,t)=>{const s=k.list[e].paths,a=s.length;let n=-1;0==t?n=1:t>=a&&(t=a-1);const l=s[t],i=s[t+n];return Y(l,i)},Y=(e,t)=>e.y==t.y,N=()=>{k.list=g.list.map((e=>{const t=f(e);return t.points=(e=>{let t=[];for(let s=0;s<e.length;s++){const a=e[s];if((0==s||s==e.length-1)&&(t.push([a.x,a.y]),s==e.length-1))break;const{x:n,y:l}=a,i=e[s+1],{x:y,y:d}=i;Y(a,i)?t.push([(y-n)/2+n,d]):t.push([y,(d-l)/2+l])}return t})(t.paths),t}))};let R=!1;return N(),v(U),p({optimize:()=>{const e=Q;Q=2,R=!0,X.i=0,H.value.forEach(((e,t)=>{O(t)})),Q=e,R=!1}}),(a,p)=>(e(),t("div",{class:d(["pipes",{"is-locked":a.locked,"is-pointer":x(k).isPointer}]),ref_key:"pipeRef",ref:b,style:o({"--lw":T()+"px"}),onMousemove:P,onMousedown:V},[(e(!0),t(n,null,l(x(k).list,((p,x)=>{return i((e(),t("div",{key:x,class:d(["pipe-item",{[p.type]:!0,"is-active":a.active==x}]),style:o({left:`${p.style.x}px`,top:`${p.style.y}px`,marginTop:`${p.my}px`,marginLeft:`${p.mx}px`,zIndex:p.zIndex})},[s("div",{class:"pipe-item__wrap",style:o({width:`${p.width}px`,height:`${p.height}px`}),onMousedown:I,onMouseup:G},[s("canvas",{ref_for:!0,ref:e=>((e,t)=>{H.value[t]=e})(e,x)},Ce,512),(e(),t("svg",{width:p.width,height:p.height},[s("path",{stroke:E(p.color,.8),"stroke-width":a.width,"stroke-dasharray":"20,20",fill:"transparent",d:(c=p.paths,c.map(((e,t)=>`${0==t?"M":"L"}${e.x} ${e.y}`)).join(" "))},[a.animate?(e(),t("animate",fe)):r("",!0)],8,he)],8,ve)),a.active==x?(e(!0),t(n,{key:0},l(p.points,((t,s)=>(e(),h(ue,{x:t[0],y:t[1],"is-start":0==s,"is-end":0==s||s==p.points.length-1,"is-x":A(x,s),onMousedown:e=>J(e,x,s),onDirection:e=>((e,t,s)=>{const a=A(t,s);X.isX=a,J(e,t,s),X.isDire=!0})(e,x,s)},null,8,["x","y","is-start","is-end","is-x","onMousedown","onDirection"])))),256)):r("",!0)],36)],6)),[[y,w(p)]]);var c})),128))],38))}}),[["__scopeId","data-v-463b0bd3"]]),ge=[{name:"冷冻回",type:ne,color:"#2263E7"},{name:"冷冻供",type:le,color:"#2A19CC"},{name:"冷却供",type:ie,color:"#CA691B"},{name:"冷却回",type:ye,color:"#1F6C28"}],We=[{name:"冷冻泵",type:ae.LDB,key:Z},{name:"冷却泵",type:ae.LQB,key:q},{name:"阀门(冷冻)",type:ae.LDFM,key:se},{name:"阀门(冷却)",type:ae.LQFM,key:te},{name:"冷却塔",type:ae.LQT,key:ee},{name:"离心机",type:ae.LXJ,key:K},{name:"分集水器",type:ae.JSQ},{name:"监测点",type:ae.DOT}],He=["data-index"],be=["data-index"],ke=["src"],_e={class:"flex flex-ac"},Pe=s("span",null,"画布大小：",-1),Ve=s("span",{class:"pl-xs pr-xs"}," X ",-1),we={class:"pl-xs"},Te={class:"pl-xs pr-xs"},De={key:0,class:"flex"},Qe=s("span",null,"名称：",-1),Oe={class:"flex"},$e=s("span",null,"类型：",-1),Me={key:1,class:"flex"},ze=s("span",null,"编号：",-1),Be={key:2,class:"flex"},Xe=s("span",null,"编号：",-1),Fe={key:3,class:"flex"},Se=s("span",null,"单位：",-1),Ie={class:"flex"},Je=s("span",null,"坐标：",-1),Ge={class:"flex"},Ee=s("span",null,"角度：",-1),je={key:4,class:"flex"},Ue=s("span",{class:"pt-xs"},"关联：",-1),Ae=s("span",{class:"pl-xs"},"并联：",-1),Ye={class:"pl-xs"},Ne=s("span",null,"设备：",-1),Re=s("span",null,"阀门：",-1),Ke={class:"e-drag__dot-content"},qe=F(a({__name:"index",setup(a){const i=S(),y=X();m((()=>i.sidebar.opened),(()=>{setTimeout((()=>{var e;null==(e=f.value)||e.resize()}),300)}));const v=u(),f=u(),L=C({filters:{},forms:{template:{label:"模板",type:"select",clearable:!0,items:[]},animate:{label:"管路动画",type:"switch",value:!1,cols:.5},lockeDev:{label:"锁定设备",type:"switch",value:!1,cols:.5},lockePipe:{label:"锁定管路",type:"switch",value:!1,cols:.5},display:{label:"隐藏",type:"switch",value:!1,cols:.5},type:{label:"隐藏元素",type:"checkbox",hide:!0,custom:{label:"name",value:"type"},items:ge.concat(We)}},pipes:ge,devices:We,drag:{width:1200,height:900,key:"",index:-1,zIndex:0},edit:{scale:1,type:"",index:-1,devices:[],pipes:[],text:""}}),g=C({width:2,gap:4}),W=H((()=>{let e={};return L.edit.index<0||(e=L.edit[L.edit.type][L.edit.index]),e})),F=H((()=>{const e=W.value.type;if(!e)return[];const t=L.edit.devices;let s=[];switch(e){case le:case ne:s=[ae.LDB,ae.LXJ,ae.LDFM];break;case ie:s=[ae.LQT,ae.LXJ,ae.LQFM];break;case ye:s=[ae.LQB,ae.LXJ,ae.LQT,ae.LQFM]}return t.filter((e=>s.includes(e.type)))})),J=H((()=>{const e=W.value.type;if(!e)return[];const t=L.edit.devices;let s=[];switch(e){case le:case ne:s=[ae.LDFM];break;case ie:case ye:s=[ae.LQFM]}return t.filter((e=>s.includes(e.type)))})),G=H((()=>{const e=W.value.type;if(!e)return[];const t=L.edit.devices;let s=[];switch(e){case le:case ne:s=[ae.LDB,ae.LXJ];break;case ie:s=[ae.LQT,ae.LXJ];break;case ye:s=[ae.LQB,ae.LXJ,ae.LQT]}return t.filter((e=>s.includes(e.type)))})),j=e=>{const t=L.edit[e].map((e=>{let{name:t,type:s,unit:a,deviceCode:n,style:l,rotate:i,bind:y,parallel:d,paths:o}=e;return o&&(o=o.map((({x:e,y:t})=>({x:e,y:t})))),d&&d.length&&d[0][0].length>0&&(y=d),{name:t,type:s,unit:a,deviceCode:n,style:l,rotate:i,bind:y,paths:o}})),s=JSON.stringify(t,((e,t)=>{if(!(""===t||void 0===t||t instanceof Array&&0==t.length))return t}),2);L.edit.text=s,I(s)},U=()=>{L.edit.index=-1,L.edit.devices=[],L.edit.pipes=[],tt()},Y=u(),N=()=>{var e;null==(e=Y.value)||e.optimize(),tt()},K=()=>{},q=()=>{tt()},Z=(e,t="")=>Number(t.replace(e,"")),ee=e=>{let t=0;const s=L.edit.devices.filter((t=>t.key==e)).sort(((t,s)=>Z(e,t.deviceCode)-Z(e,s.deviceCode)));for(let a=0;a<s.length;a++){const n=s[a],l=Z(e,n.deviceCode);if(l-t>1)break;l>0&&(t=l)}return t},te=e=>{const t=e.key;if(e.name.indexOf("#")>-1&&(e.name=e.name.split("#")[1]),!t)return e.name;return`${ee(t)+1}#${e.name}`},se=e=>{const t=e.key;if(!t)return"";return`${t}${ee(t)+1}`},de=(e,t,s)=>{},oe={isMove:!1,x:0,y:0,tsp:0,time:10},pe=(e,t,s,a)=>{oe.isMove=!0,oe.tsp=Date.now(),((e,t)=>{const s=L.edit;if(s.type=e,s.index==t)return;s.index=t;const a=L.drag;s[e][t].zIndex=a.zIndex,a.zIndex++})(t,a);const n=!Boolean(e.changedTouches),l=n?e:e.changedTouches[0];oe.x=l[n?"clientX":"pageX"],oe.y=l[n?"clientY":"pageY"]},xe=e=>{var t;if(!oe.isMove||L.edit.index<0)return;if(Date.now()-oe.tsp<oe.time)return void(oe.isMove=!1);const s=!Boolean(e.changedTouches),a=s?e:e.changedTouches[0],n=a[s?"clientX":"pageX"]-oe.x,l=a[s?"clientY":"pageY"]-oe.y,i=null==(t=f.value)?void 0:t.getSize(),y=L.edit[L.edit.type][L.edit.index];y.mx=n/i.scale,y.my=l/i.scale},ce=e=>{if(!oe.isMove)return;if(oe.isMove=!1,L.edit.index<0)return;const t=L.edit[L.edit.type][L.edit.index];let s=t.mx??0,a=t.my??0;0!=s&&(s+=t.style.x,t.style.x=s),0!=a&&(a+=t.style.y,t.style.y=a),t.mx=0,t.my=0,tt()},re=e=>{const{error:t,status:s}=e;let a=t>0?"error":s>0?"run":"normal",n=e.type;return[ae.LDB,ae.LQB].includes(n)?n="LDB":[ae.LXJ].includes(n)?n="LXJ":[ae.LDFM,ae.LQFM].includes(n)&&(n="FM"),`${y.oss}/img/device/${a}/${n}.png`},ue=e=>{const t=e.target.dataset;e.dataTransfer.effectAllowed=null==t?void 0:t.effect;const s=L.drag;s.key=null==t?void 0:t.key,s.index=null==t?void 0:t.index,s.zIndex++},Ce=e=>{e.preventDefault()},ve=e=>{fe();const t=qe(e.target);t&&t.dataset.drop==e.dataTransfer.effectAllowed&&t.classList.add("drop-over")},he=e=>{fe();const t=qe(e.target);if(t&&t.dataset.drop==e.dataTransfer.effectAllowed){const{key:t,index:s}=L.drag;if(t){const a=L[t][s];"devices"==t?((e,t)=>{var s;const{x:a,y:n}=null==(s=f.value)?void 0:s.displace(e);L.edit.devices.push({...t,zIndex:L.drag.zIndex,name:te(t),deviceCode:se(t),status:0,error:0,style:{x:a,y:n}})})(e,a):((e,t)=>{var s;const{x:a,y:n}=null==(s=f.value)?void 0:s.displace(e),l=g.width+2*g.gap,i=l/2;L.edit.pipes.push({...t,style:{x:a,y:n},width:100,height:l,zIndex:L.drag.zIndex,paths:[{x:i,y:i},{x:100-i,y:i}],bind:[],parallel:[[[],[]]]})})(e,a),L.edit.type=L.drag.key,L.edit.index=L.edit[t].length-1,tt()}}},fe=()=>{document.querySelectorAll(".drop-over").forEach((e=>{e.classList.remove("drop-over")}))},qe=e=>{for(;e;){if(e.dataset&&e.dataset.drop)return e;e=e.parentNode}},Ze=e=>{let t=e;return e instanceof Array?t=e.map((e=>Ze(e))):"[object Object]"==Object.prototype.toString.call(e)&&(t={},Object.keys(e).forEach((s=>{let a=e[s];(a instanceof Array||"[object Object]"==Object.prototype.toString.call(e))&&(a=Ze(a)),t[s]=a}))),t},et={max:50,list:[],tsp:0,time:500},tt=()=>{const e=Date.now();if(e-et.tsp<et.time)return;et.tsp=e;const t=et.list;t.length>=et.max&&t.splice(0,1);const s=Ze(L.edit);t.push(s)},st=e=>{const t=e.keyCode;if(e.ctrlKey&&90==t)return void(()=>{const e=et.list,t=e.length;if(0==t)return;const s=e[t-2];if(s){const e=Ze(s);Object.keys(e).forEach((e=>{L.edit[e]=Ze(s[e])}))}t>1&&e.splice(t-1,1)})();const{index:s,type:a}=L.edit;return s<0||!a?void 0:46==t?(L.edit[a].splice(s,1),L.edit.index=-1,void tt()):void(e.ctrlKey&&86==t&&((e,t)=>{const s=Ze(L.edit[e][t]);"devices"==e&&s.type!==ae.DOT&&(s.name=te(s),s.deviceCode=se(s)),s.style.x+=50,L.drag.zIndex++,s.zIndex=L.drag.zIndex,L.edit.index=L.edit[e].length,L.edit[e].push(s),tt()})(a,s))},at=e=>{const t=e.keyCode,{index:s,type:a}=L.edit;if(s<0||!a||oe.isMove)return;const n={x:0,y:0};switch(t){case 38:case 87:n.y-=1;break;case 40:case 83:n.y+=1;break;case 37:case 65:n.x-=1;break;case 39:case 68:n.x+=1}0==n.x&&0==n.y||nt(n)},nt=e=>{const t=L.edit[L.edit.type][L.edit.index];0!=e.x&&(t.style.x+=e.x),0!=e.y&&(t.style.y+=e.y),tt()},lt=()=>{const e=L.edit;e[e.type][e.index].parallel.push([[],[]])},it=e=>{if(!e)return;const t=R.find((t=>t.id==e));let s=0;const a=null==t?void 0:t.pipes.map((e=>{var t;const a=Ze(e);a.bind||(a.bind=[]),a.bind[0]instanceof Array?(a.parallel=a.bind,a.bind=[]):a.parallel=[[[],[]]];const{width:n,height:l}=(e=>{let t=0,s=0;for(let n=0;n<e.length;n++){const{x:a,y:l}=e[n];e[n].moved=!0,a>t&&(t=a),l>s&&(s=l)}const a=g.width/2+g.gap;return{width:t+a,height:s+a}})(a.paths);return a.width=n,a.height=l,a.zIndex=s++,a.color=(null==(t=L.pipes.find((e=>e.type==a.type)))?void 0:t.color)||"#000",a})),n=null==t?void 0:t.devices.map((e=>{var t;const a=Ze(e);return a.key=null==(t=a.deviceCode)?void 0:t.replace(/[^a-zA-Z]/g,""),a.zIndex=s++,a}));L.drag.zIndex=s,L.edit.devices=n,L.edit.pipes=a,tt()},yt=(e,t)=>{if(L.filters[e]=t,"display"==e){L.forms.type.hide=!t}else"template"==e&&it(t)};return(()=>{const e=L.forms;e.template.items=R.map((e=>({label:e.name,value:e.id}))),e.template.onChange=e=>yt("template",e),e.animate.onChange=e=>yt("animate",e),e.lockeDev.onChange=e=>yt("lockeDev",e),e.lockePipe.onChange=e=>yt("lockePipe",e),e.display.onChange=e=>yt("display",e),e.type.onChange=e=>yt("type",e)})(),tt(),window.addEventListener("keydown",at,!1),window.addEventListener("keyup",st,!1),b((()=>{window.removeEventListener("keydown",at),window.removeEventListener("keyup",st)})),(a,i)=>{const y=k("e-form"),m=w,u=T,C=D,H=Q,b=O,X=$,S=M,I=A,R=E,Z=z,ee=B,te=k("e-drag");return e(),t("div",{class:d([a.$style.page,"flex"]),ref_key:"pageRef",ref:v,style:o({"--scale":x(L).edit.scale}),onDragstart:ue,onDragover:p(Ce,["prevent"]),onDragenter:ve,onDrop:p(he,["prevent"])},[s("div",{class:d([a.$style.tools,"p-sm o-a"])},[s("div",{class:d(a.$style.group)},[s("div",{class:d(a.$style.wrap)},[_(y,{forms:x(L).forms,size:"small",inline:!0,cols:1},null,8,["forms"])],2)],2),s("div",{class:d([a.$style.group,a.$style.line])},[s("div",{class:d(a.$style.title)},"管路",2),s("div",{class:d(a.$style.wrap)},[(e(!0),t(n,null,l(x(L).pipes,((n,l)=>(e(),t("div",{class:d(a.$style.item),style:o({"--color":n.color}),"data-effect":"copy","data-key":"pipes","data-index":l,draggable:!0},[s("div",{class:d(a.$style.name)},c(n.name)+"：",3),s("div",{class:d(a.$style.pipe)},null,2)],14,He)))),256))],2)],2),s("div",{class:d([a.$style.group,a.$style.device])},[s("div",{class:d(a.$style.title)},"设备",2),s("div",{class:d(a.$style.wrap)},[(e(!0),t(n,null,l(x(L).devices,((n,l)=>(e(),t("div",{class:d({[a.$style.item]:!0,[a.$style["is-dot"]]:n.type==x(ae).DOT}),"data-effect":"copy","data-key":"devices","data-index":l,draggable:!0},[n.type!=x(ae).DOT?(e(),t("img",{key:0,src:re(n),draggable:"false"},null,8,ke)):(e(),t("div",{key:1,class:d(a.$style.dot)},null,2)),s("div",{class:d(a.$style.name)},c(n.name),3)],10,be)))),256))],2)],2),_(u,null,{default:P((()=>[_(m,{type:"primary",size:"small",onClick:i[0]||(i[0]=e=>j("devices"))},{default:P((()=>[V("设备")])),_:1}),_(m,{type:"primary",size:"small",onClick:i[1]||(i[1]=e=>j("pipes"))},{default:P((()=>[V("管路")])),_:1}),_(m,{type:"danger",size:"small",onClick:U},{default:P((()=>[V("清空")])),_:1}),_(m,{type:"warning",size:"small",onClick:N},{default:P((()=>[V("优化")])),_:1}),_(m,{type:"primary",size:"small",onClick:K},{default:P((()=>[V("log")])),_:1})])),_:1}),_(C,{class:"mt-xs",type:"textarea",modelValue:x(L).edit.text,"onUpdate:modelValue":i[2]||(i[2]=e=>x(L).edit.text=e),placeholder:"JSON 数据"},null,8,["modelValue"])],2),s("div",{class:d([a.$style.wrapper,"f-x o-h"])},[s("div",{class:d(a.$style["drag-info"])},[s("div",_e,[Pe,_(H,{size:"small",modelValue:x(L).drag.width,"onUpdate:modelValue":i[3]||(i[3]=e=>x(L).drag.width=e),onKeyup:i[4]||(i[4]=p((()=>{}),["stop"]))},null,8,["modelValue"]),Ve,_(H,{size:"small",modelValue:x(L).drag.height,"onUpdate:modelValue":i[5]||(i[5]=e=>x(L).drag.height=e),onKeyup:i[6]||(i[6]=p((()=>{}),["stop"]))},null,8,["modelValue"])])],2),_(ee,{class:d(a.$style["device-info"]),accordion:""},{default:P((()=>[_(Z,{name:"1"},{title:P((()=>[s("span",we,c(x(W).name),1)])),default:P((()=>{var y,o;return[s("div",Te,[x(W).type==x(ae).DOT?(e(),t("div",De,[Qe,s("span",null,[_(C,{size:"small",modelValue:x(W).name,"onUpdate:modelValue":i[7]||(i[7]=e=>x(W).name=e),placeholder:"请输入",onChange:tt,onKeyup:i[8]||(i[8]=p((()=>{}),["stop"]))},null,8,["modelValue"])])])):r("",!0),s("div",Oe,[$e,s("span",null,c(x(W).type),1)]),x(W).type==x(ae).DOT?(e(),t("div",Me,[ze,s("span",null,[_(C,{size:"small",modelValue:x(W).deviceCode,"onUpdate:modelValue":i[9]||(i[9]=e=>x(W).deviceCode=e),placeholder:"请输入",onChange:tt,onKeyup:i[10]||(i[10]=p((()=>{}),["stop"]))},null,8,["modelValue"])])])):x(W).deviceCode?(e(),t("div",Be,[Xe,s("span",null,c(x(W).deviceCode),1)])):r("",!0),x(W).type==x(ae).DOT?(e(),t("div",Fe,[Se,s("span",null,[_(C,{size:"small",modelValue:x(W).unit,"onUpdate:modelValue":i[11]||(i[11]=e=>x(W).unit=e),placeholder:"请输入",onChange:tt,onKeyup:i[12]||(i[12]=p((()=>{}),["stop"]))},null,8,["modelValue"])])])):r("",!0),s("div",Ie,[Je,s("span",null,"x: "+c(null==(y=x(W).style)?void 0:y.x.toFixed(2))+", y: "+c(null==(o=x(W).style)?void 0:o.y.toFixed(2)),1)]),s("div",Ge,[Ee,_(b,{class:"f-x",modelValue:x(W).rotate,"onUpdate:modelValue":i[13]||(i[13]=e=>x(W).rotate=e),min:0,max:360,"show-input":"",size:"small",onChange:tt,onKeyup:i[14]||(i[14]=p((()=>{}),["stop"]))},null,8,["modelValue"])]),x(W).bind?(e(),t("div",je,[Ue,_(S,{class:"f-x",modelValue:x(W).bind,"onUpdate:modelValue":i[15]||(i[15]=e=>x(W).bind=e),onChange:tt},{default:P((()=>[(e(!0),t(n,null,l(x(F),(t=>(e(),h(X,{value:t.deviceCode},{default:P((()=>[V(c(t.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])):r("",!0),x(W).parallel?(e(),h(ee,{key:5,accordion:"",class:d(a.$style.parallel)},{default:P((()=>[_(Z,{name:"2"},{title:P((()=>[Ae,_(m,{size:"small",circle:"",plain:"",onClick:p(lt,["stop"])},{default:P((()=>[_(I)])),_:1})])),default:P((()=>[s("div",Ye,[(e(!0),t(n,null,l(x(W).parallel,((s,i)=>(e(),t("div",{class:d(a.$style.item)},[Ne,_(m,{size:"small",circle:"",plain:"",onClick:e=>(e=>{const t=L.edit;t[t.type][t.index].parallel.splice(e,1)})(i)},{default:P((()=>[_(R)])),_:2},1032,["onClick"]),_(S,{class:"f-x",modelValue:s[0],"onUpdate:modelValue":e=>s[0]=e,onChange:tt},{default:P((()=>[(e(!0),t(n,null,l(x(G),(t=>(e(),h(X,{value:t.deviceCode},{default:P((()=>[V(c(t.name),1)])),_:2},1032,["value"])))),256))])),_:2},1032,["modelValue","onUpdate:modelValue"]),Re,_(S,{class:"f-x",modelValue:s[1],"onUpdate:modelValue":e=>s[1]=e},{default:P((()=>[(e(!0),t(n,null,l(x(J),(t=>(e(),h(X,{value:t.deviceCode},{default:P((()=>[V(c(t.name),1)])),_:2},1032,["value"])))),256))])),_:2},1032,["modelValue","onUpdate:modelValue"])],2)))),256))])])),_:1})])),_:1},8,["class"])):r("",!0),_(C,{type:"textarea",value:JSON.stringify(x(W),void 0,2)},null,8,["value"])])]})),_:1})])),_:1},8,["class"]),_(te,{ref_key:"dragRef",ref:f,width:x(L).drag.width,height:x(L).drag.height,"data-drop":"copy",zoom:x(L).edit.scale,"onUpdate:zoom":i[16]||(i[16]=e=>x(L).edit.scale=e),onMousemove:xe,onMouseup:ce},{default:P((()=>[s("div",Ke,[_(me,{list:x(L).edit.devices,type:"devices",locked:x(L).filters.lockeDev,display:x(L).filters.display,"hide-type":x(L).filters.type,active:"devices"==x(L).edit.type?x(L).edit.index:-1,onClick:de,onMousedown:p(pe,["stop"]),onMouseup:p(ce,["stop"])},null,8,["list","locked","display","hide-type","active"]),_(Le,{ref_key:"pipeRef",ref:Y,list:x(L).edit.pipes,type:"pipes",locked:x(L).filters.lockePipe,animate:x(L).filters.animate,display:x(L).filters.display,"hide-type":x(L).filters.type,width:x(g).width,gap:x(g).gap,scale:x(L).edit.scale,active:"pipes"==x(L).edit.type?x(L).edit.index:-1,onClick:de,onMousedown:p(pe,["stop"]),onMouseup:ce,onChange:q},null,8,["list","locked","animate","display","hide-type","width","gap","scale","active"])])])),_:1},8,["width","height","zoom"])],2)],38)}}}),[["__cssModules",{$style:{page:"_page_1vxkv_2",tools:"_tools_1vxkv_10",group:"_group_1vxkv_17",title:"_title_1vxkv_20",wrap:"_wrap_1vxkv_23",item:"_item_1vxkv_26",name:"_name_1vxkv_29",line:"_line_1vxkv_33",pipe:"_pipe_1vxkv_38",device:"_device_1vxkv_45",dot:"_dot_1vxkv_53",wrapper:"_wrapper_1vxkv_67","drag-info":"_drag-info_1vxkv_70","device-info":"_device-info_1vxkv_71",parallel:"_parallel_1vxkv_88"}}]]);export{qe as default};
