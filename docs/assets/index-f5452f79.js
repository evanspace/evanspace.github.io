import{_ as e}from"./index-2dfdc011.js";import{B as t,C as a}from"./element-plus-b235a374.js";import{o as n,c as r,a as s,h as i,r as o,G as l,f as c,z as u,u as d,K as m,O as p,Z as h,T as v,R as f,x as g,X as w,Y as y,L as _,a7 as L,_ as b,n as j,be as x,bc as k,I as C,S as E,U as I}from"./@vue-a135adea.js";import{_ as T}from"./common-b50db88d.js";import"./pinia-2f66cc81.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-c8083132.js";import"./@element-plus-53304ce0.js";import"./vue-i18n-0c7d7e0b.js";import"./@intlify-70f8e63b.js";import"./source-map-cb1fe5b8.js";import"./vue-8247fce3.js";import"./path-to-regexp-b4f1402b.js";import"./path-browserify-5a9d894f.js";import"./nprogress-bb8bbc26.js";import"./vite-plugin-mock-29454ef3.js";import"./mockjs-c92738cf.js";import"./lodash-es-7cdd8bf7.js";import"./async-validator-cf877c1f.js";import"./@vueuse-1c227f78.js";import"./@ctrl-91de2ec7.js";import"./@popperjs-b78c3215.js";import"./axios-a8ee11a1.js";const V={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},A=[s("path",{fill:"currentColor",d:"M480 704h160a64 64 0 0 0 64-64v-32h-96a32 32 0 0 1 0-64h96v-96h-96a32 32 0 0 1 0-64h96v-96h-96a32 32 0 0 1 0-64h96v-32a64 64 0 0 0-64-64H384a64 64 0 0 0-64 64v32h96a32 32 0 0 1 0 64h-96v96h96a32 32 0 0 1 0 64h-96v96h96a32 32 0 0 1 0 64h-96v32a64 64 0 0 0 64 64zm64 64v128h192a32 32 0 1 1 0 64H288a32 32 0 1 1 0-64h192V768h-96a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64h256a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128z"},null,-1)];const M={name:"ep-mic",render:function(e,t){return n(),r("svg",V,A)}},z={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},R=[s("path",{fill:"currentColor",d:"M160 448a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32zm448 0a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32zM160 896a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32zm448 0a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32z"},null,-1)];const P={name:"ep-menu",render:function(e,t){return n(),r("svg",z,R)}},S={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},q=[s("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0a30.592 30.592 0 0 1 0-42.752L764.736 512L452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0a30.592 30.592 0 0 1 0-42.752L508.736 512L196.864 192a30.592 30.592 0 0 1 0-42.688"},null,-1)];const D={name:"ep-d-arrow-right",render:function(e,t){return n(),r("svg",S,q)}},O={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},B=[s("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512L340.864 831.872a30.592 30.592 0 0 0 0 42.752a29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1)];const $={name:"ep-arrow-right",render:function(e,t){return n(),r("svg",O,B)}},U={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},N=[s("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896a448 448 0 0 1 0-896m0 832a384 384 0 0 0 0-768a384 384 0 0 0 0 768m-96-544q32 0 32 32v256q0 32-32 32t-32-32V384q0-32 32-32m192 0q32 0 32 32v256q0 32-32 32t-32-32V384q0-32 32-32"},null,-1)];const H={name:"ep-video-pause",render:function(e,t){return n(),r("svg",U,N)}},F={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},K=[s("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896a448 448 0 0 1 0-896m0 832a384 384 0 0 0 0-768a384 384 0 0 0 0 768m-48-247.616L668.608 512L464 375.616zm10.624-342.656l249.472 166.336a48 48 0 0 1 0 79.872L474.624 718.272A48 48 0 0 1 400 678.336V345.6a48 48 0 0 1 74.624-39.936z"},null,-1)];const W={name:"ep-video-play",render:function(e,t){return n(),r("svg",F,K)}},J={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},G=[s("path",{fill:"currentColor",d:"M609.408 149.376L277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0a30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688a29.12 29.12 0 0 0-41.728 0"},null,-1)];const Q={name:"ep-arrow-left",render:function(e,t){return n(),r("svg",J,G)}},X={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Y=[s("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0a30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264a29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672zm256 0a29.12 29.12 0 0 1 41.728 0a30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264a29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672z"},null,-1)];const Z={name:"ep-d-arrow-left",render:function(e,t){return n(),r("svg",X,Y)}};class ee{constructor(){}load(e,t,a,n){const r=new Request(e,{headers:new Headers({}),credentials:"same-origin"});fetch(r).then((e=>{if(200==e.status||0===e.status){const t=e.body.getReader(),n=e.headers.get("Content-Length"),r=n?parseInt(n):0,s=0!==r;let i=0;return new ReadableStream({start(e){!function n(){t.read().then((({done:t,value:o})=>{if(t)e.close();else{i+=o.byteLength;const t=new ProgressEvent("progress",{lengthComputable:s,loaded:i,total:r});a&&a(t),e.enqueue(o),n()}}))}()}})}throw Error(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`)})).then((e=>new Response(e).text())).then((e=>{const a=this.formste(e);if(!a)throw Error("文件格式不对!");t&&t(a)})).catch((e=>{n&&n(e)}))}formste(e){const t={ti:"",ar:"",al:"",by:"",offset:0,lrc:[]};e.split("\n").filter((e=>""!==e.trim())).map((e=>{const a=this.parseLyricLine(e.trim());return!!a&&("lyric"===a.type?t.lrc.push(a.data):t[a.type]=a.data,e.trim())}));let a=new RegExp("^\\d+(?:\\.\\d{0,3})?");return t.lrc.forEach(((e,n)=>{const r=(t.lrc[n+1]||{}).tsp;let s=r?r-e.tsp:2;s=Number(s.toString().match(a)),e.duration=s})),t}parseLyricLine(e){let t;if(null!==(t=e.match(/^\[(ti|ar|al|by|offset):(.*)\]$/)))return{type:t[1],data:t[2]};if(null!==(t=e.match(/^\[(\d{2}):(\d{2}).(\d{2})\](.*)/))){const e=Number(t[1]),a=Number(t[2]),n=Number(t[3]);return{type:"lyric",data:{time:{m:e,s:a,ms:n},tsp:(60*e*1e3+1e3*a+n)/1e3,lyric:t[4].trim()}}}}}const te=e=>{let t=parseInt((e/60).toString()),a=parseInt((e%60).toString());return t=t>9?t:"0"+t,a=a>9?a:"0"+a,t+":"+a},ae={class:"page"},ne={class:"music-box"},re=["src"],se={class:"left-control"},ie={class:"process-control"},oe={class:"up"},le={class:"music-name"},ce={class:"time"},ue={class:"cu"},de=(e=>(x("data-v-5e476086"),e=e(),k(),e))((()=>s("span",{class:"line"},null,-1))),me={class:"total"},pe={class:"progress"},he={class:"right-control"},ve={class:"progress"},fe={class:"music-list"},ge=["onClick"],we={class:"canvas-box"},ye={class:"lrc-box"},_e={class:"list"},Le={class:"w"},be=T(i({__name:"index",setup(i){let x=/\.(mp3|ogg)$/;const k=Object.assign({"../../../../public/audio/人为情叹 - 阿悠悠.mp3":()=>e((()=>import("./人为情叹 - 阿悠悠-af4d4723.js")),[]),"../../../../public/audio/南北组合 吉萍 - 你曾是我炫耀的资本.ogg":()=>e((()=>import("./南北组合 吉萍 - 你曾是我炫耀的资本-bb19c34b.js")),[]),"../../../../public/audio/小少焱-上下五千年.mp3":()=>e((()=>import("./小少焱-上下五千年-aae8eceb.js")),[]),"../../../../public/audio/就是南方凯 - 离别开出花.mp3":()=>e((()=>import("./就是南方凯 - 离别开出花-e48a3bcb.js")),[]),"../../../../public/audio/李驰- - 吻得太逼真DJ（弹棉花的小花）.mp3":()=>e((()=>import("./李驰- - 吻得太逼真DJ（弹棉花的小花）-79e7f113.js")),[]),"../../../../public/audio/程响 - 可能.ogg":()=>e((()=>import("./程响 - 可能-0c33e6ba.js")),[]),"../../../../public/audio/走卒(戏腔版)-昊轩京剧-吴昊.128.mp3":()=>e((()=>import("./走卒(戏腔版)-昊轩京剧-吴昊.128-1680b28f.js")),[]),"../../../../public/audio/邵帅 - 你是人间四月天.ogg":()=>e((()=>import("./邵帅 - 你是人间四月天-6a377801.js")),[])}),T=Object.entries(k).map((([e])=>((e||"").match(/\/([^\/]+)\.\w+$/)||[""])[0].replace(/\//,""))),V=o(),A=o(),z=l({src:"",status:"",totalTime:0,currentTime:0,process:0,volume:100}),R=l({list:T,index:-1,name:"",show:!1}),S=l({al:"",lrc:[],active:0}),q=o("#ff4500"),O=o(["#0add31","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"]);let B=!1,U=!1,N=!1;const F=()=>{var e;null==(e=V.value)||e.play(),B=!0,J(),z.status="play",U||(xe(),U=!0,Ce())};let K;const J=()=>{clearInterval(K),K=setInterval(G,300)},G=()=>{var e,t;let a=(null==(e=V.value)?void 0:e.currentTime)||0,n=(null==(t=V.value)?void 0:t.duration)||0;z.totalTime=n,z.currentTime=a,z.process=a/n*100,X(),n>0&&a==n&&Te(1)},X=()=>{if(!V.value)return;if("play"!==z.status)return;let e=V.value.currentTime||0;const t=S.lrc.findIndex((t=>t.tsp<=e&&e<=t.tsp+t.duration));t!=S.active&&(S.active=t)};let Y,be,je;const xe=()=>{const e=new(0,window.AudioContext);Y=e.createAnalyser(),je=new Uint8Array(Y.frequencyBinCount),e.createMediaElementSource(V.value).connect(Y),Y.connect(e.destination)};let ke;const Ce=()=>{let e;if(ke=requestAnimationFrame(Ce),U&&(e=Y),N&&(e=be),!e)return;e.getByteFrequencyData(je);const t=Math.floor(2*je.length/3),a=new Array(2*t);for(let n=0;n<t;n++)a[n]=a[a.length-n-1]=je[n];Ee(a,255,250)},Ee=(e,t,a=100)=>{const n=A.value,r=n.width,s=n.height,i=n.getContext("2d");i.lineWidth=2,i.clearRect(0,0,r,s);const o=Math.min(r,s)/2,l=e.length,c=parseInt((.5*o).toString()),u=parseInt((.99*o-c).toString()),d=Math.min(a,l),m=Math.round(l/d);for(let p=0;p<d;p++){const a=e[p*m+m],n=parseInt((u*(a/t)).toString())||1;i.beginPath();const o=Math.round(360*p/d);i.strokeStyle=`hsla(${o}, 100%, 50%, 1)`,i.save(),i.translate(r/2,s/2),i.rotate(p*Math.PI*2/d-.5*Math.PI),i.moveTo(0,c),i.lineTo(0,c+n),i.closePath(),i.stroke(),i.restore()}},Ie=()=>{var e;B=!1,null==(e=V.value)||e.pause(),z.status="paused",clearInterval(K)},Te=(e=1)=>{let t=R.index;t+=e;const a=R.list.length;t>=a?t=0:t<0&&(t=a-1),Ve(t)},Ve=(e=0)=>{if(R.index==e)return;R.index=e;let t=R.list[e];z.src=`/audio/${t}`,t=t.replace(x,""),R.name=t;const a=`/audio/${t}.lrc`;S.active=-1,(new ee).load(a,(e=>{Object.keys(e).forEach((t=>{S[t]=e[t]}))}),void 0,(()=>{Object.keys(S).forEach((e=>{S[e]="lrc"==e?[]:"active"==e?0:""}))})),U&&j((()=>{var e;null==(e=V.value)||e.play()}))},Ae=(e=0)=>{V.value.currentTime+=e,G()},Me=(e=.1)=>{let t=V.value.volume;t+=e,t>1?t=1:t<0&&(t=0),V.value.volume=t,z.volume=100*t};let ze;const Re=()=>{if(navigator.mediaDevices){if(N)return Pe(),void F();Ie(),navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{ze=e;const t=new(0,window.AudioContext),a=t.createAnalyser();be=a,je=new Uint8Array(a.frequencyBinCount),t.createMediaStreamSource(ze).connect(a),a.connect(t.destination),N=!0,Ce()}))}},Pe=()=>{ze&&(N=!1,ze.getAudioTracks().forEach((e=>{e.stop()})))},Se=()=>{const e="running"===(new AudioContext).state;B=e,e&&F()},qe=e=>{switch(e.keyCode){case 32:B?Ie():F();break;case 37:e.ctrlKey?Te(-1):Ae(-10);break;case 39:e.ctrlKey?Te(1):Ae(10)}},De=()=>{const e=A.value,t=e.parentNode,a=t.offsetWidth,n=t.offsetHeight;e.width=a,e.height=n};return c((()=>{(()=>{Ve(1),j(Se),De();let e=new Array(256).fill(0);Ee(e,255,190)})(),window.addEventListener("resize",De),window.addEventListener("keydown",qe)})),u((()=>{clearInterval(K),cancelAnimationFrame(ke),window.removeEventListener("resize",De),window.removeEventListener("keydown",qe)})),(e,i)=>{const o=Z,l=t,c=Q,u=W,j=H,x=$,k=D,T=P,B=M,U=a;return n(),r("div",ae,[s("div",ne,[s("audio",{src:d(z).src,ref_key:"mysong",ref:V,controls:""},null,8,re),s("div",se,[m(l,{underline:!1,type:"info",onClick:i[0]||(i[0]=h((e=>Te(-1)),["stop"]))},{default:p((()=>[m(o)])),_:1}),m(l,{title:"快退",underline:!1,type:"info",onClick:i[1]||(i[1]=e=>Ae(-10))},{default:p((()=>[m(c)])),_:1}),m(l,{title:"播放",underline:!1,type:"info",onClick:F},{default:p((()=>[m(u)])),_:1}),m(l,{title:"暂停",underline:!1,type:"info",onClick:Ie},{default:p((()=>[m(j)])),_:1}),m(l,{title:"快进",underline:!1,type:"info",onClick:i[2]||(i[2]=e=>Ae(10))},{default:p((()=>[m(x)])),_:1}),m(l,{title:"下一首",underline:!1,type:"info",onClick:i[3]||(i[3]=e=>Te(1))},{default:p((()=>[m(k)])),_:1})]),s("div",ie,[s("div",oe,[s("div",le,v(d(R).name),1),s("div",ce,[s("span",ue,v(d(te)(d(z).currentTime)),1),de,s("span",me,v(d(te)(d(z).totalTime)),1)])]),s("div",pe,[s("div",{class:"bar",style:f({width:d(z).process+"%"})},null,4)])]),s("div",he,[s("div",{class:"min",title:"音量-",onClick:i[4]||(i[4]=e=>Me(-.1))}),s("div",ve,[s("div",{class:"bar",style:f({width:d(z).volume+"%"})},null,4)]),s("div",{class:"max",title:"音量+",onClick:i[5]||(i[5]=e=>Me(.1))}),m(l,{title:"歌单",underline:!1,type:"info",onClick:i[6]||(i[6]=h((e=>d(R).show=!d(R).show),["stop"]))},{default:p((()=>[m(T)])),_:1}),m(l,{title:"麦克风",underline:!1,type:"info",onClick:h(Re,["stop"])},{default:p((()=>[m(B)])),_:1},8,["onClick"]),m(U,{title:"歌词颜色",modelValue:d(q),"onUpdate:modelValue":i[7]||(i[7]=e=>g(q)?q.value=e:null),"show-alpha":"",size:"small",style:{marginLeft:"4px"},predefine:d(O)},null,8,["modelValue","predefine"])]),m(b,{name:"el-zoom-in-bottom"},{default:p((()=>[w(s("div",fe,[(n(!0),r(_,null,L(d(R).list,((e,t)=>(n(),r("div",{key:t,class:C(["item",{"is-active":t==d(R).index}]),onClick:h((e=>Ve(t)),["stop"])},v(e),11,ge)))),128))],512),[[y,d(R).show]])])),_:1})]),s("div",we,[s("div",ye,[s("div",{class:"move",style:f({top:`-${30*d(S).active}px`,"--color":d(q)})},[s("div",_e,[(n(!0),r(_,null,L(d(S).lrc,((e,t)=>(n(),r("div",{key:t,class:"item",style:f({"--time":e.duration+"s"})},[s("span",Le,[E(v(e.lyric)+" ",1),t==d(S).active?(n(),r("span",{key:t,class:"c",style:f({animationPlayState:"paused"==d(z).status?"paused":""})},v(e.lyric),5)):I("",!0)])],4)))),128))])],4)]),s("canvas",{ref_key:"cvs",ref:A},null,512)])])}}}),[["__scopeId","data-v-5e476086"]]);export{be as default};
