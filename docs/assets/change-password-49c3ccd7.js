import{d as s,r as o,k as r,a as e,C as t,s as i,g as a,D as p,o as m,b as l,u as d,m as n,G as j,H as c,I as u,J as w,K as f,p as g,h as v}from"./vendor-6db95a6f.js";import{u as h}from"./modules-49818129.js";import{b as _}from"./router-33eeb5ed.js";import{_ as b}from"./_plugin-vue_export-helper-1b428a4d.js";import"./_commonjsHelpers.js-52245d71.js";import"./common-04bb9be1.js";import"./virtual_svg-icons-register-8ad20dca.js";import"./config-4f270d6d.js";import"./locales-e1120ea8.js";import"./lang-e64994c5.js";import"./_vite-a5811b86.js";import"./api-825933d9.js";import"./hash-1a46c016.js";import"./video-743a63e1.js";import"./linear-border-0fdf57b5.js";import"./loading-8a1d4966.js";import"./animation-44c6d291.js";import"./path-ab657dec.js";import"./stroke-513b2a34.js";import"./character-rain-eed9ff72.js";import"./fireworks-54ecd7cb.js";import"./canvas-40a658f7.js";import"./entry-direction-de6c70f2.js";import"./imgs-6af2820a.js";import"./carousel-55796b62.js";import"./attribute-f6dbf528.js";import"./border-4e9867f1.js";import"./clip-dc0cdeb2.js";import"./coffee-cup-d90a6e75.js";import"./multiple-paths-be92f5ff.js";import"./polygon-939cc41c.js";import"./corrugation-d09fee85.js";import"./flex-5e3f137f.js";import"./grid-8b6d39d7.js";import"./houdini-bb1eabb3.js";import"./css-9cbff082.js";import"./preserve-3d-f9936226.js";import"./pseudo-45c996ce.js";import"./text-ce3b304e.js";import"./olympic-rings-e2810743.js";import"./transform-3dd559a1.js";import"./cssd2-22d9c6eb.js";import"./mixins-0c45dd8b.js";import"./cssd3-4962515e.js";import"./device-f47c05ca.js";import"./three-scene-61ece009.js";import"./data-07702360.js";import"./G1-ea28b39c.js";import"./5-3-5-5-51f32552.js";import"./d3-c3505a59.js";import"./water-0c8970f3.js";import"./drag-6d215279.js";import"./editor-4b111c1b.js";import"./pipe-a3675bfa.js";import"./plane-device-c0c5b828.js";import"./ep-3bf59634.js";import"./mouse-pointing-6b9ef1e6.js";import"./event-33a46c7d.js";import"./img-c178749a.js";import"./map-097da9c0.js";import"./music-player-64959522.js";import"./media-f8a32dde.js";import"./video-auto-play-60025d37.js";import"./ele-intersection-77b0bae2.js";import"./monitor-67ade0f5.js";import"./mock-4d9d5619.js";import"./button-91b93a57.js";import"./card-a9a5920c.js";import"./cursor-follow-26ceaa74.js";import"./debounce-319cbe3b.js";import"./excess-3e7cb004.js";import"./skill-c6f37e4e.js";import"./svg-d565e4c5.js";import"./texture-94f122b7.js";import"./directives-42b20c62.js";import"./vue-91546867.js";import"./layout-43906d3a.js";import"./components-b97cd1e1.js";import"./top-module-fbdbe925.js";import"./side-bar-dad37bbc.js";import"./tags-view-779c43eb.js";const y={class:"content"},P=(s=>(g("data-v-669ebc71"),s=s(),v(),s))((()=>l("div",{class:"clearfix"},[l("span",null,"修改密码")],-1))),$={class:"change-pwd"},x=b(s({__name:"index",setup(s){const g=o(null),v=r({password:"",newPassword:"",confirmNewPassword:""}),b=o(!1),x={password:[{required:!0,trigger:"blur",message:"请输入旧密码。"}],newPassword:[{trigger:"blur",required:!0,validator:(s,o,r)=>{if(""===o)r(new Error("请输入密码"));else{const s=g.value;""!==v.confirmNewPassword&&s.validateField("confirmNewPassword"),(o.length<6||o.length>24)&&r(new Error("确保至少包含6个或最多24个字符"));/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\W_!@#$%^&*`~()-+=]+$)(?![a-z0-9]+$)(?![a-z\W_!@#$%^&*`~()-+=]+$)(?![0-9\W_!@#$%^&*`~()-+=]+$)[a-zA-Z0-9\W_!@#$%^&*`~()-+=]/.test(o)||r(new Error("密码必须包含数字，特殊字符，小写字母，大写字母其中三项")),o===v.password&&r(new Error("新密码不能与旧密码相同")),r()}}}],confirmNewPassword:[{trigger:"blur",required:!0,validator:(s,o,r)=>{""===o?r(new Error("请再次输入密码")):o!==v.newPassword?r(new Error("两个输入不匹配！")):r()}}]},V=h(),k=a(),N=()=>{g.value.validate((s=>{if(!s)return!1;b.value=!0;const o={...v};V.changePwd(o).then((async()=>{j({type:"success",title:"提示",message:"密码修改成功！"}),await V.logout(),k.push(`${_}/login`)}))}))},E=()=>{g.value.resetFields()};return(s,o)=>{const r=c,a=u,j=w,h=f,_=p;return m(),e("div",y,[t(_,{class:"box-card"},{header:i((()=>[P])),default:i((()=>[l("div",$,[t(h,{ref_key:"formRef",ref:g,model:d(v),rules:x,"status-icon":"","label-position":"top"},{default:i((()=>[t(a,{label:"旧密码",prop:"password"},{default:i((()=>[t(r,{modelValue:d(v).password,"onUpdate:modelValue":o[0]||(o[0]=s=>d(v).password=s),type:"password",placeholder:"旧密码",clearable:"","show-password":"",autocomplete:"off"},null,8,["modelValue"])])),_:1}),t(a,{label:"新密码",prop:"newPassword"},{default:i((()=>[t(r,{modelValue:d(v).newPassword,"onUpdate:modelValue":o[1]||(o[1]=s=>d(v).newPassword=s),type:"password",placeholder:"新密码",clearable:"","show-password":"",autocomplete:"off"},null,8,["modelValue"])])),_:1}),t(a,{label:"确认新密码",prop:"confirmNewPassword"},{default:i((()=>[t(r,{modelValue:d(v).confirmNewPassword,"onUpdate:modelValue":o[2]||(o[2]=s=>d(v).confirmNewPassword=s),type:"password",placeholder:"确认密码",clearable:"","show-password":"",autocomplete:"off"},null,8,["modelValue"])])),_:1}),t(a,null,{default:i((()=>[t(j,{type:"primary",loading:d(b),onClick:N},{default:i((()=>[n("提交")])),_:1},8,["loading"]),t(j,{onClick:E},{default:i((()=>[n("重置")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})])}}}),[["__scopeId","data-v-669ebc71"]]);export{x as default};
