var e={};function t(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var i=1,o="";if("?"===e[c=n+1])throw new TypeError('Pattern cannot start with "?" at '.concat(c));for(;c<e.length;)if("\\"!==e[c]){if(")"===e[c]){if(0==--i){c++;break}}else if("("===e[c]&&(i++,"?"!==e[c+1]))throw new TypeError("Capturing groups are not allowed at ".concat(c));o+=e[c++]}else o+=e[c++]+e[c++];if(i)throw new TypeError("Unbalanced pattern at ".concat(n));if(!o)throw new TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:o}),n=c}else{for(var a="",c=n+1;c<e.length;){var f=e.charCodeAt(c);if(!(f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||95===f))break;a+=e[c++]}if(!a)throw new TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:a}),n=c}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),r=t.prefixes,i=void 0===r?"./":r,a="[^".concat(o(t.delimiter||"/#?"),"]+?"),c=[],f=0,u=0,p="",s=function(e){if(u<n.length&&n[u].type===e)return n[u++].value},d=function(e){var t=s(e);if(void 0!==t)return t;var r=n[u],i=r.type,o=r.index;throw new TypeError("Unexpected ".concat(i," at ").concat(o,", expected ").concat(e))},v=function(){for(var e,t="";e=s("CHAR")||s("ESCAPED_CHAR");)t+=e;return t};u<n.length;){var l=s("CHAR"),h=s("NAME"),x=s("PATTERN");if(h||x){var E=l||"";-1===i.indexOf(E)&&(p+=E,E=""),p&&(c.push(p),p=""),c.push({name:h||f++,prefix:E,suffix:"",pattern:x||a,modifier:s("MODIFIER")||""})}else{var m=l||s("ESCAPED_CHAR");if(m)p+=m;else if(p&&(c.push(p),p=""),s("OPEN")){E=v();var g=s("NAME")||"",y=s("PATTERN")||"",w=v();d("CLOSE"),c.push({name:g||(y?f++:""),pattern:g&&!y?a:y,prefix:E,suffix:w,modifier:s("MODIFIER")||""})}else d("END")}}return c}Object.defineProperty(e,"__esModule",{value:!0}),e.pathToRegexp=e.tokensToRegexp=e.regexpToFunction=e.match=e.tokensToFunction=e.compile=e.parse=void 0,e.parse=t;var n=e.compile=function(e,n){return r(t(e,n),n)};function r(e,t){void 0===t&&(t={});var n=a(t),r=t.encode,i=void 0===r?function(e){return e}:r,o=t.validate,c=void 0===o||o,f=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:".concat(e.pattern,")$"),n)}));return function(t){for(var n="",r=0;r<e.length;r++){var o=e[r];if("string"!=typeof o){var a=t?t[o.name]:void 0,u="?"===o.modifier||"*"===o.modifier,p="*"===o.modifier||"+"===o.modifier;if(Array.isArray(a)){if(!p)throw new TypeError('Expected "'.concat(o.name,'" to not repeat, but got an array'));if(0===a.length){if(u)continue;throw new TypeError('Expected "'.concat(o.name,'" to not be empty'))}for(var s=0;s<a.length;s++){var d=i(a[s],o);if(c&&!f[r].test(d))throw new TypeError('Expected all "'.concat(o.name,'" to match "').concat(o.pattern,'", but got "').concat(d,'"'));n+=o.prefix+d+o.suffix}}else if("string"!=typeof a&&"number"!=typeof a){if(!u){var v=p?"an array":"a string";throw new TypeError('Expected "'.concat(o.name,'" to be ').concat(v))}}else{d=i(String(a),o);if(c&&!f[r].test(d))throw new TypeError('Expected "'.concat(o.name,'" to match "').concat(o.pattern,'", but got "').concat(d,'"'));n+=o.prefix+d+o.suffix}}else n+=o}return n}}function i(e,t,n){void 0===n&&(n={});var r=n.decode,i=void 0===r?function(e){return e}:r;return function(n){var r=e.exec(n);if(!r)return!1;for(var o=r[0],a=r.index,c=Object.create(null),f=function(e){if(void 0===r[e])return"continue";var n=t[e-1];"*"===n.modifier||"+"===n.modifier?c[n.name]=r[e].split(n.prefix+n.suffix).map((function(e){return i(e,n)})):c[n.name]=i(r[e],n)},u=1;u<r.length;u++)f(u);return{path:o,index:a,params:c}}}function o(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function a(e){return e&&e.sensitive?"":"i"}function c(e,t,n){void 0===n&&(n={});for(var r=n.strict,i=void 0!==r&&r,c=n.start,f=void 0===c||c,u=n.end,p=void 0===u||u,s=n.encode,d=void 0===s?function(e){return e}:s,v=n.delimiter,l=void 0===v?"/#?":v,h=n.endsWith,x="[".concat(o(void 0===h?"":h),"]|$"),E="[".concat(o(l),"]"),m=f?"^":"",g=0,y=e;g<y.length;g++){var w=y[g];if("string"==typeof w)m+=o(d(w));else{var A=o(d(w.prefix)),T=o(d(w.suffix));if(w.pattern)if(t&&t.push(w),A||T)if("+"===w.modifier||"*"===w.modifier){var R="*"===w.modifier?"?":"";m+="(?:".concat(A,"((?:").concat(w.pattern,")(?:").concat(T).concat(A,"(?:").concat(w.pattern,"))*)").concat(T,")").concat(R)}else m+="(?:".concat(A,"(").concat(w.pattern,")").concat(T,")").concat(w.modifier);else"+"===w.modifier||"*"===w.modifier?m+="((?:".concat(w.pattern,")").concat(w.modifier,")"):m+="(".concat(w.pattern,")").concat(w.modifier);else m+="(?:".concat(A).concat(T,")").concat(w.modifier)}}if(p)i||(m+="".concat(E,"?")),m+=n.endsWith?"(?=".concat(x,")"):"$";else{var C=e[e.length-1],N="string"==typeof C?E.indexOf(C[C.length-1])>-1:void 0===C;i||(m+="(?:".concat(E,"(?=").concat(x,"))?")),N||(m+="(?=".concat(E,"|").concat(x,")"))}return new RegExp(m,a(n))}function f(e,n,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,i=n.exec(e.source);i;)t.push({name:i[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),i=n.exec(e.source);return e}(e,n):Array.isArray(e)?function(e,t,n){var r=e.map((function(e){return f(e,t,n).source}));return new RegExp("(?:".concat(r.join("|"),")"),a(n))}(e,n,r):function(e,n,r){return c(t(e,r),n,r)}(e,n,r)}function u(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var i=1,o="";if("?"===e[c=n+1])throw new TypeError('Pattern cannot start with "?" at '.concat(c));for(;c<e.length;)if("\\"!==e[c]){if(")"===e[c]){if(0==--i){c++;break}}else if("("===e[c]&&(i++,"?"!==e[c+1]))throw new TypeError("Capturing groups are not allowed at ".concat(c));o+=e[c++]}else o+=e[c++]+e[c++];if(i)throw new TypeError("Unbalanced pattern at ".concat(n));if(!o)throw new TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:o}),n=c}else{for(var a="",c=n+1;c<e.length;){var f=e.charCodeAt(c);if(!(f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||95===f))break;a+=e[c++]}if(!a)throw new TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:a}),n=c}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),r=t.prefixes,i=void 0===r?"./":r,o="[^".concat(p(t.delimiter||"/#?"),"]+?"),a=[],c=0,f=0,u="",s=function(e){if(f<n.length&&n[f].type===e)return n[f++].value},d=function(e){var t=s(e);if(void 0!==t)return t;var r=n[f],i=r.type,o=r.index;throw new TypeError("Unexpected ".concat(i," at ").concat(o,", expected ").concat(e))},v=function(){for(var e,t="";e=s("CHAR")||s("ESCAPED_CHAR");)t+=e;return t};f<n.length;){var l=s("CHAR"),h=s("NAME"),x=s("PATTERN");if(h||x){var E=l||"";-1===i.indexOf(E)&&(u+=E,E=""),u&&(a.push(u),u=""),a.push({name:h||c++,prefix:E,suffix:"",pattern:x||o,modifier:s("MODIFIER")||""})}else{var m=l||s("ESCAPED_CHAR");if(m)u+=m;else if(u&&(a.push(u),u=""),s("OPEN")){E=v();var g=s("NAME")||"",y=s("PATTERN")||"",w=v();d("CLOSE"),a.push({name:g||(y?c++:""),pattern:g&&!y?o:y,prefix:E,suffix:w,modifier:s("MODIFIER")||""})}else d("END")}}return a}function p(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function s(e){return e&&e.sensitive?"":"i"}function d(e,t,n){return function(e,t,n){void 0===n&&(n={});for(var r=n.strict,i=void 0!==r&&r,o=n.start,a=void 0===o||o,c=n.end,f=void 0===c||c,u=n.encode,d=void 0===u?function(e){return e}:u,v=n.delimiter,l=void 0===v?"/#?":v,h=n.endsWith,x="[".concat(p(void 0===h?"":h),"]|$"),E="[".concat(p(l),"]"),m=a?"^":"",g=0,y=e;g<y.length;g++){var w=y[g];if("string"==typeof w)m+=p(d(w));else{var A=p(d(w.prefix)),T=p(d(w.suffix));if(w.pattern)if(t&&t.push(w),A||T)if("+"===w.modifier||"*"===w.modifier){var R="*"===w.modifier?"?":"";m+="(?:".concat(A,"((?:").concat(w.pattern,")(?:").concat(T).concat(A,"(?:").concat(w.pattern,"))*)").concat(T,")").concat(R)}else m+="(?:".concat(A,"(").concat(w.pattern,")").concat(T,")").concat(w.modifier);else"+"===w.modifier||"*"===w.modifier?m+="((?:".concat(w.pattern,")").concat(w.modifier,")"):m+="(".concat(w.pattern,")").concat(w.modifier);else m+="(?:".concat(A).concat(T,")").concat(w.modifier)}}if(f)i||(m+="".concat(E,"?")),m+=n.endsWith?"(?=".concat(x,")"):"$";else{var C=e[e.length-1],N="string"==typeof C?E.indexOf(C[C.length-1])>-1:void 0===C;i||(m+="(?:".concat(E,"(?=").concat(x,"))?")),N||(m+="(?=".concat(E,"|").concat(x,")"))}return new RegExp(m,s(n))}(u(e,n),t,n)}function v(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,i=n.exec(e.source);i;)t.push({name:i[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),i=n.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,n){var r=e.map((function(e){return v(e,t,n).source}));return new RegExp("(?:".concat(r.join("|"),")"),s(n))}(e,t,n):d(e,t,n)}e.tokensToFunction=r,e.match=function(e,t){var n=[];return i(f(e,n,t),n,t)},e.regexpToFunction=i,e.tokensToRegexp=c,e.pathToRegexp=f;export{n as c,v as p};
