import{d as e,r as t,g as i,L as o,o as r,z as a,c as s,a as l,I as n,M as d,u as m,b as c,k as p,K as u,J as h,aQ as g,x as f,c4 as j,c5 as x,Z as v,c6 as w,at as y,aS as b,aR as k}from"./vendor-59c65e9f.js";import{j as M,d as _,k as z}from"./common-24a0b7a6.js";import"./api-4fe51afc.js";import"./hash-0ad4cab1.js";import"./linear-border-02036c22.js";import"./loading-08e1cc15.js";import"./animation-44c6d291.js";import"./path-9d1a3677.js";import"./stroke-de8cc189.js";import"./character-rain-587040ec.js";import"./fireworks-ffeb797d.js";import"./canvas-40a658f7.js";import"./entry-direction-e2773158.js";import"./carousel-55796b62.js";import"./attribute-932e31c4.js";import"./border-4b6288a8.js";import"./clip-dc0cdeb2.js";import"./coffee-cup-a8f45a43.js";import"./multiple-paths-457b76f8.js";import"./polygon-f9ed855e.js";import"./corrugation-19503851.js";import"./flex-cb6ba34a.js";import"./grid-60c54772.js";import"./houdini-9a366c4d.js";import"./css-c8db7731.js";import"./preserve-3d-00f243bc.js";import"./pseudo-df2d2a7e.js";import"./text-56b93129.js";import"./olympic-rings-62b5e08e.js";import"./transform-3dd559a1.js";import"./cssd2-8d8e037d.js";import"./cssd3-ecc8ba41.js";import"./device-5ba8f176.js";import"./data-07702360.js";import"./G1-ea28b39c.js";import"./5-3-5-5-51f32552.js";import"./d3-c3505a59.js";import"./water-263c837a.js";import"./drag-6d215279.js";import"./editor-4b111c1b.js";import"./pipe-74ca3955.js";import"./mouse-pointing-93b1e9a6.js";import"./event-33a46c7d.js";import"./img-89093cea.js";import"./map-097da9c0.js";import"./music-player-a629e226.js";import"./media-f8a32dde.js";import"./video-auto-play-01492a57.js";import"./ele-intersection-6b62f4d5.js";import"./monitor-a0073a56.js";import"./button-69593bda.js";import"./card-9c24f33a.js";import"./cursor-follow-ea771ec5.js";import"./debounce-0dcdc29e.js";import"./excess-8a5e53db.js";import"./skill-c6f37e4e.js";import"./svg-d565e4c5.js";import"./texture-167bd3c6.js";import"./directives-1cbe6763.js";import"./vue-91546867.js";const C=e({__name:"title",props:{name:String,height:Number,color:{type:String,default:"#ffffff"},size:{type:Number,default:80},mouseRadius:{type:Number,default:30}},setup(e){const n=window.requestAnimationFrame||window.requestAnimationFrame||window.requestAnimationFrame||window.requestAnimationFrame||window.requestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},d=e,m=t("canvasRef"),c={x:null,y:null},p=i({sizeX:2,sizeY:2,oldColor:""}),u=i([]),h=t([]);let g,f,j;const x=()=>{let e=m.value;g=e,f=e.getContext("2d"),g.width=window.innerWidth,g.height=d.height||window.innerHeight;let t=document.createElement("canvas");t.width=600,t.height=200;let i=t.getContext("2d");i.textAlign="center",i.textBaseline="middle",i.font=`bold ${d.size}px 微软雅黑`,i.fillStyle=d.color,i.fillText(d.name||"平台",t.width/2,t.height/2),j=t,v()},v=()=>{y(),b(),z()},w=i({ite:0,start:0,end:0}),y=()=>{u.length=0,h.length=0,h.values=[],w.ite=100,w.start=0,w.end=w.start+w.ite},b=()=>{let e=g,t=j,i=(e.width-t.width)/2,o=(e.height-t.height)/2;f.clearRect(0,0,e.width,e.height),f.drawImage(t,i,o,t.width,t.height);const r=f.getImageData(i,o,t.width,t.height);for(let a=0;a<t.width;a+=p.sizeX)for(let e=0;e<t.height;e+=p.sizeY){const s=4*(e*r.width+a);if(r.data[s+3]>=125){const l=`rgba(${r.data[s]} , ${r.data[s+1]} ,  ${r.data[s+2]} , ${r.data[s+3]})`;let n,d=a+20*Math.random(),m=200*-Math.random()+400,c=t.height/2-40*Math.random()+20;n=c<o+t.height/2?300*Math.random():300*-Math.random(),u.push({x:d+i,y:c+o,ex:a+i,ey:e+o,vx:m,vy:n,color:l,a:1500,width:p.sizeX,height:p.sizeY,stop:!1,checkLength:5,maxCheckTimes:10,checkTimes:0});let h=u[u.length-1];k(h)}}},k=e=>{p.oldColor!=e.color&&(f.fillStyle=e.color,p.oldColor=e.color),f.fillRect(e.x-e.width/2,e.y-e.height/2,e.width,e.height)},M=e=>{"WORD_CANVAS"==e.target.id?(c.x=e.clientX-e.target.getBoundingClientRect().left,c.y=e.clientY-e.target.getBoundingClientRect().top):(c.x=null,c.y=null)};let _=!1;const z=()=>{u.sort(((e,t)=>e.ex-t.ex)),_||(_=!0,C((e=>{if(h.length<u.length){w.end>u.length-1&&(w.end=u.length-1);let e=u.slice(w.start,w.end);h.values=h.values.concat(e),w.start+=w.ite,w.end+=w.ite}h.values.forEach((t=>{R(t,e)}))})))},C=e=>{if("function"==typeof e){let t=16;f.clearRect(0,0,g.width,g.height),e(t),n((()=>{C(e)}))}},R=(e,t)=>{q(e,t),k(e),A(e)},q=(e,t)=>{if(e.stop)e.x=e.ex,e.y=e.ey;else{t/=1e3;const i=e.ex-e.x,o=e.ey-e.y,r=Math.atan(o/i);let a=Math.abs(e.a*Math.cos(r));a=e.x>e.ex?-a:a;let s=Math.abs(e.a*Math.sin(r));s=e.y>e.ey?-s:s,e.vx+=a*t,e.vy+=s*t,e.vx*=.95,e.vy*=.95,e.x+=e.vx*t,e.y+=e.vy*t,Math.abs(e.x-e.ex)<=e.checkLength&&Math.abs(e.y-e.ey)<=e.checkLength?(e.checkTimes++,e.checkTimes>=e.maxCheckTimes&&(e.stop=!0)):e.checkTimes=0}},A=e=>{if(!c.x)return void r();const t=d.mouseRadius,i=Math.sqrt(Math.pow(c.x-e.x,2)+Math.pow(c.y-e.y,2)),o=Math.atan((c.y-e.y)/(c.x-e.x));if(i<t){e.stop=!1,e.checkTimes=0,e.recordX||(e.recordX=e.ex,e.recordY=e.ey),e.a=2e3+1e3*(1-i/t);let r=Math.abs((t-i)*Math.cos(o)),a=Math.abs((t-i)*Math.sin(o));r=c.x>e.x?-r:r,a=c.y>e.y?-a:a,e.ex=e.x+r,e.ey=e.y+a}else r();function r(){e.recordX&&(e.stop=!1,e.checkTimes=0,e.a=1500,e.ex=e.recordX,e.ey=e.recordY,e.recordX=null,e.recordY=null)}};return o(d,(()=>{x()})),r((()=>{window.addEventListener("mousemove",M,!1),x(),window.addEventListener("resize",x,!1)})),a((()=>{window.removeEventListener("mousemove",M),window.removeEventListener("resize",x)})),(e,t)=>(l(),s("canvas",{ref_key:"canvasRef",ref:m,id:"WORD_CANVAS",style:{position:"relative","z-index":"2"}},null,512))}}),R={class:"login-page"},q={class:"login-page__panel flex flex-ac"},A={class:"login-page__left f-x"},V=["src"],L={class:"login-page__right"},T=c("div",{class:"bg"},null,-1),S=c("h1",{class:"title"},[c("span",null,"请登录！")],-1),X=e({__name:"index",setup(e){const r={mounted:e=>{e.querySelector("input").focus()}},a=new URL("/imgs/login-icon.png",self.location).href,X=i({username:"",password:"",code:"",randomStr:""}),E=i({username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,validator:(e,t,i)=>{!t&&(t=""),""==t?i(new Error("请输入验证码!")):i()},trigger:"blur"}]}),Y=t(!1),$=t(""),F=t({}),K=t(null),U=t(null),B=M(),I=u(),N=h(),D=n((()=>_.base.title));o(I,(({query:e})=>{e&&($.value="error"!=e.redirect&&e.redirect||"",F.value=(e=>Object.keys(e).reduce(((t,i)=>("redirect"!==i&&(t[i]=e[i]),t)),{}))(e))}),{immediate:!0});const O=()=>{const e=K.value;e&&e.validate((e=>{e&&B.login(X,U.value).then((e=>{$.value.indexOf(_.base.domian)<0?N.push({path:$.value||`${z}/`,query:F.value}):window.location.href=decodeURIComponent($.value)}))}))},W=({shiftKey:e,key:t,keyCode:i}={})=>{13!=i?(t&&1===t.length&&(Y.value=!!(e&&t>="a"&&t<="z"||!e&&t>="A"&&t<="Z")),"CapsLock"===t&&!0===Y.value&&(Y.value=!1)):O()};return(e,t)=>{const i=y,o=b,n=k,u=g;return l(),s("div",R,[d(C,{name:m(D),height:200,color:"#ffffff",size:35,"mouse-radius":50},null,8,["name"]),c("div",q,[c("div",A,[c("img",{src:m(a),alt:""},null,8,V)]),c("div",L,[c("div",{class:"login-page--right_form",ref_key:"loadingRef",ref:U},[T,S,d(u,{class:"form",ref_key:"loginRef",ref:K,model:m(X),rules:m(E)},{default:p((()=>[d(o,{prop:"username",key:"username"},{default:p((()=>[f(d(i,{clearable:"",modelValue:m(X).username,"onUpdate:modelValue":t[0]||(t[0]=e=>m(X).username=e),placeholder:"账户",tabindex:"1",size:"large","prefix-icon":m(j),onKeyup:x(O,["enter"])},null,8,["modelValue","prefix-icon"]),[[r]])])),_:1}),d(n,{visible:m(Y),content:"大小写锁定",placement:"right",manual:""},{default:p((()=>[d(o,{prop:"password",key:"password"},{default:p((()=>[d(i,{clearable:"",placeholder:"密码",tabindex:"2",modelValue:m(X).password,"onUpdate:modelValue":t[1]||(t[1]=e=>m(X).password=e),type:"password","show-password":"",size:"large","prefix-icon":m(v),onKeyup:W,onBlur:t[2]||(t[2]=e=>Y.value=!1)},null,8,["modelValue","prefix-icon"])])),_:1})])),_:1},8,["visible"]),d(o,{prop:"code",key:"code"},{default:p((()=>[d(i,{modelValue:m(X).code,"onUpdate:modelValue":t[3]||(t[3]=e=>m(X).code=e),clearable:"",placeholder:"验证码",maxlength:"6",tabindex:"3",size:"large","prefix-icon":m(w),onKeyup:x(O,["enter"])},null,8,["modelValue","prefix-icon"])])),_:1}),c("div",{class:"btn-wrap"},[c("div",{class:"btn",onClick:O},"login")])])),_:1},8,["model","rules"])],512)])])])}}});export{X as default};
