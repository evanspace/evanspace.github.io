var e=Object.defineProperty,s=(s,a,t)=>(((s,a,t)=>{a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t})(s,"symbol"!=typeof a?a+"":a,t),t);import{b7 as a,b8 as t,bu as n,ba as o,bb as i,bc as r,bd as d,af as c,e as l,i as h,l as w,o as m,g as b,h as u}from"./vendor-82d05a1b.js";import{E as p,u as v}from"./scene-resize-ef457d70.js";import"./index-a624a9da.js";class y extends p{constructor(e){super(e),s(this,"clock"),s(this,"gui"),s(this,"transformControls"),this.clock=new a,this.addControls(),this.initModel(),this.gui=new t,this.addGui()}init(){this.initLight(),this.initGrid(),this.initAxes()}addControls(){const e=this.camera,s=new n(e,this.renderer.domElement);s.addEventListener("dragging-changed",(e=>{this.controls&&(this.controls.enabled=!e.value)})),this.transformControls=s,this.addObject(s)}addGui(){var e;const s=this.gui,a=this.transformControls;if(!a)return;const t={w:()=>{a.setMode("translate")},e:()=>{a.setMode("rotate")},r:()=>{a.setMode("scale")},x:!1,y:!1,z:!1,add:()=>{a.setSize(a.size+.1)},sub:()=>{a.setSize(Math.max(a.size-.1,.1))},space:!1},n=s.addFolder("键盘快捷键");n.add(t,"w").name("“W”切换坐标辅助)"),n.add(t,"e").name("“E”切换旋转辅助)"),n.add(t,"r").name("“R”切换缩放辅助)"),n.add(a,"showX").name("“X”坐标系 x 轴隐显)"),n.add(a,"showY").name("“Y”坐标系 y 轴隐显)"),n.add(a,"showZ").name("“Z”坐标系 z 轴隐显)"),n.add(t,"add").name('“+”,"="坐标系放大)'),n.add(t,"sub").name('“-”,"_"坐标系缩小)'),n.add(a,"enabled").name("“空格”坐标系禁/启用)"),s.domElement.style="position: absolute; top: 0px; right: 0px",null==(e=this.container.parentNode)||e.appendChild(s.domElement)}initModel(){var e;const s=new o(300,300),a=new i({color:11721691}),t=new r(s,a);t.name="ground",t.rotation.x=1.5*Math.PI,t.receiveShadow=!0,this.addObject(t);const n=new d(50,50,50),l=new i({color:1276674}),h=new r(n,l);h.position.y=25,h.castShadow=!0,this.addObject(h),null==(e=this.transformControls)||e.attach(h);const w=e=>this.onKeydown(e),m=e=>this.onKeyup(e);window.addEventListener("keydown",w,!1),window.addEventListener("keyup",m,!1),c((()=>{window.removeEventListener("keydown",w),window.removeEventListener("keyup",m)}))}modelAnimate(){}onKeydown(e){const s=this.transformControls;if(s)switch(e.key){case"w":s.setMode("translate");break;case"e":s.setMode("rotate");break;case"r":s.setMode("scale");break;case"+":case"=":s.setSize(s.size+.1);break;case"-":case"_":s.setSize(Math.max(s.size-.1,.1));break;case"x":s.showX=!s.showX;break;case"y":s.showY=!s.showY;break;case"z":s.showZ=!s.showZ;break;case" ":s.enabled=!s.enabled;break;case"Escape":s.reset()}}onKeyup(e){}}const f={class:"three-page"},k=l({__name:"index",setup(e){const s=h(),a={axes:{visible:!0},render:{alpha:!0},grid:{visible:!0}};let t;return w((()=>{a.container=s.value,t=new y(a),t.run(),v(t).resize()})),(e,a)=>(m(),b("div",f,[u("div",{class:"h-100",ref_key:"containerRef",ref:s},null,512)]))}});export{k as default};
