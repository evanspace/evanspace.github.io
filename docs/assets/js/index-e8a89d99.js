var e=Object.defineProperty,t=(t,s,a)=>(((t,s,a)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a})(t,"symbol"!=typeof s?s+"":s,a),a);import{fv as s,bA as a,dk as i,eZ as n,dI as o,by as r,dg as d,dv as h,fw as c,eJ as l,e as p,i as u,l as g,o as m,g as w,h as b}from"./vendor-46b9e856.js";import{E as f,u as v}from"./scene-resize-6de17060.js";import"./index-cc965771.js";const y=(new s).setPath("https://raw.githubusercontent.com/zlevan/3d-demo-data/main");class S extends f{constructor(e){super(e),t(this,"lightGroup",new a),t(this,"gui",new i),this.addLight(),console.log(this)}createRender(){return new n(this.options.render)}render(){this.renderer.renderAsync(this.scene,this.camera)}modelAnimate(){const e=Date.now()/1e3;this.lightGroup.children.forEach(((t,s)=>{const a=(Math.sin((e+s)*(Math.PI/2))+1)/2,i=t.position,n=o.lerp(i.x,0,a),r=o.lerp(i.z,0,a);t.target.position.x=n,t.target.position.z=r,t.userData.helper.update()}))}initModel(){const e=this.createGround(500,500,8421504);this.addObject(e);const t=new r(new d(30,30,30),new h({color:10066329}));t.position.y=15,t.castShadow=!0,this.addObject(t)}async addLight(){const e=this.lightGroup,[t,s,a,i]=await Promise.all([y.loadAsync("/ies/101.ies"),y.loadAsync("/ies/102.ies"),y.loadAsync("/ies/103.ies"),y.loadAsync("/ies/104.ies")]);this.addObject(e);const n=this.createIESSpotLight([65,30,65],16711680,t);e.add(n);const o=this.createIESSpotLight([-65,30,65],65280,s);e.add(o);const r=this.createIESSpotLight([-65,30,-65],255,a);e.add(r);const d=this.createIESSpotLight([65,30,-65],16777215,i);e.add(d),this.addGui()}createIESSpotLight(e,t,s){const a=new c(t,30,200,Math.PI/8,.7,0);a.iesMap=s,a.castShadow=!0;const[i,n,o]=e;a.position.set(i,n,o);const r=new l(a);return this.addObject(a.target,r),a.userData.helper=r,a}addGui(){var e;const t=this.gui,s=this.lightGroup.children;t.add({helper:!0},"helper").onChange((e=>{s.forEach((t=>{t.userData.helper.visible=e}))})),s.forEach(((e,s)=>{t.addColor(e,"color").name("灯光"+(s+1)).onChange((()=>{e.userData.helper.update()}))})),t.domElement.className+=" gui-wrap",null==(e=this.container.parentNode)||e.appendChild(t.domElement)}}const E={class:"three-page"},L=p({__name:"index",setup(e){const t=u(),s={grid:{visible:!0},ambientLight:{visible:!1},directionalLight:{visible:!1}};let a;return g((()=>{s.container=t.value,a=new S(s).run(),v(a).resize()})),(e,s)=>(m(),w("div",E,[b("div",{class:"h-100",ref_key:"containerRef",ref:t},null,512)]))}});export{L as default};
