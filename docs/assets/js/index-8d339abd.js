var t=Object.defineProperty,e=(e,i,s)=>(((e,i,s)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s})(e,"symbol"!=typeof i?i+"":i,s),s);import{be as i,bs as s,ct as o,bS as n,c as a,bO as r,bh as c,e as l,Y as h,i as d,f as u,l as p,o as m,g,h as f,u as _,n as y,q as b,F as v,r as C,t as k,a7 as x,a8 as G,m as w,p as D,I as A,a9 as j,B as S,ak as O,aa as M}from"./vendor-d68cddd1.js";import{t as T}from"./index-23edb7fb.js";import{S as P,i as z,a as L}from"./three-scene.module-e9bfe0cb.js";import{e as E,A as R,_ as B}from"./index-5878c146.js";import{u as H}from"./scene-resize-a376ffd6.js";import{u as I}from"./background-040c1ffa.js";import{u as U,c as $,m as F,b as N}from"./model-loader-a8713a2c.js";import"./posZ-95d90af9.js";import"./config-51e0289e.js";import"./object-be545f18.js";const W="ANCHOR_POS",J="ANCHOR_TARGET",V="MAIN_SCENE",K="campany_floor",Z="ROBOT",q="CHARACTER",Y="WAIT_LIFT",Q="LIGHT_SWITCH",X="GATE_SWITCH",tt="DUBLE_HORIZONTAL_SWITCH",et="DUBLE_ROTATE_SWITCH",it="VIDEO_SWITCH",st=.1,ot=146,nt=104,at=[];for(let Rt=0;Rt<5;Rt++)at.push([ot-20*Rt,st,20*((0==Rt?1:Rt)-1)-104]),at.push([ot-20*Rt,st,nt-20*Rt]),at.push([20*Rt-146,st,nt-20*Rt]),at.push([20*Rt-146,st,20*Rt-104]);const rt=300,ct=z,lt=L,{raycaster:ht,pointer:dt,update:ut,style:pt}=ct.useRaycaster(),{initCSS2DRender:mt,createCSS2DDom:gt}=ct.useCSS2D(),{createDiffusion:ft,updateDiffusion:_t}=ct.useDiffusion(),{createMove:yt,moveAnimate:bt}=ct.useMoveAnimate(),{createFence:vt,fenceAnimate:Ct}=ct.useFence(),{keyboardPressed:kt,destroyEvent:xt,insertEvent:Gt}=ct.useKeyboardState(),{checkCollide:wt}=ct.useCollide(),{dubleHorizontal:Dt,dubleRotate:At}=ct.useOpenTheDoor(),jt="FULL",St="NPC";class Ot extends P{constructor(t,s){super(t),e(this,"buildingGroup"),e(this,"anchorGroup"),e(this,"dotGroup"),e(this,"lightGroup"),e(this,"extend"),e(this,"css2DRender"),e(this,"mouseClickDiffusion"),e(this,"character"),e(this,"currentSight"),e(this,"historyTarget"),e(this,"historyCameraPosition"),e(this,"animateModels"),e(this,"moveFactor",1),e(this,"fence"),this.extend=s,this.css2DRender=mt(this.options,this.container),this.css2DRender.domElement.className="three-scene__dot-wrap",this.mouseClickDiffusion=ft(4,void 0,6),this.mouseClickDiffusion.rotation.x=.5*-Math.PI,this.mouseClickDiffusion.position.y=.5,this.mouseClickDiffusion.visible=!1,this.addObject(this.mouseClickDiffusion),this.createClock(),this.currentSight=jt,this.historyTarget=new i,this.historyCameraPosition=new i,this.animateModels=[],this.bindEvent(),this.addBuildingGroup(),this.addAnchorGroup(),this.addDotGroup(),this.addLightGroup()}addBuildingGroup(){const t=new s;t.name="建筑组",this.buildingGroup=t,this.addObject(t)}clearBuilding(){this.buildingGroup&&this.disposeObj(this.buildingGroup),this.animateModels=[],this.addBuildingGroup(),this.clearAnchor(),this.clearDot()}addBuilding(...t){this.buildingGroup&&this.buildingGroup.add(...t)}addAnchorGroup(){const t=new s;t.name="锚点组",this.anchorGroup=t,this.addObject(t)}clearAnchor(){this.anchorGroup&&this.disposeObj(this.anchorGroup),this.addAnchorGroup()}addAnchor(t){this.anchorGroup&&this.anchorGroup.add(t);const{x:e,y:i,z:s}=t.position;lt.createSpriteAnimate(t,[e,i,s],.2,8)}addDotGroup(){const t=new s;t.name="点位组",this.dotGroup=t,this.scene.add(t)}clearDot(){this.dotGroup&&this.disposeObj(this.dotGroup),this.addDotGroup()}addDot(t,e){var i;const s=t.position,{size:o,color:n}=t.font||{},{x:a=0,y:r=0,z:c=0}=s||{},l=gt({name:`\n        <div class="bg"></div>\n        <span class="inner" style="${null!=o?`font-size: ${"string"==typeof o?o:o+"px"};`:""} ${null!=n?`color: ${n}`:""}"></span>\n      `,className:"dot-2D-label",position:[a,r,c],onClick:e});return l.name=t.name,l.data=t,l._position_={x:a,y:r,z:c},null==(i=this.dotGroup)||i.add(l),l}addLightGroup(){const t=new s;t.name="灯光组",this.lightGroup=t,this.addObject(t)}clearLightGroup(){this.lightGroup&&this.disposeObj(this.lightGroup),this.addLightGroup()}addLight(t,e,i){if(this.lightGroup){e.name=t.name;const{to:s={x:0,y:0,z:0}}=t;if(e.target.position.set(s.x,s.y,s.z),this.lightGroup.add(e),i){const t=new o(e,e.color);this.lightGroup.add(t)}}}addCharacter(t,e){const{x:i,y:s,z:o}=e;t.position.set(i,s,o),this.character=t;const a=t.animations,r=new n(t),c={};for(let n=0;n<a.length;n++){const t=a[n],e=r.clipAction(t);c[t.name]=e}c.Dance.play();const l=c.Walking;t.extra={mixer:r,actions:c,runging:l},this.addObject(t);const h=["W","S"].map((t=>t.toUpperCase().charCodeAt(0)));Gt((e=>{t.__runing__||h.includes(e.keyCode)&&l.play()}),(e=>{t.__runing__||h.includes(e.keyCode)&&l.stop()}))}toggleSight(){if(this.judgeCruise())return;const t=this.currentSight==jt?St:jt;this.currentSight=t;const e=t===St;if(!this.controls)return;if(this.controls.maxDistance=e?10:800,this.controls.screenSpacePanning=!e,this.controls.enablePan=!e,this.controls.maxPolarAngle=Math.PI*(e?.8:.48),!this.character)return;const s=this.character.position,o=new i(0,2.5,0);if(e){a.success({message:"鼠标点击地面移动，或键盘 W、S 前后移动，A、D调整左右方向！",duration:15e3}),this.historyTarget=this.controls.target.clone(),this.historyCameraPosition=this.camera.position.clone();const t=s.clone().add(o);this.camera.lookAt(t),Math.abs(this.camera.position.y-t.y)>8&&(this.camera.position.y=t.y)}else this.camera.position.copy(this.historyCameraPosition),this.camera.lookAt(s);const n=(e?s:this.historyTarget).clone().add(o);this.controls.target.copy(n)}isPerspectives(){return this.currentSight==St}characterAccelerate(t=1){this.moveFactor+=t,this.moveFactor>=10?this.moveFactor=10:this.moveFactor<=1&&(this.moveFactor=1),a.success({message:"人物速度："+this.moveFactor,grouping:!0})}setControlTarget(t){this.controls&&(this.controls.target.copy(t.clone().add(new i(0,2.5,0))),this.camera.lookAt(this.controls.target))}waitLift(t,e,i){var s;const o=this.scene.getObjectByName(e),n=null==(s=t.data)?void 0:s.to;if(!o||!n)return;const c=o.position;if(Math.abs(n.y-c.y)>.2){const s=o.__bind_lift__;void 0!==s&&this.dubleHorizontalDoor({data:{bind:s}},2.3,!1),this.dubleHorizontalDoor({data:{bind:e}},2.3,!1).then((()=>{const s=5e3;a.success({message:"电梯移动中，请稍候，5秒后到达!",duration:s}),new r(c).to({y:n.y},s).delay(0).start().onUpdate((t=>{if(i){if(!this.character)return;this.character.position.y=t.y,this.camera.position.y=t.y,this.setControlTarget(this.character.position)}})).onComplete((()=>{o.__bind_lift__=t.data.bind,this.openLift(t,e)}))}))}else this.openLift(t,e)}openLift(t,e){this.dubleHorizontalDoor(t,2.3),this.dubleHorizontalDoor({data:{bind:e}},2.3)}lightSwitch(t){var e,i;const s=null==(i=this.lightGroup)?void 0:i.getObjectsByProperty("name",null==(e=t.data)?void 0:e.bind);s&&s.forEach((t=>{t.visible=!t.visible}))}dubleHorizontalDoor(t,e=400,i){const{bind:s,axle:o="z"}=t.data;return Dt(this.scene,{value:s,axle:o,scale:e,isOpen:i})}dubleRotateDoor(t){const{bind:e,axle:i="y",left:s="右",right:o="左",internal:n}=t.data;return At(this.scene,{value:e,axle:i,angle:Math.PI*(n?-.5:.5),leftMatch:s,rightMatch:o})}openGate(t){return this.dubleRotateDoor(t)}mouseClickGround(t,e){if(this.currentSight!==St)return Promise.reject();const i=this.character;if(!i)return Promise.reject();const{runing:s}=this.options.cruise;if(s)return Promise.reject();const o=t.point,n=this.mouseClickDiffusion,{runging:a}=i.extra;return a.play(),n.position.copy(o),n.visible=!0,i.__runing__=!0,new Promise((s=>{yt(i,o,((s,o)=>{this.setControlTarget(s),this.checkCharacterCollide(s,t.object.name===e?2:.3)&&(o(),a.stop(),i.__runing__=!1,n.visible=!1)}),(t=>{this.setControlTarget(t),a.stop(),i.__runing__=!1,n.visible=!1,s(i)}))}))}checkCharacterCollide(t,e=.3){var s;if(!this.character)return;const o=wt(this.character,t,null==(s=this.buildingGroup)?void 0:s.children,!0,new i(0,e,0));if(o.length){if(o[0].distance<.2)return a.warning({message:"撞到了！",grouping:!0}),!0}}cameraLookatMoveTo(t){this.controls&&lt.cameraLookatAnimate(this.camera,t,this.controls.target)}judgeCruise(){return!!this.options.cruise.runing&&(a.warning({message:"请退出巡航！",grouping:!0}),!0)}addModelAnimate(t,e=[],i=!0,s=1){if(!e.length)return;const o=new n(t),a=e.reduce(((t,e)=>{const n=e.name||"";return t[n]=o.clipAction(e),i&&t[n].play(),t[n].timeScale=s,t}),{});t.__action__=a,t.__mixer__=o,this.animateModels.push(t)}cameraTransition(t){var e;if(this.judgeCruise())return;if(this.mouseClickDiffusion.visible)return void a.warning({message:"人物移动中，不可操作！",grouping:!0});this.isPerspectives()&&this.toggleSight();const{to:i,target:s=t.position}=t.data;if(!i)return;this.isCameraMove(i)||lt.cameraLinkageControlsAnimate(this.controls,this.camera,i,s);const{bind:o}=t.data;if(!o)return;const n=null==(e=this.buildingGroup)?void 0:e.getObjectByName(o);this.addFence(n)}addFence(t){if(this.fence&&(this.disposeObj(this.fence),this.fence=void 0),t){const e=vt(t,5439406);this.fence=e,this.addObject(e)}}modelAnimate(){var t,e,s;this.css2DRender.render(this.scene,this.camera),"function"==typeof this.extend.animateCall&&this.extend.animateCall(),this.restoreAnchorMaterial();let o=null==(t=this.clock)?void 0:t.getDelta();if(this.animateModels.length&&this.animateModels.forEach((t=>{t.__mixer__&&t.__mixer__.update(o)})),null==(e=this.anchorGroup)||e.children.forEach((t=>{t.__mixer__&&t.__mixer__.update(o)})),this.character){this.character.extra.mixer.update(o),bt(.2*this.moveFactor)}if(this.mouseClickDiffusion.visible&&_t(),Ct(),this.isPerspectives()&&!(null==(s=this.character)?void 0:s.__runing__)){const t=10*o,e=.4*Math.PI*o,s=this.character;if(!s)return;const n=kt("S");if(kt("W")||n){const e=new i;null==s||s.getWorldDirection(e);const o=e.clone().multiplyScalar(n?-t:t),a=(null==s?void 0:s.position.clone().add(o))||new i;this.checkCharacterCollide(a)||(null==s||s.position.copy(a),this.setControlTarget(null==s?void 0:s.position))}kt("A")?s.rotation.y+=e:kt("D")&&(s.rotation.y-=e)}}onPointerMove(t){this.checkIntersectObjects(t)}onPointerUp(t){var e;super.onPointerUp(t);const i=t.timeStamp-this.pointer.tsp<rt;2==t.button?i&&"function"==typeof(null==(e=this.extend)?void 0:e.onClickRight)&&this.extend.onClickRight(t):0==t.button?i&&this.checkIntersectObjects(t):t.button}checkIntersectObjects(t){var e,i,s,o,n;const a=this.container,r=this.options.scale;ut(t,a,r);let c="pointerdown"==t.type||"pointerup"==t.type;const l=(null==(i=this.buildingGroup)?void 0:i.children.filter((t=>t.visible&&(c||t.__ground__))).concat((null==(e=this.anchorGroup)?void 0:e.children)||[]))||[];ht.setFromCamera(dt,this.camera);let h=ht.intersectObjects(l,c);if(c)if(a.style.cursor="auto",h.length){const t=h[0],e=t.object,i="string"==typeof e.name&&(this.extend.groundMeshName||[]).some((t=>e.name.indexOf(t)>-1)),n=this.findParentGroup(e);if(i&&"function"==typeof(null==(s=this.extend)?void 0:s.onClickGround)&&this.extend.onClickGround(n,t),!n)return;"function"==typeof(null==(o=this.extend)?void 0:o.onClickLeft)&&this.extend.onClickLeft(n,t)}else"function"==typeof(null==(n=this.extend)?void 0:n.onClickLeft)&&this.extend.onClickLeft();else this.hoverAnchor(h)}hoverAnchor(t){var e,i;if("function"==typeof this.extend.onHoverAnchor&&this.extend.onHoverAnchor(t[0],pt),t.length){const i=t[0].object;if(this.container.style.cursor=i._isAnchor_?"pointer":"auto",!i._isAnchor_)return;const s=i.material;void 0===i.__mat_color__&&(i.__mat_color__=s.color),s.color=new c(16715760),null==(e=this.anchorGroup)||e.children.forEach((t=>{t.__change_color__=t.uuid===i.uuid}))}else this.container.style.cursor="auto",null==(i=this.anchorGroup)||i.children.forEach((t=>{t.__change_color__=!1}))}restoreAnchorMaterial(){var t;null==(t=this.anchorGroup)||t.traverse((t=>{t.isSprite&&!t.__change_color__&&t.__mat_color__&&(t.material.color=t.__mat_color__)}))}findParentGroup(t){const e=t=>{if(t._isBuilding_)return t;let i=t.parent;return i?i&&i._isBuilding_?i:e(i):void 0};return e(t)}getAll(){var t,e;return(null==(e=this.buildingGroup)?void 0:e.children.concat((null==(t=this.dotGroup)?void 0:t.children)||[]))||[]}resize(){super.resize();const{width:t,height:e}=this.options;this.css2DRender.setSize(t,e)}dispose(){xt(),this.animateModels=[],this.disposeObj(this.buildingGroup),this.disposeObj(this.character),this.disposeObj(this.dotGroup),this.disposeObj(this.anchorGroup),this.disposeObj(this.fence),this.disposeObj(this.lightGroup),this.disposeObj(this.mouseClickDiffusion),this.clock=void 0,this.css2DRender=void 0,this.buildingGroup=void 0,this.character=void 0,this.dotGroup=void 0,this.anchorGroup=void 0,this.lightGroup=void 0,this.fence=void 0,this.mouseClickDiffusion=void 0,this.extend={},super.dispose()}}const Mt=(t,e)=>{const i=40*Math.random();return void 0!==i&&(t.value=i),t.show=Math.random()>.5,t.value=Number(Number(t.value||0).toFixed(2)),{value:t.value,show:t.show,font:{...t.font||{},color:"#"+(16777215+1e6*i).toString(16).substring(0,6)}}},Tt={class:"scene-operation"},Pt=["onClick"],zt=["innerHTML"],Lt="电梯-2",Et=B(l({__name:"index",setup(t){const e=h((s=(t,e,s,o)=>{if(!dt)return;(o+=.005)>1&&(o-=1),t=((t,e=0)=>new i(t.x,t.y+e,t.z))(s.getPointAt(o));let n=o+.001;n>1&&(n-=1),e=s.getPointAt(n),dt.position.set(t.x,st,t.z);const a=Math.atan2(-e.z+t.z,e.x-t.x);dt.rotation.z=.5*Math.PI+a},{devEnv:!0,baseUrl:"",bgColor:"",skyCode:"221",env:"/oss/textures/hdr/6.hdr",config:{},dotKey:"DOT",dotShowStrict:!1,anchorType:[W,J,Y,Q,X,it,tt,et],animationModelType:[K],models:[{key:V,name:"场景",size:18.6,url:"/公司总部.glb"},{key:"floor_low",name:"低层",size:26.7,url:"/低层.glb"},{key:"floor_heigh",name:"高层",size:11.3,url:"/高层.glb"},{key:K,name:"公司",size:54.4,url:"/二十五楼.glb"},{key:W,name:"定位",type:"sprite",range:{x:4,y:4},mapUrl:"/pos.png"},{key:J,name:"锚点",type:"sprite",range:{x:4,y:4},mapUrl:"/dw.png"},{key:Y,name:"电梯门",type:"sprite",range:{x:1,y:1},mapUrl:"/lift.png"},{key:tt,name:"横推开关门",type:"sprite",range:{x:1,y:1},mapUrl:"/lift.png"},{key:et,name:"旋转开关门",type:"sprite",range:{x:1,y:1},mapUrl:"/lift.png"},{key:X,name:"闸机",type:"sprite",range:{x:1,y:1},mapUrl:"/gate.png"},{key:it,name:"视频",type:"sprite",range:{x:1,y:1},mapUrl:"/video.png"},{key:Z,name:"机器人",size:.3,url:"/oss/model/park/机器人.glb"},{key:q,name:"人物",size:2.2,url:"/oss/model/park/RobotExpressive.glb"},{key:"spot_light_floor_2",type:"spotlight",name:"聚光灯",intensity:8,color:57599,distance:10},{key:Q,name:"开关灯",type:"sprite",range:{x:1.2,y:1.2},mapUrl:"/light.png"}].map((t=>(t.url&&t.url.indexOf("oss")<0&&(t.url="/oss/model/office"+t.url),t.mapUrl&&(t.mapUrl="/oss/textures/office"+t.mapUrl),t))),cruise:{visible:!0,auto:!0,mapUrl:"/oss/textures/cruise/line18.png",repeat:[1,1],width:2,segment:30,tension:.01,speed:1,mapSpeed:.01,points:at,close:!1,offset:5.2,animateBack:s}}));var s;const o=h({active:1,show:!1,list:[{name:"一楼",key:1,y:.1,bind:"_一楼电梯门-1_grp"},{name:"公司",key:2,y:184.7,bind:"电梯外门001"}]}),n=h({show:!1,style:{left:0,top:0},msg:""}),{changeBackground:a,backgroundLoad:r}=I(),{progress:c,loadModels:l,getModel:P}=U({baseUrl:e.baseUrl,indexDB:{cache:!0,dbName:"THREE__OFFICE__DB",tbName:"TB",version:27}}),z=d(),L={env:e.env,cruise:e.cruise,controls:{visible:!0,enableDamping:!0,dampingFactor:.48,maxPolarAngle:.48*Math.PI,screenSpacePanning:!1,maxDistance:1500},camera:{},directionalLight:{},axes:{visible:!0,size:1e3}};let B;const ot=t=>{var i;const s=t.data;{const t=Mt(s,B.buildingGroup);"object"==typeof t&&Object.keys(t).forEach((e=>{s[e]=t[e]}))}t.visible=s.show||!e.dotShowStrict;const o=null==(i=t.element)?void 0:i.getElementsByClassName("inner")[0];if(o){const{size:t,color:e}=s.font||{};null!=t&&(o.style.fontSize="string"==typeof t?t:t+"px"),null!=e&&(o.style.color=e),o.textContent=`${s.value||0}${s.unit}`}},nt=async t=>{if(!t)return;const{type:i}=t,s=P(i);if(!s)return void(i===e.dotKey&&(t=>{ot(B.addDot(t,(e=>{B.cameraLookatMoveTo(t.position)})))})(t));const{anchorType:o=[],animationModelType:n=[]}=e;let a=F(s);const{position:r,scale:c,rotation:l}=N(a,t),[h,d,u]=r;return a.scale.set(...c),a.position.set(h,d,u),a.rotation.set(...l),a._isBuilding_=!0,a.data=t,n.includes(i)&&B.addModelAnimate(a,s.animations,!0,1),o.includes(i)?(a._isAnchor_=!0,B.addAnchor(a)):a.isSpotLight?B.addLight(t,a,!0):B.addBuilding(a),Promise.resolve()},rt=async()=>{c.percentage=100,c.show=!1,B.clearBuilding(),await M(),await(()=>{let t=0,e=ct.value.length;return new Promise((i=>{if(0==e)return i(null);const s=async()=>{const o=ct.value[t];await nt(o),t++,t<e?s():i(t)};s()}))})(),B.setCruisePoint(e.cruise.points);const t=B.getValidTargetPosition(e.config||{});$(B.camera,t,B.controls.target).then((()=>{B.controlSave()}))},ct=d([]),lt=u((()=>ct.value.filter((t=>t.type===W)))),ht=()=>{l(e.models,(()=>{E.get(R.d3.office).then((async t=>{let i={};if(t.ConfigJson instanceof Object)i=t.ConfigJson;else if("string"==typeof t.ConfigJson)try{i=JSON.parse(t.ConfigJson)}catch(s){}ct.value=t.JsonList,Object.keys(i).forEach((t=>{e.config&&(e.config[t]=i[t])})),await rt(),ut(),pt()}))}))};let dt;const ut=()=>{dt=P(Z),dt.position.z=st,dt.rotation.z=.5*Math.PI,B.addObject(dt)},pt=()=>{const t=P(q);t.traverse((t=>{t.isMesh&&(t.castShadow=!0)}));const e={x:-69.4,y:0,z:127.3};e.x=33.7,e.z=25.3,t.scale.setScalar(.75),B.addCharacter(t,e)};return p((()=>{L.container=z.value;const t="电梯地板002";B=new Ot(L,{groundMeshName:["地面002","立方体306","平面118","立方体475","立方体514","立方体552","地面020","地面","平面391","立方体474","立方体1617","ground",t],onClickLeft:(t,e)=>{if(t&&t.data){const e=t.data;switch(null==e?void 0:e.type){case W:B.cameraTransition(t);break;case Y:B.waitLift(t,Lt);break;case Q:B.lightSwitch(t);break;case X:B.openGate(t);break;case tt:B.dubleHorizontalDoor(t,5.4);break;case et:B.dubleRotateDoor(t)}}},onClickGround:(e,i)=>{B.mouseClickGround(i,t).then((e=>{o.show=i.object.name===t})).catch((()=>{}))},onHoverAnchor:(t,e)=>{const i=!!t&&t.object._isAnchor_;if(n.show=i,i){n.style.top=e.top,n.style.left=e.left;const i=t.object.data;n.msg=`\n          <p>${i.name}</p>\n          <p>类型：${i.type}</p>\n          <p>绑定：${i.bind||"无"}</p>\n        `}}}),B.run(),H(B).resize(),ht(),r(B,e.skyCode)})),(t,i)=>{const s=O;return m(),g("div",{class:y(t.$style.page)},[f("div",Tt,[f("div",{class:"btn",onClick:i[0]||(i[0]=()=>{B.getAll().forEach(((t,i)=>{t.data&&(t.data.type!==e.dotKey||ot(t))}))})},"随机更新"),f("div",{class:"btn",onClick:i[1]||(i[1]=()=>{var t;return null==(t=_(B))?void 0:t.getPosition()})},"场景坐标"),f("div",{class:"btn",onClick:i[2]||(i[2]=()=>_(a)(_(B)))},"切换背景")]),f("div",{class:y(t.$style.container),ref_key:"containerRef",ref:z},null,2),b(T,{modelValue:_(c).show,"onUpdate:modelValue":i[3]||(i[3]=t=>_(c).show=t),progress:_(c).percentage},null,8,["modelValue","progress"]),f("div",{class:y(t.$style.camera)},[(m(!0),g(v,null,C(_(lt),(e=>(m(),g("div",{class:y(t.$style.item),onClick:t=>(t=>{B.cameraTransition({position:t.position,data:t})})(e)},k(e.name),11,Pt)))),256)),f("div",{class:y(t.$style.item),onClick:i[4]||(i[4]=()=>{var t;return null==(t=_(B))?void 0:t.toggleCruise()})},"定点巡航",2),f("div",{class:y(t.$style.item),onClick:i[5]||(i[5]=()=>{var t;return null==(t=_(B))?void 0:t.controlReset()})},"视角重置",2),f("div",{class:y(t.$style.item),onClick:i[6]||(i[6]=()=>_(B).toggleSight())},"人物视角",2),f("div",{class:y(t.$style.item),onClick:i[7]||(i[7]=()=>_(B).characterAccelerate())},"人物加速",2),f("div",{class:y(t.$style.item),onClick:i[8]||(i[8]=()=>_(B).characterAccelerate(-1))},"人物减速",2)],2),x(f("div",{class:y(t.$style["floor-select"])},[(m(!0),g(v,null,C(_(o).list,(t=>(m(),w(s,{type:"primary",disabled:_(o).active===t.key,onClick:e=>(t=>{o.active=t.key;const e=t.bind;B.waitLift({data:{bind:e,to:{y:t.y}}},Lt,!0)})(t)},{default:D((()=>[A(k(t.name),1)])),_:2},1032,["disabled","onClick"])))),256))],2),[[G,_(o).show]]),_(n).show?(m(),g("div",{key:0,class:y(t.$style.tip),style:j({left:_(n).style.left+"px",top:_(n).style.top+"px"})},[f("div",{class:y(t.$style.msg),innerHTML:_(n).msg},null,10,zt)],6)):S("",!0)],2)}}}),[["__cssModules",{$style:{page:"_page_1sasb_2",container:"_container_1sasb_10","floor-select":"_floor-select_1sasb_14",tip:"_tip_1sasb_20",msg:"_msg_1sasb_30",camera:"_camera_1sasb_38",item:"_item_1sasb_45"}}]]);export{Et as default};
