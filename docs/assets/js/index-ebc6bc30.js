var e=Object.defineProperty,s=(s,t,a)=>(((s,t,a)=>{t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a})(s,"symbol"!=typeof t?t+"":t,a),a);import{E as t,u as a}from"./scene-resize-953be54e.js";import{br as n,di as o,bt as i,bu as r,bv as d,bw as l,de as c,af as h,e as w,i as m,l as b,o as u,g as p,h as v}from"./vendor-ffd40cf4.js";import"./index-b563ced3.js";class y extends t{constructor(e){super(e),s(this,"clock"),s(this,"gui"),s(this,"transformControls"),this.clock=new n,this.addControls(),this.initModel(),this.gui=new o,this.addGui()}init(){this.initLight(),this.initGrid(),this.initAxes()}addControls(){const e=this.camera,s=new i(e,this.renderer.domElement);s.addEventListener("dragging-changed",(e=>{this.controls&&(this.controls.enabled=!e.value)})),this.transformControls=s,this.addObject(s.getHelper())}addGui(){var e;const s=this.gui,t=this.transformControls;if(!t)return;const a={w:()=>{t.setMode("translate")},e:()=>{t.setMode("rotate")},r:()=>{t.setMode("scale")},x:!1,y:!1,z:!1,add:()=>{t.setSize(t.size+.1)},sub:()=>{t.setSize(Math.max(t.size-.1,.1))},space:!1},n=s.addFolder("键盘快捷键");n.add(a,"w").name("“W”切换坐标辅助)"),n.add(a,"e").name("“E”切换旋转辅助)"),n.add(a,"r").name("“R”切换缩放辅助)"),n.add(t,"showX").name("“X”坐标系 x 轴隐显)"),n.add(t,"showY").name("“Y”坐标系 y 轴隐显)"),n.add(t,"showZ").name("“Z”坐标系 z 轴隐显)"),n.add(a,"add").name('“+”,"="坐标系放大)'),n.add(a,"sub").name('“-”,"_"坐标系缩小)'),n.add(t,"enabled").name("“空格”坐标系禁/启用)"),s.domElement.style="position: absolute; top: 0px; right: 0px",null==(e=this.container.parentNode)||e.appendChild(s.domElement)}initModel(){var e;const s=new r(300,300),t=new d({color:11721691}),a=new l(s,t);a.name="ground",a.rotation.x=1.5*Math.PI,a.receiveShadow=!0,this.addObject(a);const n=new c(50,50,50),o=new d({color:1276674}),i=new l(n,o);i.position.y=25,i.castShadow=!0,this.addObject(i),null==(e=this.transformControls)||e.attach(i);const w=e=>this.onKeydown(e),m=e=>this.onKeyup(e);window.addEventListener("keydown",w,!1),window.addEventListener("keyup",m,!1),h((()=>{window.removeEventListener("keydown",w),window.removeEventListener("keyup",m)}))}modelAnimate(){}onKeydown(e){console.log(e,this);const s=this.transformControls;if(s)switch(e.key){case"w":s.setMode("translate");break;case"e":s.setMode("rotate");break;case"r":s.setMode("scale");break;case"+":case"=":s.setSize(s.size+.1);break;case"-":case"_":s.setSize(Math.max(s.size-.1,.1));break;case"x":s.showX=!s.showX;break;case"y":s.showY=!s.showY;break;case"z":s.showZ=!s.showZ;break;case" ":s.enabled=!s.enabled;break;case"Escape":s.reset()}}onKeyup(e){console.log(e)}}const f={class:"three-page"},g=w({__name:"index",setup(e){const s=m(),t={axes:{visible:!0},render:{alpha:!0},grid:{visible:!0}};let n;return b((()=>{t.container=s.value,n=new y(t),n.run(),a(n).resize()})),(e,t)=>(u(),p("div",f,[v("div",{class:"h-100",ref_key:"containerRef",ref:s},null,512)]))}});export{g as default};
