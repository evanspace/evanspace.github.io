var e=Object.defineProperty,a=(a,t,s)=>(((a,t,s)=>{t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s})(a,"symbol"!=typeof t?t+"":t,s),s);import{dh as t,fd as s,fe as n,e0 as o,bz as i,bI as r,ei as c,eg as d,f2 as l,bv as m,bG as u,bC as h,f3 as p,c as f,h as g,k as w,o as x,f as b,g as v}from"./vendor-e4ee7844.js";import{S as M,u as y}from"./scene-resize-407aeb45.js";import"./index-1d839e62.js";const{color:j,positionView:z,float:N,positionWorld:D,uniform:A,triNoise3D:G,fog:L,normalWorld:P}=p,S=A(40);class k extends M{constructor(e){super(e),a(this,"gui");const c=j(15791605),d=j(14607334),l=z.z.negate().smoothstep(0,this.camera.far),m=l.mul(20).max(S),u=N(m).sub(D.y).div(m).pow(3).saturate().mul(.98),h=A(0).onFrameUpdate((e=>e.time)),p=G(D.mul(5e-4),1,h),f=G(D.mul(.001),1,h.mul(.5)),g=p.add(f).mul(d);this.scene.fogNode=L(l.oneMinus().mix(d,g),u),this.scene.backgroundNode=P.y.max(0).mix(d,c);const w=D.y.mul(5).floor().mod(50).sign().mix(j(102).add(l),j(16777215)),x=new t(1,1,1),b=new s({colorNode:w}),v=new n(x,b,1e3);this.addObject(v);const M=new o,y=new i;for(let a=0;a<v.count;a++){const e=7*Math.random()+5;M.position.x=2e3*Math.random()-1e3,M.position.z=2e3*Math.random()-1e3;const t=Math.max(.012*M.position.distanceTo(y),5);M.position.y=.5*e*t,M.scale.x=M.scale.z=30*Math.random()+10,M.scale.y=e*t,M.updateMatrix(),v.setMatrixAt(a,M.matrix)}this.gui=new r,this.addGui(),console.log(this)}createAmbientLight(e,a){return new c(e,a)}createDirectionalLight(e,a){return new d(e,a)}render(){this.renderer.renderAsync(this.scene,this.camera)}createRender(){return new l(this.options.render)}initModel(){const e=new m(200,200),a=new u({color:10066329}),t=new h(e,a);t.rotation.x=-Math.PI/2,t.scale.setScalar(20),t.castShadow=!0,t.receiveShadow=!0,this.addObject(t)}addGui(){var e;const a=this.gui;a.add(S,"value",20,300).name("雾化高度"),a.domElement.className+=" gui-wrap",null==(e=this.container.parentNode)||e.appendChild(a.domElement)}}const I={class:"three-page"},O=f({__name:"index",setup(e){const a=g(),t={axes:{visible:!0},camera:{far:2e3},directionalLight:{visible:!1},render:{logarithmicDepthBuffer:!1},ambientLight:{},controls:{maxPolarAngle:.48*Math.PI,minDistance:7,maxDistance:1e3}};let s;return w((()=>{t.container=a.value,s=new k(t).run(),y(s).resize()})),(e,t)=>(x(),b("div",I,[v("div",{class:"h-100",ref_key:"containerRef",ref:a},null,512)]))}});export{O as default};
