var e=Object.defineProperty,s=(s,n,t)=>(((s,n,t)=>{n in s?e(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t})(s,"symbol"!=typeof n?n+"":n,t),t);import{E as n,p as t,u as a}from"./scene-resize-6de17060.js";import{bI as i,bu as o,bK as r,dv as c,bG as l,by as d,c as h,dU as p,e as m,i as u,l as g,o as v,g as b,h as _,n as f}from"./vendor-46b9e856.js";import{u as w}from"./sky-8d6b28da.js";import{_ as k}from"./index-cc965771.js";const j="https://raw.githubusercontent.com/zlevan/3d-demo-data/main",{skys:y}=w(),D=new i,E=t,{backgroundLoad:S}=E.useBackground(j+"/sky/",y),{initCSS2DRender:M,createCSS2DDom:x}=E.useCSS2D(),R=()=>{const e=new r(50,160,160),s=new c({specular:3355443,shininess:5,map:D.load(`${j}/textures/planets/earth_atmos_2048.jpg`),specularMap:D.load(`${j}/textures/planets/earth_specular_2048.jpg`),normalMap:D.load(`${j}/textures/planets/earth_normal_2048.jpg`),normalScale:new l(.85,.85)}),n=new d(e,s);n.name="earth";const t=x({name:'\n      <div class="bg"></div>\n      <span class="inner">Earth</span>\n    ',className:"dot-2D-label",position:[0,50,0],onClick:e=>{console.log("click",e),h.success("click Earth ！")}});return n.add(t),n};class C extends n{constructor(e){super(e),s(this,"gui"),s(this,"css2DRender"),s(this,"moon"),this.createClock(),S(this,"201"),this.css2DRender=M(this.options,this.container),this.css2DRender.domElement.className="three-scene__dot-wrap";const n=R();this.addObject(n);const t=(()=>{const e=new r(40,160,160),s=new c({shininess:5,map:D.load(`${j}/textures/planets/moon_1024.jpg`)}),n=new d(e,s);n.position.set(0,100,0);const t=document.createElement("div");t.className="dot",t.innerHTML='\n    <div class="bg"></div>\n    <span class="inner">Moon</span>\n  ',t.style.pointerEvents="auto",t.addEventListener("click",(e=>{console.log("click",e),h.success("click Moon ！")}));const a=new p(t);return a.position.set(0,40,0),n.add(a),n})();this.moon=t,this.addObject(t),this.gui=new o,this.addGui()}addGui(){var e;const s=this.gui,n={display:()=>{this.scene.children.forEach((e=>{if(e.isMesh){const s=e.children.find((e=>e.isCSS2DObject));s.visible=!s.visible}}))},earth:()=>{const e=this.scene.children.find((e=>"earth"==e.name));if(e)e.clear(),this.scene.remove(e);else{const e=R();this.addObject(e)}}};s.add(n,"display").name("隐藏/展示"),s.add(n,"earth").name("删除/添加地球"),s.domElement.className+=" gui-wrap",null==(e=this.container.parentNode)||e.appendChild(s.domElement)}resize(){var e;super.resize();const{height:s,width:n}=this.options;null==(e=this.css2DRender)||e.setSize(s,n)}modelAnimate(){var e,s;null==(e=this.css2DRender)||e.render(this.scene,this.camera);const n=(null==(s=this.clock)?void 0:s.getElapsedTime())||0;this.moon.position.set(200*Math.sin(n),0,200*Math.cos(n))}dispose(){super.dispose(),this.css2DRender=void 0}}const z=k(m({__name:"index",setup(e){const s=u(),n={grid:{visible:!0}};let t;return g((()=>{n.container=s.value,t=new C(n),t.run(),a(t).resize()})),(e,n)=>(v(),b("div",{class:f(["three-page",e.$style.page])},[_("div",{class:"h-100",ref_key:"containerRef",ref:s},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_o4of8_2"}}]]);export{z as default};
