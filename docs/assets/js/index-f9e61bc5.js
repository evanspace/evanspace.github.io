var e=Object.defineProperty,a=(a,t,s)=>(((a,t,s)=>{t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s})(a,"symbol"!=typeof t?t+"":t,s),s);import{cS as t,eA as s,eB as n,dJ as o,bm as i,bb as r,ex as d,bd as c,d5 as l,bf as m,ey as u,e as h,i as p,l as f,o as x,g as b,h as w}from"./vendor-0ca24a43.js";import{m as g,u as v}from"./scene-resize-bbcf7df5.js";import"./index-ef9e62de.js";const{color:y,positionView:M,float:j,positionWorld:N,uniform:z,triNoise3D:A,fog:D,normalWorld:P}=u,S=z(40);class O extends g{constructor(e){super(e),a(this,"gui");const d=y(15791605),c=y(14607334),l=M.z.negate().smoothstep(0,this.camera.far),m=l.mul(20).max(S),u=j(m).sub(N.y).div(m).pow(3).saturate().mul(.98),h=z(0).onFrameUpdate((e=>e.time)),p=A(N.mul(5e-4),1,h),f=A(N.mul(.001),1,h.mul(.5)),x=p.add(f).mul(c);this.scene.fogNode=D(l.oneMinus().mix(c,x),u),this.scene.backgroundNode=P.y.max(0).mix(c,d);const b=N.y.mul(5).floor().mod(50).sign().mix(y(102).add(l),y(16777215)),w=new t(1,1,1),g=new s({colorNode:b}),v=new n(w,g,1e3);this.addObject(v);const O=new o,_=new i;for(let a=0;a<v.count;a++){const e=7*Math.random()+5;O.position.x=2e3*Math.random()-1e3,O.position.z=2e3*Math.random()-1e3;const t=Math.max(.012*O.position.distanceTo(_),5);O.position.y=.5*e*t,O.scale.x=O.scale.z=30*Math.random()+10,O.scale.y=e*t,O.updateMatrix(),v.setMatrixAt(a,O.matrix)}this.gui=new r,this.addGui()}render(){this.renderer.renderAsync(this.scene,this.camera)}createRender(){return new d(this.options.render)}initModel(){const e=new c(200,200),a=new l({color:10066329}),t=new m(e,a);t.rotation.x=-Math.PI/2,t.scale.setScalar(20),t.castShadow=!0,t.receiveShadow=!0,this.addObject(t)}addGui(){var e;const a=this.gui;a.add(S,"value",20,300).name("雾化高度"),a.domElement.className+=" gui-wrap",null==(e=this.container.parentNode)||e.appendChild(a.domElement)}}const _={class:"three-page"},k=h({__name:"index",setup(e){const a=p(),t={axes:{visible:!0},camera:{far:2e3},directionalLight:{visible:!1},render:{logarithmicDepthBuffer:!1},ambientLight:{},controls:{maxPolarAngle:.48*Math.PI,minDistance:7,maxDistance:1e3}};let s;return f((()=>{t.container=a.value,s=new O(t).run(),v(s).resize()})),(e,t)=>(x(),b("div",_,[w("div",{class:"h-100",ref_key:"containerRef",ref:a},null,512)]))}});export{k as default};
