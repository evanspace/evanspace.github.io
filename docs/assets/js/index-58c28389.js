var s=Object.defineProperty,e=(e,n,t)=>(((e,n,t)=>{n in e?s(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t})(e,"symbol"!=typeof n?n+"":n,t),t);import{Q as n,g as t,u as a}from"./scene-resize-e0b7392c.js";import{bq as i,bc as o,bs as r,da as c,bo as d,bg as l,c as h,dA as p,e as m,i as u,l as g,o as v,g as b,h as _,n as f}from"./vendor-35ba52b8.js";import{u as w}from"./sky-375cf53c.js";import{_ as j}from"./index-2ab86342.js";const{skys:k}=w(),y=new i,D=t,{backgroundLoad:E}=D.useBackground("/oss/sky/",k),{initCSS2DRender:S,createCSS2DDom:M}=D.useCSS2D(),x=()=>{const s=new r(50,160,160),e=new c({specular:3355443,shininess:5,map:y.load("/oss/textures/planets/earth_atmos_2048.jpg"),specularMap:y.load("/oss/textures/planets/earth_specular_2048.jpg"),normalMap:y.load("/oss/textures/planets/earth_normal_2048.jpg"),normalScale:new d(.85,.85)}),n=new l(s,e);n.name="earth";const t=M({name:'\n      <div class="bg"></div>\n      <span class="inner">Earth</span>\n    ',className:"dot-2D-label",position:[0,50,0],onClick:s=>{h.success("click Earth ！")}});return n.add(t),n};class R extends n{constructor(s){super(s),e(this,"gui"),e(this,"css2DRender"),e(this,"moon"),this.createClock(),E(this,"201"),this.css2DRender=S(this.options,this.container),this.css2DRender.domElement.className="three-scene__dot-wrap";const n=x();this.addObject(n);const t=(()=>{const s=new r(40,160,160),e=new c({shininess:5,map:y.load("/oss/textures/planets/moon_1024.jpg")}),n=new l(s,e);n.position.set(0,100,0);const t=document.createElement("div");t.className="dot",t.innerHTML='\n    <div class="bg"></div>\n    <span class="inner">Moon</span>\n  ',t.style.pointerEvents="auto",t.addEventListener("click",(s=>{h.success("click Moon ！")}));const a=new p(t);return a.position.set(0,40,0),n.add(a),n})();this.moon=t,this.addObject(t),this.gui=new o,this.addGui()}addGui(){var s;const e=this.gui,n={display:()=>{this.scene.children.forEach((s=>{if(s.isMesh){const e=s.children.find((s=>s.isCSS2DObject));e.visible=!e.visible}}))},earth:()=>{const s=this.scene.children.find((s=>"earth"==s.name));if(s)s.clear(),this.scene.remove(s);else{const s=x();this.addObject(s)}}};e.add(n,"display").name("隐藏/展示"),e.add(n,"earth").name("删除/添加地球"),e.domElement.className+=" gui-wrap",null==(s=this.container.parentNode)||s.appendChild(e.domElement)}resize(){var s;super.resize();const{height:e,width:n}=this.options;null==(s=this.css2DRender)||s.setSize(e,n)}modelAnimate(){var s,e;null==(s=this.css2DRender)||s.render(this.scene,this.camera);const n=(null==(e=this.clock)?void 0:e.getElapsedTime())||0;this.moon.position.set(200*Math.sin(n),0,200*Math.cos(n))}dispose(){super.dispose(),this.css2DRender=void 0}}const C=j(m({__name:"index",setup(s){const e=u(),n={grid:{visible:!0}};let t;return g((()=>{n.container=e.value,t=new R(n),t.run(),a(t).resize()})),(s,n)=>(v(),b("div",{class:f(["three-page",s.$style.page])},[_("div",{class:"h-100",ref_key:"containerRef",ref:e},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_o4of8_2"}}]]);export{C as default};
