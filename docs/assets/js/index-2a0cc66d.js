var e=Object.defineProperty,s=(s,t,a)=>(((s,t,a)=>{t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a})(s,"symbol"!=typeof t?t+"":t,a),a);import{S as t,i as a,u as o}from"./scene-resize-c6b34593.js";import{e2 as i,e3 as r,dS as n,e4 as d,df as h,e5 as l,e6 as m,e7 as c,dg as p,c as u,h as b,k as g,o as x,f,g as P,n as _}from"./vendor-5a37ffe2.js";import{_ as w}from"./index-0b477ca8.js";const y=a,v="https://ye6.atomgit.net/3d-demo-data",{loadModel:M}=y.useModelLoader({baseUrl:v,indexDB:{cache:!1,dbName:"THREE__BLOOM__DB",tbName:"TB",version:1}}),k={glb:`${v}/models/glb/PrimaryIonDrive.glb`,threshold:0,strength:1,radius:0,exposure:1};class j extends t{constructor(e){super(e),s(this,"bloomPass"),s(this,"composer"),s(this,"mixer"),s(this,"clock");const t=new i(this.scene,this.camera),{width:a,height:o}=this.options,c=new r(new n(a,o),1.5,.4,.85);c.threshold=k.threshold,c.strength=k.strength,c.radius=k.radius,this.bloomPass=c;const p=new d;this.clock=new h;const u=new l(this.renderer);u.addPass(t),u.addPass(c),u.addPass(p),this.composer=u,this.renderer.toneMapping=m,this.createGUI()}initModel(){M({url:k.glb,key:"",name:""}).then((e=>{e.scale.setScalar(50),this.addObject(e);const s=new c(e),t=e.animations[0];s.clipAction(t.optimize()).play(),this.mixer=s}))}createGUI(){var e;const s=new p,t=s.addFolder("泛光");t.add(k,"threshold",0,1).name("限制发光值").onChange((e=>{this.bloomPass&&(this.bloomPass.threshold=Number(e))})),t.add(k,"strength",0,3).name("强度").onChange((e=>{this.bloomPass&&(this.bloomPass.strength=Number(e))})),t.add(k,"radius",0,1).step(.01).name("半径").onChange((e=>{this.bloomPass&&(this.bloomPass.radius=Number(e))}));s.addFolder("渲染器").add(k,"exposure",.1,2).name("亮度").onChange((e=>{this.renderer.toneMappingExposure=Math.pow(e,4)})),s.domElement.style="position: absolute; top: 10px; right: 10px",null==(e=this.container)||e.appendChild(s.domElement)}animate(){if(this.composer&&this.composer.render(),this.mixer){const e=this.clock.getDelta();this.mixer.update(e)}}}const C=w(u({__name:"index",setup(e){const s=b(),t={camera:{position:[0,80,300]},grid:{visible:!1},axes:{visible:!1}};let a;return g((()=>{t.container=s.value,a=new j(t),a.run(),o(a).resize()})),(e,t)=>(x(),f("div",{class:_([e.$style.page,"h-100 o-h"])},[P("div",{ref_key:"containerRef",ref:s,class:"h-100"},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_12f6y_2"}}]]);export{C as default};
