var e=Object.defineProperty,a=(a,s,t)=>(((a,s,t)=>{s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t})(a,"symbol"!=typeof s?s+"":s,t),t);import{bx as s,bE as t,dp as n,ft as o,by as r,fy as c,dd as i,bC as d,ef as l,ed as u,f0 as p,f1 as m,c as h,h as g,k as w,o as y,f,g as b}from"./vendor-0648fc2e.js";import{i as _,S as v,u as j}from"./scene-resize-96291818.js";import{u as x}from"./sky-8d6b28da.js";import"./index-8d96952a.js";const{uniform:G,texture:P,parallaxUV:k,uv:S,blendOverlay:A}=m,I="https://ye6.atomgit.net/3d-demo-data",{skys:J}=x(),K=(new s).setPath(`${I}/textures/gpu/`),N=G(.3),{backgroundLoad:R}=_.useBackground(I+"/sky/",J);class C extends v{constructor(e){super(e),a(this,"gui"),R(this.scene,"501");const s=this.convertPmremTexture(this.scene.background);this.scene.environment=s,this.gui=new t,this.addGui()}async initModel(){const e=await K.loadAsync("Ice002_1K-JPG_Color.jpg");e.colorSpace=n;const a=await K.loadAsync("Ice002_1K-JPG_Roughness.jpg");a.colorSpace=o;const s=await K.loadAsync("Ice002_1K-JPG_NormalGL.jpg");s.colorSpace=o;const t=await K.loadAsync("Ice002_1K-JPG_Displacement.jpg");t.colorSpace=o;const l=await K.loadAsync("Ice003_1K-JPG_Color.jpg");l.colorSpace=n,l.wrapS=r,l.wrapT=r;const u=P(t).mul(N),p=k(S(),u),m=P(l,p),h=A(P(e),m),g=new c({colorNode:h.mul(5),normalMap:s,metalness:0});g.roughnessNode=P(a);const w=new i(10,10,10),y=new d(w,g);y.rotateX(-Math.PI/2),y.scale.setScalar(40),this.addObject(y)}render(){this.renderer.renderAsync(this.scene,this.camera)}createAmbientLight(e,a){return new l(e,a)}createDirectionalLight(e,a){return new u(e,a)}createRender(){return new p(this.options.render)}addGui(){var e;const a=this.gui;a.add(this.controls,"autoRotate").name("自动旋转"),a.add(N,"value",0,1).name("视差大小"),a.domElement.className+=" gui-wrap",null==(e=this.container.parentNode)||e.appendChild(a.domElement)}}const L={class:"three-page"},E=h({__name:"index",setup(e){const a=g(),s={grid:{},controls:{autoRotate:!0}};let t;return w((()=>{s.container=a.value,t=new C(s).run(),j(t).resize()})),(e,s)=>(y(),f("div",L,[b("div",{class:"h-100",ref_key:"containerRef",ref:a},null,512)]))}});export{E as default};
