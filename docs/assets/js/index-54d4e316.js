var e=Object.defineProperty,s=(s,n,t)=>(((s,n,t)=>{n in s?e(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t})(s,"symbol"!=typeof n?n+"":n,t),t);import{S as n,i as t,u as a}from"./scene-resize-96291818.js";import{bx as i,bE as o,bA as r,du as c,dU as d,bC as l,aL as h,dV as p,c as m,h as u,k as g,o as v,f as b,g as f,n as _}from"./vendor-0648fc2e.js";import{u as k}from"./sky-8d6b28da.js";import{_ as w}from"./index-8d96952a.js";const j="https://ye6.atomgit.net/3d-demo-data",{skys:y}=k(),D=new i,E=t,{backgroundLoad:S}=E.useBackground(j+"/sky/",y),{initCSS2DRender:x,createCSS2DDom:M}=E.useCSS2D(),C=()=>{const e=new r(50,160,160),s=new c({specular:3355443,shininess:5,map:D.load(`${j}/textures/planets/earth_atmos_2048.jpg`),specularMap:D.load(`${j}/textures/planets/earth_specular_2048.jpg`),normalMap:D.load(`${j}/textures/planets/earth_normal_2048.jpg`),normalScale:new d(.85,.85)}),n=new l(e,s);n.name="earth";const t=M({name:'\n      <div class="bg"></div>\n      <span class="inner">Earth</span>\n    ',className:"dot-2D-label",position:[0,50,0],onClick:e=>{console.log("click",e),h.success("click Earth ！")}});return n.add(t),n};class R extends n{constructor(e){super(e),s(this,"gui"),s(this,"css2DRender"),s(this,"moon"),this.createClock(),S(this,"201"),this.css2DRender=x(this.options,this.container),this.css2DRender.domElement.className="three-scene__dot-wrap";const n=C();this.addObject(n);const t=(()=>{const e=new r(40,160,160),s=new c({shininess:5,map:D.load(`${j}/textures/planets/moon_1024.jpg`)}),n=new l(e,s);n.position.set(0,100,0);const t=document.createElement("div");t.className="dot",t.innerHTML='\n    <div class="bg"></div>\n    <span class="inner">Moon</span>\n  ',t.style.pointerEvents="auto",t.addEventListener("click",(e=>{console.log("click",e),h.success("click Moon ！")}));const a=new p(t);return a.position.set(0,40,0),n.add(a),n})();this.moon=t,this.addObject(t),this.gui=new o,this.addGui()}addGui(){var e;const s=this.gui,n={display:()=>{this.scene.children.forEach((e=>{if(e.isMesh){const s=e.children.find((e=>e.isCSS2DObject));s.visible=!s.visible}}))},earth:()=>{const e=this.scene.children.find((e=>"earth"==e.name));if(e)e.clear(),this.scene.remove(e);else{const e=C();this.addObject(e)}}};s.add(n,"display").name("隐藏/展示"),s.add(n,"earth").name("删除/添加地球"),s.domElement.className+=" gui-wrap",null==(e=this.container.parentNode)||e.appendChild(s.domElement)}resize(){var e;super.resize();const{height:s,width:n}=this.options;null==(e=this.css2DRender)||e.setSize(s,n)}modelAnimate(){var e,s;null==(e=this.css2DRender)||e.render(this.scene,this.camera);const n=(null==(s=this.clock)?void 0:s.getElapsedTime())||0;this.moon.position.set(200*Math.sin(n),0,200*Math.cos(n))}dispose(){super.dispose(),this.css2DRender=void 0}}const $=w(m({__name:"index",setup(e){const s=u(),n={grid:{visible:!0}};let t;return g((()=>{n.container=s.value,t=new R(n),t.run(),a(t).resize()})),(e,n)=>(v(),b("div",{class:_(["three-page",e.$style.page])},[f("div",{class:"h-100",ref_key:"containerRef",ref:s},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_o4of8_2"}}]]);export{$ as default};
