import{d as e,bZ as t,b_ as o,I as r,o as s,z as i,g as n,j as a,k as m,u as c,R as p,b$ as d,a as l,M as u,N as h,c0 as j,c1 as y,c2 as f,c3 as g}from"./vendor-59c65e9f.js";import{u as k,g as v,h as b,i as w,s as E,j as P,r as $,k as x,l as I,m as R,n as z}from"./common-24a0b7a6.js";import{a as A}from"./device-5ba8f176.js";import{a as L}from"./pipe-74ca3955.js";import"./api-4fe51afc.js";import"./hash-0ad4cab1.js";import"./linear-border-02036c22.js";import"./loading-08e1cc15.js";import"./animation-44c6d291.js";import"./path-9d1a3677.js";import"./stroke-de8cc189.js";import"./character-rain-587040ec.js";import"./fireworks-ffeb797d.js";import"./canvas-40a658f7.js";import"./entry-direction-e2773158.js";import"./carousel-55796b62.js";import"./attribute-932e31c4.js";import"./border-4b6288a8.js";import"./clip-dc0cdeb2.js";import"./coffee-cup-a8f45a43.js";import"./multiple-paths-457b76f8.js";import"./polygon-f9ed855e.js";import"./corrugation-19503851.js";import"./flex-cb6ba34a.js";import"./grid-60c54772.js";import"./houdini-9a366c4d.js";import"./css-c8db7731.js";import"./preserve-3d-00f243bc.js";import"./pseudo-df2d2a7e.js";import"./text-56b93129.js";import"./olympic-rings-62b5e08e.js";import"./transform-3dd559a1.js";import"./cssd2-8d8e037d.js";import"./cssd3-ecc8ba41.js";import"./d3-c3505a59.js";import"./water-263c837a.js";import"./drag-6d215279.js";import"./editor-4b111c1b.js";import"./mouse-pointing-93b1e9a6.js";import"./event-33a46c7d.js";import"./img-89093cea.js";import"./map-097da9c0.js";import"./music-player-a629e226.js";import"./media-f8a32dde.js";import"./video-auto-play-01492a57.js";import"./ele-intersection-6b62f4d5.js";import"./monitor-a0073a56.js";import"./button-69593bda.js";import"./card-9c24f33a.js";import"./cursor-follow-ea771ec5.js";import"./debounce-0dcdc29e.js";import"./excess-8a5e53db.js";import"./skill-c6f37e4e.js";import"./svg-d565e4c5.js";import"./texture-167bd3c6.js";import"./directives-1cbe6763.js";import"./vue-91546867.js";import"./data-07702360.js";import"./G1-ea28b39c.js";import"./5-3-5-5-51f32552.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const M=e({__name:"App",setup(e){const h=k(),j={zhCN:{...t,...v},en:{...o,...b}},y=r((()=>h.language)),f=(e,t="href")=>{const o=e.dataset[t];return e.removeAttribute("data-"+t),""+o};(()=>{const e=document.querySelector('link[rel="icon"]');e.href=f(e);const t=document.querySelector('link[rel="manifest"]');t.href=f(t)})(),s((()=>{g(),window.addEventListener("resize",g,!1)})),i((()=>{window.removeEventListener("resize",g)}));const g=()=>{h.sidebar.opened&&document.body.clientWidth,E()},w=n({width:1920,size:14}),E=()=>{let e=(document.getElementById("app").clientWidth||w.width)*(w.size/w.width);document.documentElement.style.fontSize=e+"px"};return(e,t)=>{const o=p("router-view"),r=d;return l(),a(r,{locale:j[c(y)],namespace:"el"},{default:m((()=>[u(o)])),_:1},8,["locale"])}}}),_=[A,L];h.configure({showSpinner:!1});const{t:C}=w.global;E.interceptors.request.use((e=>{let t=P().token;return t&&(e.headers.Authorization=t),e}),(e=>Promise.reject(e))),E.interceptors.response.use((e=>{var t;return 20010090===(null==(t=e.data)?void 0:t.code)&&P().resetToken().then((()=>{window.location.reload()})),e}),(e=>Promise.reject(e))),$.beforeEach((async(e,t,o)=>{h.start();const r=document,s=e.meta.title;k().i18n?r.title=s?C(`route.${s}`).toUpperCase():"loading...":r.title=s;const i=P(),n=i.token,a=`${x}/login`;if(n)if(e.path==a)o({path:`${x}/`}),h.done();else{if(e.path==`${x}/index`)return o({path:`${x}/`}),void h.done();if(i.powers&&i.powers.length>0)o();else try{const{permissions:t}=await i.getUserInfo(),r=I();(await r.generateRoutes(t)).forEach((e=>{$.hasRoute(e.name)||$.addRoute(e)})),o({...e,replace:!0})}catch(m){await i.resetToken(),o(`${a}?redirect=${e.path}`),h.done()}}else e.path==a?o():(o(`${a}?redirect=${e.path}`),h.done())})),$.afterEach((()=>{h.done()}));const N=(e,t,o)=>{let r={};return"string"==typeof e||e instanceof Array?r=e:(null!=t&&(r.msg=t),null!=o&&(r.code=o),"object"==typeof e&&Object.keys(e).forEach((t=>{r[t]=e[t]}))),r},S=N,q=[{url:"/user/login",method:"post",response:()=>S({token_type:"bearer",access_token:j.mock("@guid")})},{url:"/user/logout",method:"get",response:()=>S({},"退出登录")},{url:"/user/changePwd",method:"post",response:()=>S({},"密码修改成功")},{url:"/user/getUserInfo",method:"get",response:()=>S({sysUser:{id:j.mock("@id"),name:j.mock("@cname"),account:j.mock("@first"),avatar:j.Random.image("50x50",j.mock("@hex"),"E")},permissions:["ALL_SN"]})}];j.Random.extend({phone:function(){return this.pick(["132","135","188","158","178"])+j.mock(/\d{8}/)},family:function(){return this.pick(["汉族","满族","彝族","藏族","傣族"])}});const T=N,U=[...q,...[{url:"/test/list",method:"get",response:()=>T(j.mock({"Total|20-100":100,"Data|10":[{Name:"@cname",Phone:"@phone",Email:"@email",Family:"@family",Id:"@id","Age|10-40":100,"Income|3000-40000":100,Birthday:"@datetime(yyyy-MM-dd)",Region:"@region",Province:"@province",City:"@city",County:"@county",Remark:"@csentence",hasChildren:"@boolean","childrens|2":[{Name:"@cname",Phone:"@phone",Email:"@email",Family:"@family",Id:"@id","Age|10-40":100,"Income|3000-40000":100,Birthday:"@datetime(yyyy-MM-dd)",Region:"@region",Province:"@province",City:"@city",County:"@county",Remark:"@csentence"}]}]}))},{url:"/test/add",method:"post",response:()=>T({},"添加成功")},{url:"/test/update",method:"put",response:()=>T({},"更新成功")},{url:"/test/get",method:"get",response:()=>T(j.mock({name:"@cname",phone:"@phone",email:"@email",family:"@family",id:"@id","age|10-40":100,"income|3000-40000":100,birthday:"@datetime(yyyy-MM-dd)",region:"@region",province:"@province",city:"@city",county:"@county",remark:"@csentence"}))},{url:"/test/del",method:"delete",response:()=>T({},"删除成功")},{url:"/test/items",method:"get",response:()=>T(j.mock({"Data|3-10":[{"label|1-5":"★","value|+1":1,"disabled|1-3":!0}]}))},{url:"/test/group",method:"get",response:()=>T(j.mock({"Data|1-3":[{"label|1":["Vue","Vite","Typescript","Pinia"],"value|+1":1,"disabled|1-3":!0,"children|3-8":[{"label|1-5":"★","value|+1":1,"disabled|1-3":!0}]}]}))}],...[...[{url:"/monitor/get_config",method:"get",response:e=>{const{id:t}=e.query||{};if("123456"==t)return N({id:1,name:"制冷站监测系统"})}}]]].map((e=>(e.url="/mock"+e.url,e)));const B=f(M);B.directive("focus",{mounted(e){e.focus()}}),B.use(g()).use($).use(w).use(R).use((function(e){_.forEach((t=>{e.component(t.name,t)}))})).use(z).mount("#app"),y([...U]);
