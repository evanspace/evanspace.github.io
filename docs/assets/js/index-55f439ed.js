var e=Object.defineProperty,t=(t,s,n)=>(((t,s,n)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n})(t,"symbol"!=typeof s?s+"":s,n),n);import{bf as s,bW as n,c0 as i,bh as o,be as a,ch as r,bo as h,bp as c,bc as l,c1 as m,c2 as d,e as p,i as b,l as u,o as y,g as w,h as f,n as g}from"./vendor-d68cddd1.js";import{S as v}from"./three-scene.module-e9bfe0cb.js";import{u as M}from"./scene-resize-a376ffd6.js";import{_ as A}from"./index-5878c146.js";import"./posZ-95d90af9.js";class x extends v{constructor(e){super(e),t(this,"mesh"),t(this,"raycaster"),t(this,"position"),t(this,"line"),this.mesh=(()=>{let e=new i;const t=new Float32Array(45e3),s=new Float32Array(45e3),n=new Float32Array(45e3),m=new o,d=500,p=250,b=new a,u=new a,y=new a,w=new a,f=new a;for(let i=0;i<t.length;i+=9){const e=Math.random()*d-p,o=Math.random()*d-p,a=Math.random()*d-p,r=e+80*Math.random()-40,h=o+80*Math.random()-40,c=a+80*Math.random()-40,l=e+Math.random()*d-p,g=o+Math.random()*d-p,v=a+Math.random()*d-p,M=e+Math.random()*d-p,A=o+Math.random()*d-p,x=a+Math.random()*d-p;t[i]=r,t[i+1]=h,t[i+2]=c,t[i+3]=l,t[i+4]=g,t[i+5]=v,t[i+6]=M,t[i+7]=A,t[i+8]=x,b.set(r,h,c),u.set(l,g,v),y.set(M,A,x),w.subVectors(y,u),f.subVectors(b,u),w.cross(f),w.normalize();const j=w.x,_=w.y,F=w.z;s[i]=j,s[i+1]=_,s[i+2]=F,s[i+3]=j,s[i+4]=_,s[i+5]=F,s[i+6]=j,s[i+6]=_,s[i+7]=F;const z=e/d+.5,E=o/d+.5,O=a/d+.5;m.setRGB(z,E,O),n[i]=m.r,n[i+1]=m.g,n[i+2]=m.b,n[i+3]=m.r,n[i+4]=m.g,n[i+5]=m.b,n[i+6]=m.r,n[i+7]=m.g,n[i+8]=m.b}e.setAttribute("position",new r(t,3)),e.setAttribute("normal",new r(s,3)),e.setAttribute("color",new r(n,3));const g=new h({color:11184810,specular:16777215,shininess:250,side:c,vertexColors:!0}),v=new l(e,g);return v.name="缓冲几何图形",v})(),this.raycaster=new s,this.position=new n,this.line=(()=>{const e=new i;e.setAttribute("position",new r(new Float32Array(12),3));const t=new m({color:16777215,transparent:!0});return new d(e,t)})(),this.bindEvent()}bindEvent(){this.addObject(this.mesh),this.addObject(this.line),this.renderer.domElement.addEventListener("positionmove",this.onPointerMove.bind(this))}onPointerMove(e){const t=this.container,s=t.getBoundingClientRect()||{left:0,top:0},n=this.options.scale;this.position.x=(e.clientX-s.left)/(t.clientWidth*n)*2-1,this.position.y=-(e.clientY-s.top)/(t.clientHeight*n)*2+1}modelAnimate(){const e=.001*Date.now();this.mesh.rotation.x=.15*e,this.mesh.rotation.y=.25*e,this.raycaster.setFromCamera(this.position,this.camera);const t=this.raycaster.intersectObject(this.mesh);if(t.length>0){const e=t[0].face,s=this.line.geometry.attributes.position,n=this.mesh.geometry.attributes.position;s.copyAt(0,n,e.a),s.copyAt(1,n,e.b),s.copyAt(2,n,e.c),s.copyAt(3,n,e.a),this.mesh.updateMatrix(),this.line.geometry.applyMatrix4(this.mesh.matrix),this.line.visible=!0}else this.line.visible=!1}}const j=A(p({__name:"index",setup(e){const t=b(),s={camera:{position:[0,1e3,2e3]},render:{alpha:!0},grid:{visible:!0},axes:{visible:!0}};let n;return u((()=>{s.container=t.value,n=new x(s),n.run(),M(n).resize()})),(e,s)=>(y(),w("div",{class:g([e.$style.page,"h-100 o-h"])},[f("div",{class:"h-100",ref_key:"containerRef",ref:t},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_12f6y_2"}}]]);export{j as default};
