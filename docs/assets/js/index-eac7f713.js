var e=Object.defineProperty,t=(t,s,n)=>(((t,s,n)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n})(t,"symbol"!=typeof s?s+"":s,n),n);import{b7 as s,c9 as n,bN as i,bi as a,bj as r,bk as o,bl as h,bM as c,b9 as l,be as m,ca as d,cb as b,e as p,i as u,l as y,o as w,g as M,h as g,n as v,_ as f}from"./vendor-509147fa.js";import{u as A}from"./scene-resize-2cf1f3dc.js";import"./index-e7e71650.js";class x extends s{constructor(e){super(e),t(this,"mesh"),t(this,"raycaster"),t(this,"pointer"),t(this,"line"),this.mesh=(()=>{let e=new a;const t=new Float32Array(45e3),s=new Float32Array(45e3),n=new Float32Array(45e3),i=new r,d=500,b=250,p=new o,u=new o,y=new o,w=new o,M=new o;for(let a=0;a<t.length;a+=9){const e=Math.random()*d-b,r=Math.random()*d-b,o=Math.random()*d-b,h=e+80*Math.random()-40,c=r+80*Math.random()-40,l=o+80*Math.random()-40,m=e+Math.random()*d-b,g=r+Math.random()*d-b,v=o+Math.random()*d-b,f=e+Math.random()*d-b,A=r+Math.random()*d-b,x=o+Math.random()*d-b;t[a]=h,t[a+1]=c,t[a+2]=l,t[a+3]=m,t[a+4]=g,t[a+5]=v,t[a+6]=f,t[a+7]=A,t[a+8]=x,p.set(h,c,l),u.set(m,g,v),y.set(f,A,x),w.subVectors(y,u),M.subVectors(p,u),w.cross(M),w.normalize();const _=w.x,j=w.y,F=w.z;s[a]=_,s[a+1]=j,s[a+2]=F,s[a+3]=_,s[a+4]=j,s[a+5]=F,s[a+6]=_,s[a+6]=j,s[a+7]=F;const z=e/d+.5,E=r/d+.5,O=o/d+.5;i.setRGB(z,E,O),n[a]=i.r,n[a+1]=i.g,n[a+2]=i.b,n[a+3]=i.r,n[a+4]=i.g,n[a+5]=i.b,n[a+6]=i.r,n[a+7]=i.g,n[a+8]=i.b}e.setAttribute("position",new h(t,3)),e.setAttribute("normal",new h(s,3)),e.setAttribute("color",new h(n,3));const g=new c({color:11184810,specular:16777215,shininess:250,side:l,vertexColors:!0}),v=new m(e,g);return v.name="缓冲几何图形",v})(),this.raycaster=new n,this.pointer=new i,this.line=(()=>{const e=new a;e.setAttribute("position",new h(new Float32Array(12),3));const t=new d({color:16777215,transparent:!0});return new b(e,t)})(),this.bindEvent()}bindEvent(){this.addObject(this.mesh),this.addObject(this.line),this.renderer.domElement.addEventListener("pointermove",this.onPointerMove.bind(this))}onPointerMove(e){const t=this.container,s=t.getBoundingClientRect()||{left:0,top:0},n=this.options.scale;this.pointer.x=(e.clientX-s.left)/(t.clientWidth*n)*2-1,this.pointer.y=-(e.clientY-s.top)/(t.clientHeight*n)*2+1}modelAnimate(){const e=.001*Date.now();this.mesh.rotation.x=.15*e,this.mesh.rotation.y=.25*e,this.raycaster.setFromCamera(this.pointer,this.camera);const t=this.raycaster.intersectObject(this.mesh);if(t.length>0){const e=t[0].face,s=this.line.geometry.attributes.position,n=this.mesh.geometry.attributes.position;s.copyAt(0,n,e.a),s.copyAt(1,n,e.b),s.copyAt(2,n,e.c),s.copyAt(3,n,e.a),this.mesh.updateMatrix(),this.line.geometry.applyMatrix4(this.mesh.matrix),this.line.visible=!0}else this.line.visible=!1}}const _=f(p({__name:"index",setup(e){const t=u(),s={camera:{position:[0,1e3,2e3]},grid:{visible:!0},axes:{visible:!0}};let n;return y((()=>{s.container=t.value,n=new x(s),n.run(),A(n).resize()})),(e,s)=>(w(),M("div",{class:v([e.$style.page,"h-100 o-h"])},[g("div",{class:"h-100",ref_key:"containerRef",ref:t},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_12f6y_2"}}]]);export{_ as default};
