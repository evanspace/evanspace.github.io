var e=Object.defineProperty,t=(t,a,s)=>(((t,a,s)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s})(t,"symbol"!=typeof a?a+"":a,s),s);import{bI as a,bJ as s,dq as o,f7 as n,bA as i,dk as r,ec as d,ea as c,eZ as l,ds as h,dv as p,by as u,bK as w,dT as m,bw as b,f8 as g,f9 as M,fa as y,f5 as v,fb as f,eR as P,fc as I,e as j,i as x,l as G,o as L,g as N,h as O}from"./vendor-46b9e856.js";import{E as A,u as z}from"./scene-resize-af96d43c.js";import"./index-efec42cd.js";const _=(new a).setPath("https://raw.githubusercontent.com/zlevan/3d-demo-data/main"),C=_.load("/textures/gpu/FloorsCheckerboard_S_Normal.jpg");C.wrapS=s,C.wrapT=s;const E=_.load("/textures/gpu/decal-diffuse.png");E.colorSpace=o;const S=_.load("/textures/gpu/decal-normal.jpg"),X=n(-.08),Y=n(.1);class k extends A{constructor(e){super(e),t(this,"sphereGroup",new i),t(this,"wallGroup",new i),t(this,"gui"),this.addModel(),this.gui=new r,this.addGui(),console.log(this)}createAmbientLight(e,t){return new d(e,t)}createDirectionalLight(e,t){return new c(e,t)}render(){this.renderer.renderAsync(this.scene,this.camera)}createRender(){return new l(this.options.render)}run(){return this.renderer.setAnimationLoop((()=>{this.animate(),this.modelAnimate()})),this}modelAnimate(){const e=.01*Date.now();this.sphereGroup.children.forEach(((t,a)=>{0==a?t.rotation.y-=.002:(t.position.set(30*Math.cos(.1*e),20*Math.abs(Math.cos(.2*e))+5,30*Math.sin(.1*e)),t.rotateY(.01),t.rotateZ(.04))}))}addModel(){this.addMoveObject(),this.addWall(),this.addLight()}addMoveObject(){const e=this.sphereGroup;this.addObject(e);let t=new h(.1,15*Math.cos(Math.PI/180*30),.1,24,1),a=new p({color:16777215,emissive:9276813});const s=new u(t,a);s.position.y=-15*Math.sin(Math.PI/180*30)-.05,s.rotateX(-Math.PI),t=new w(15,24,24,Math.PI/2,2*Math.PI,0,Math.PI/180*120);const o=new u(t,a);o.add(s),o.rotateX(-Math.PI/180*135),o.rotateZ(-Math.PI/180*20),o.position.y=7.5+15*Math.sin(Math.PI/180*30),e.add(o),t=new m(5,0),a=new p({color:16777215,emissive:8092539,flatShading:!0});const n=new u(t,a);e.add(n)}addWall(){this.wallGroup&&this.disposeObj(this.wallGroup);const e=new i;this.wallGroup=e,this.addObject(e);const t=new b(100.1,100.1),a=g(),s=M(S).xy.mul(2).sub(1).mul(X),o=M(E).a.mix(y(16777215),a);a.uvNode=a.uvNode.add(s);const n=new u(t,new v({colorNode:o}));n.rotateX(-Math.PI/2),n.add(a.target),e.add(n);let r=g();const d=M(C,f().mul(5)).xy.mul(2).sub(1).mul(Y),c=y(255).mul(.1).add(r);r.uvNode=r.uvNode.add(d);const l=new u(t,new v({colorNode:c}));l.position.z=-50,l.position.y=50,l.add(r.target),e.add(l);const h=new u(t,new p({color:16777215}));h.position.y=100,h.rotateX(Math.PI/2),e.add(h);const w=new u(t,new p({color:8355839}));w.position.z=50,w.position.y=50,w.rotateY(Math.PI),e.add(w);const m=new u(t,new p({color:65280}));m.position.x=50,m.position.y=50,m.rotateY(-Math.PI/2),e.add(m);const P=new u(t,new p({color:16711680}));P.position.x=-50,P.position.y=50,P.rotateY(Math.PI/2),e.add(P)}addLight(){const e=new P(15198183,2.5,250,0);e.position.y=60;const t=new I(e);this.addObject(e,t)}addGui(){var e;const t=this.gui;t.add(X,"value",-1,0).step(.001).name("地面法线比例"),t.add(Y,"value",0,1).step(.001).name("背面法线比例");const a=this.scene.getObjectByProperty("type","PointLight");a&&t.addColor(a,"color").name("灯光颜色").onChange((()=>{this.scene.getObjectByProperty("type","PointLightHelper").update()})),t.domElement.className+=" gui-wrap",null==(e=this.container.parentNode)||e.appendChild(t.domElement)}}const D={class:"three-page"},R=j({__name:"index",setup(e){const t=x(),a={grid:{visible:!0},camera:{position:[0,75,160]},ambientLight:{visible:!1},directionalLight:{visible:!1}};let s;return G((()=>{a.container=t.value,s=new k(a).run(),z(s).resize()})),(e,a)=>(L(),N("div",D,[O("div",{class:"h-100",ref_key:"containerRef",ref:t},null,512)]))}});export{R as default};
