var e=Object.defineProperty,t=(t,s,a)=>(((t,s,a)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a})(t,"symbol"!=typeof s?s+"":s,a),a);import{v as s,a}from"./scene-resize-819fd455.js";import{bq as n,bi as o,eC as r,ez as i,eA as c,eB as l,be as d,eE as u,bk as p,eD as m,bg as f,dD as y,e as h,i as w,l as b,o as g,g as v,h as x}from"./vendor-5808cc93.js";import"./index-1dbebe74.js";const T=new n,{pass:j,mrt:M,output:N,emissive:D,float:I}=m;class O extends s{constructor(e){super(e),t(this,"group",new o),t(this,"createPostProcessing",((e,t,s,a)=>{const n=j(e,t);a?n.setMRT(M({output:N,emissive:D})):n.setMRT(M({output:N,bloomIntensity:I(.01)}));const o=n.getTextureNode();let r;if(a){const e=n.getTextureNode("emissive");r=i(e,2.5,.5)}else{const e=n.getTextureNode("bloomIntensity");r=i(o.mul(e))}s.toneMapping=c;const d=new l(s);return a?d.outputNode=o.add(r):(d.outputColorTransform=!1,d.outputNode=o.add(r).renderOutput()),d})),this.addObject(this.group),this.addModel()}render(){this.renderer.renderAsync(this.scene,this.camera)}createRender(){return new r(this.options.render)}addModel(){const e=this.createDiffusion(2);e.rotation.x=.5*-Math.PI,e.position.y=.5,this.addObject(e)}createDiffusion(e=1,t){const s=new d(e,e),a=new u({color:t,opacity:.8,map:T.load("/oss/textures/diffusion/12.png"),transparent:!0,depthTest:!0,side:p});a.mrtNode=m.mrt({bloomIntensity:m.uniform(1)});const n=new f(s,a),o=.5;return n.scale.setScalar(o),n.tween1=new y({scale:o,opacity:0}).to({scale:.75,opacity:1},1e3).delay(0).onUpdate((e=>{let{scale:t,opacity:s}=e;n.scale.setScalar(t),n.material.opacity=s})),n.tween2=new y({scale:.75,opacity:1}).to({scale:1,opacity:0},1e3).onUpdate((e=>{let{scale:t,opacity:s}=e;n.scale.setScalar(t),n.material.opacity=s})),n.tween1.chain(n.tween2),n.tween2.chain(n.tween1),n}modelAnimate(){}}const P={class:"three-page"},R=h({__name:"index",setup(e){const t=w(),s={container:t.value,render:{antialias:!0},grid:{visible:!0},camera:{position:[0,0,8]}};let n=null;return b((()=>{s.container=t.value,n=new O(s).run(),a(n).resize()})),(e,s)=>(g(),v("div",P,[x("div",{class:"h-100",ref_key:"containerRef",ref:t},null,512)]))}});export{R as default};
