import{bv as e,bw as t,be as A,bx as n,by as s,bz as o,bA as i,bo as a,bc as r,bs as l,bB as c,bC as d,bD as p,bd as g,bE as u,bh as m,bF as h,bG as f,bH as v,b6 as y,ba as w,bk as b,bp as x,bI as B,bJ as E,bK as j,bL as _,bM as C,bN as M,bO as k,bP as Q,bQ as S,bR as z,i as L,bS as I,bf as O,bT as P,bU as U,bV as D,bW as T,Y as Z,bX as R,bY as Y,bZ as G,bb as X,b_ as N,b$ as F,c0 as J,c1 as W,c2 as H,c3 as V,c4 as K,c5 as q,c6 as $,c7 as ee,c8 as te,c9 as Ae,ca as ne,cb as se,cc as oe,cd as ie,ce as ae,cf as re,cg as le,b5 as ce,ch as de,ci as pe,cj as ge,ck as ue,cl as me,cm as he,cn as fe,co as ve,cp as ye,cq as we,cr as be,cs as xe,ct as Be,cu as Ee,cv as je,b7 as _e,cw as Ce,cx as Me,cy as ke,cz as Qe,cA as Se,cB as ze,cC as Le,cD as Ie,cE as Oe,w as Pe,af as Ue}from"./vendor-9803c2f7.js";import{c as De}from"./index-f912fb9a.js";function Te(e,t,A,n){return new(A||(A=Promise))((function(s,o){function i(e){try{r(n.next(e))}catch(t){o(t)}}function a(e){try{r(n.throw(e))}catch(t){o(t)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof A?t:new A((function(e){e(t)}))).then(i,a)}r((n=n.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const Ze=e=>new URL(Object.assign({"../src/assets/imgs/texttures/arrow.png":"/imgs/arrow-388f6ce2.png","../src/assets/imgs/texttures/fenceMap0.png":"/imgs/fenceMap0-f5b83c5b.png","../src/assets/imgs/texttures/fenceMap1.png":"/imgs/fenceMap1-edfa8012.png","../src/assets/imgs/texttures/fenceMap2.png":"/imgs/fenceMap2-8f612558.png","../src/assets/imgs/texttures/lensflare0.png":"/imgs/lensflare0-cc6aae5d.png","../src/assets/imgs/texttures/lensflare0_alpha.png":"/imgs/lensflare0_alpha-6d875cbf.png","../src/assets/imgs/texttures/lensflare1.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAIAAAB7GkOtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGQkMyNkM0QkNCNUFFMDExQjZBNjgzNDc0RDE0NzY2QyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxOTUwNTY2MDUzMUMxMUUwOTA3Qzg4QzFDQkY2MUZCQiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxOTUwNTY1RjUzMUMxMUUwOTA3Qzg4QzFDQkY2MUZCQiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxODAxMTc0MDcyMDY4MTE5NDU3OUVEN0U5QjAxNEY5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZCQzI2QzRCQ0I1QUUwMTFCNkE2ODM0NzREMTQ3NjZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+J87OtwAABgBJREFUeNrs2jEOgzAQRUHspUCyRMn9L0lpHANSbhCl2Jkm/S/8YotyHMd5ngsAmbTWlm3bDAGQzTz8a0QYAiCbefhXKwDkJAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAAAmACAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAA/ma9I1DrGMMWAHmUUtb3ZzIHQB7zr/97AxAAgFwingA8zz+egAASGWO8AZinvxsAQKoA+AoIIKvvDQCAVDeA5wnoui5bAKTSe/cEBJCUAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAIgAkABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABABAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABABAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAOBnAei9WwEgm3n4r/u+R4QtAFJprX0EGAAFhyfXeeWZyAAAAABJRU5ErkJggg==","../src/assets/imgs/texttures/lensflare2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAIAAAB7GkOtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUY2OTVBMjM1MzFFMTFFMDkwN0M4OEMxQ0JGNjFGQkIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUY2OTVBMjQ1MzFFMTFFMDkwN0M4OEMxQ0JGNjFGQkIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRjY5NUEyMTUzMUUxMUUwOTA3Qzg4QzFDQkY2MUZCQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRjY5NUEyMjUzMUUxMUUwOTA3Qzg4QzFDQkY2MUZCQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PslCyYYAAASvSURBVHja7NkNb5swEABQQPv//3jcvBiM8UempdnUqu9VIgc4TuqQO+wsCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB+1GgIGl8W6DndTEBHbtqVt36zYtt/HU5vc/uW38dpT1398UX/gH3rxveVxzuOZg+F7KB9KDurtWz4OFAC+UfbPQbfbnkr1IMeVpWxG2hP9q8zrUHQXbZxXcjkV9ys8Rtd5/P03IkbNYvIqcS8Vx9mSlOtcnIJ931NwbqPE5dR1Ng51mxyXznPHdf91oAZQ/DAEPMn+w1xcUvas8SMjXvl9O1xxDnIlqHevdrcycb1iuQv+EuqMfKTp2HNOf2yjistjnLtrbnP2UGrGVTzqm/37LOEoS02zehrnUkcB4H+sIJUkmFPPmbP2XERKasszicmSS8x6/uSpv54HNGk3WnuuE9UQ9XOQaF5CTkcB4POlv/XxN5lJPLbXBCLXgHS3mw5E/OxXh9avvFYZS4zS/bWQf/6bqf7tdUXsRzWNQywSPe+7VzMEzG7h5z8G3I7UK0LNmn7dQV0Pmg4ZzRvyxOd8XNZqQakNuuNtb8MAfAOZFoDlzz/Jzp5eJ7X2YJ1/JKPROD8bvX4M+xLyJDbgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABv8EuAAQDmbqQRXFC3OAAAAABJRU5ErkJggg==","../src/assets/imgs/texttures/lensflare3.png":"/imgs/lensflare3-b777765d.png"})[`../src/assets/imgs/texttures/${e}`],self.location).href,Re=e=>(!e&&(e=""),!!/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,}(\/\S*)?$/.test(e)||/^(https?:\/\/)(?:\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::\d{1,5})?(?:[/?#]\S*)?$/.test(e)),Ye=(e,t="")=>Array.isArray(e)?e.map((e=>Ye(e,t))):!Re(e)&&e.indexOf(t)<0?t+e:e,Ge=e=>new Promise((t=>{const A=window.indexedDB.deleteDatabase(e);A.onsuccess=e=>{t(!0)},A.onerror=e=>{t(!1)}})),Xe=(e,t,A)=>new Promise((n=>{window.indexedDB.open(e).onsuccess=s=>{const o=s.target.result,i=o.version;o.close(),i!==t?Ge(e).then((e=>{n(e?t:i)})):o.objectStoreNames.contains(A)?n(i):Ge(e).then((e=>{n(e?t:i)}))}})),Ne=(e,...t)=>Te(void 0,[e,...t],void 0,(function*(e,t="THREE__MODEL_DB",A=1){if(!window.indexedDB)return Promise.resolve(void 0);yield Xe(t,A,e);let n=window.indexedDB.open(t,A);return new Promise((t=>{n.onupgradeneeded=t=>{const A=t.target.result;A.objectStoreNames.contains(e)||A.createObjectStore(e,{keyPath:"path"})},n.onsuccess=e=>{const A=e.target.result;t(A)},n.onerror=e=>{t(void 0)}}))})),Fe=(e,t,A)=>{if(!e||!t||!A)return Promise.resolve(null);const n=e.transaction([t],"readonly").objectStore(t).get(A);return new Promise(((e,t)=>{n.onsuccess=t=>{const A=t.target.result;e(A)},n.onerror=e=>{t(e)}}))},Je={TEXT:"TEXT",JSQ:"JSQ",LDB:"LDB",LQB:"LQB",XBC:"XBC",LXJ:"LXJ",LGJ:"LGJ",LGJ_2:"LGJ_2",LGJ_3:"LGJ_3",LGJ_4:"LGJ_4",LQT:"LQT",GL:"GL",BSHRQ:"BSHRQ",BSHLQ:"BSHLQ",FLRB:"FLRB",FJY_X:"FJY_X",FJZ_X:"FJZ_X",FJY:"FJY",FJZ:"FJZ",FM:"FM",XFM:"XFM"};var We={indexdb:{dbName:"THREE__MODEL__DB",tbName:"TB",version:1},mesh:{receiveShadowName:["楼板","地面","底座","底板","基础","基础底座","冷却塔基础","草地","ground","Ground"],animatehName:["动画","螺杆A","螺杆B","螺杆A001","螺杆B001","螺杆A002","螺杆B002","叶轮A","叶轮B","叶轮C","阀门"],transparentName:["透明","透明外壳"]},keys:Je,rightClickBackDiffTime:300,meshKey:{body:"__BODY_",color:"__COLOR_",warning:"__WARNING_",local:"__LOCAL_",disabled:"__DISABLED_",pipe:"__PIPE__"},statusOffset:{TEXT:{[Je.JSQ]:{position:{x:-20,y:10,z:0},rotation:{x:0,y:270,z:0}},[Je.LDB]:{position:{x:-60,y:0,z:0}},[Je.LQB]:{position:{x:0,y:0,z:60},rotation:{x:0,y:270,z:0}},[Je.LXJ]:{position:{x:0,y:16,z:50},rotation:{x:-20,y:0,z:0}},[Je.LGJ]:{position:{x:0,y:16,z:50},rotation:{x:-20,y:0,z:0}},[Je.LQT]:{position:{x:-60,y:0,z:0}},[Je.BSHLQ]:{position:{x:0,y:16,z:40}}},WARNING:{[Je.JSQ]:{position:{x:0,y:62,z:0}},[Je.LDB]:{position:{x:-4,y:45,z:0}},[Je.LQB]:{position:{x:0,y:45,z:4},rotation:{x:0,y:270,z:0}},[Je.LXJ]:{position:{x:0,y:78,z:0}},[Je.LGJ]:{position:{x:0,y:78,z:0}},[Je.LQT]:{position:{x:0,y:85,z:0}},[Je.BSHLQ]:{position:{x:0,y:88,z:0}}},STATUS:{[Je.LDB]:{position:{x:9,y:47,z:0}},[Je.LQB]:{position:{x:0,y:47,z:-9},rotation:{x:0,y:270,z:0}},[Je.LXJ]:{position:{x:27,y:67,z:42}},[Je.LGJ]:{position:{x:-47,y:67,z:42}},[Je.LQT]:{position:{x:-35,y:69,z:26}}},DISABLED:{[Je.LDB]:{position:{x:22,y:47,z:0}},[Je.LQB]:{position:{x:0,y:47,z:-22},rotation:{x:0,y:270,z:0}},[Je.LXJ]:{position:{x:40,y:67,z:42}},[Je.LGJ]:{position:{x:-34,y:67,z:42}},[Je.LQT]:{position:{x:-22,y:69,z:26}}}}};const He=e=>{e.material instanceof Array?e.material=e.material.map((e=>e.clone())):e.material=e.material.clone()},Ve=e=>{let t=e.clone();return(e.isMesh||e.isSprite)&&He(e),t.traverse((e=>{e.isMesh&&He(e)})),t},Ke=(e,t=6776165,A,n)=>{const{type:s,name:o}=e;s.indexOf("Light"),We.mesh.receiveShadowName.some((e=>o.indexOf(e)>-1))?e.traverse((e=>{e.isMesh&&(e.receiveShadow=!0)})):A.some((e=>o.indexOf(e)>-1))?$e(e,t):e.isMesh&&(n&&(e.material.envMap=n),e.castShadow=!0,e.receiveShadow=!0)},qe=e=>{let t=[];return Array.isArray(e)?t=e:null!=e&&(t=[e]),t},$e=(e,t)=>{e.traverse((e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,Array.isArray(e.material)?e.material.forEach((e=>{e.color.set(t)})):e.material.color.set(t))}))},et=We.statusOffset,tt=(e,t,A={})=>{const n=t.type,s=et[e]||{},o=A[n]||s[n]||{};let i=it({x:0,y:0,z:0},o.position||{}),a=it({x:0,y:0,z:0},o.rotation||{});return a.x=Math.PI/180*a.x,a.y=Math.PI/180*a.y,a.z=Math.PI/180*a.z,{position:i,rotation:a}},At=(e,t)=>Object.prototype.toString.call(t)===`[object ${e}]`,nt=e=>At("Object",e),st=e=>e&&("object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName),ot=(e,t=new Map)=>{if(null!=e&&nt(e)){let A=t.get(e);if(A)return A;const n=Array.isArray(e);let s=n?[]:{};return A=t.set(e,s),n?e.forEach(((e,t)=>{s[t]=ot(e,A)})):Object.keys(e).forEach((t=>{nt(s[t])?s[t]=ot(e[t],A):s[t]=e[t]})),s}return e},it=(e,t)=>{e=ot(e);for(let A in t)A in e&&nt(t[A])&&nt(e[A])?e[A]=it(e[A],t[A]):e[A]=t[A];return e},at=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;var rt=Object.freeze({__proto__:null,getTextturesUrl:Ze,numConverter:(e=0,t=2)=>Math.abs(e)>=1e8?1*(e/1e8).toFixed(t)+"亿":Math.abs(e)>=1e4?1*(e/1e4).toFixed(t)+"万":1*e.toFixed(t),getUrl:Ye,deleteDB:Ge,getDBVersion:Xe,createDB:Ne,getDataByKey:Fe,getAllData:(e,t)=>{const A=e.transaction(t,"readonly").objectStore(t).getAll();return new Promise(((e,t)=>{A.onsuccess=t=>{const A=t.target.result;e(A)},A.onerror=e=>{t(e)}}))},get_P_S_R_param:(e,t,A=1)=>{const n=e.position,s=e.rotation,o=e.scale,i=t.position||{x:0,y:0,z:0},a=t.rotation||{x:0,y:0,z:0},r=t.scale||{x:1,y:1,z:1},l=Math.abs(a.x)<2?1:180,c=Math.abs(a.y)<2?1:180,d=Math.abs(a.z)<2?1:180;return{position:[n.x+i.x,n.y+i.y,n.z+i.z],rotation:[s.x+Math.PI/l*a.x,s.y+Math.PI/c*a.y,s.z+Math.PI/d*a.z],scale:[o.x*A*r.x,o.y*A*r.y,o.z*A*r.z]}},modelDeepClone:Ve,replaceMaterial:Ke,getColorArr:qe,setMaterialColor:$e,cameraInSceneAnimate:(n,s,o=new A)=>(n.lookAt(o),n._lookAt_=o,new Promise((A=>{new e(n.position).to(s,1e3).easing(t.Quadratic.In).start().onUpdate((()=>{n.lookAt(o),n._lookAt_=o})).onComplete((()=>{A(n)}))}))),cameraLookatAnimate:(A,n,s)=>new Promise((o=>{new e(s).to(n,1e3).easing(t.Quadratic.In).start().onUpdate((e=>{A.lookAt(e),A._lookAt_=e})).onComplete((()=>{o(A)}))})),cameraLinkageControlsAnimate:(A,n,s,o)=>new Promise((i=>{new e(n.position).to(s,1e3).easing(t.Quadratic.In).start().onUpdate((()=>{const e=A.target;n.lookAt(e),n._lookAt_=e})),new e(A.target).to(o,1e3).easing(t.Quadratic.In).start().onComplete((()=>{i(n)}))})),createSpriteAnimate:(e,t,A=1,i=10)=>{let a=[0,i/2,i],r=[...t,t[0],t[1]+A,t[2],...t],l=new n("sprite.position",a,r),c=new s("sprite_up_down",i,[l]);const d=new o(e),p=d.clipAction(c);return p.timeScale=5,p.play(),e.__action__=p,e.__mixer__=d,e},getPlanePosition:(e,t,A)=>{let n=e.clientWidth/2,s=e.clientHeight/2,o=t.position.clone();const i=t.scale;o.y+=i.x/2;let a=o.project(A);return{left:a.x*n+n,top:-a.y*s+s}},findObjectsByHasProperty:(e,t,A="name")=>{let n=[];return e&&e.length?(function e(s){s.forEach((s=>{const o=s[A];"string"==typeof o&&t.some((e=>o.indexOf(e)>-1))&&n.push(s),s.children&&e(s.children)}))}(e),n):[]},getStatusOffset:tt,createText:(e,t,A=16777215,n)=>{const s=tt("TEXT",e,n);let o=e.font||{},l=new i(e.name||"",{font:t,size:o.size||10,depth:0,curveSegments:12,bevelThickness:1,bevelSize:.1,bevelEnabled:!0});const c=s.rotation;l.rotateX(c.x),l.rotateY(c.y),l.rotateZ(c.z);const d=s.position;l.computeBoundingBox(),l.computeVertexNormals();let p=.5*(l.boundingBox.max.x-l.boundingBox.min.x),g=.5*(l.boundingBox.max.z-l.boundingBox.min.z),u=new a({color:null!=o.color?o.color:A,flatShading:!1}),m=new r(l,u);return m.castShadow=!0,m.position.set((d.x||0)-p,d.y||0,(d.z||0)-g),m.name="text",m._isText_=!0,m},createWarning:(e,t,A,i,a=100,r=1)=>{if(!A)return;const d=tt("WARNING",t,i);let p=new l,g=Ve(A);g.scale.set(r,r,r);const u=d.position;g.position.set(u.x,u.y,u.z);const m=d.rotation;g.rotation.set(m.x,m.y,m.z),p.add(g);let h=new c(12717056,8,a,0);h.name="灯光",h.position.y=u.y+30,p.add(h),p.name=e;let f=new o(p),v=new n("红色.material.color",[0,.25,.75],[1,0,0,1,1,0,1,0,0]),y=new n("灯光.color",[0,.25,.75],[1,0,0,1,1,0,1,0,0]),w=new n("警告标识.scale",[0,.5,1],[1,1,1,1.2,1.2,2,1,1,1]),b=new s("warning_",1,[v,y,w]),x=f.clipAction(b);return x.paused=!0,x.play(),p.visible=!1,p._isWarning_=!0,{group:p,action:x,mixer:f}},createStatusMark:(e,t,A,n)=>{if(!t)return;const s=tt(n?"DISABLED":"STATUS",e,A);let o=Ve(t);const i=s.position;o.position.set(i.x,i.y,i.z);const a=s.rotation;return o.rotation.set(a.x,a.y,a.z),o.visible=!1,o._isStatus_=!0,o},isType:At,isObject:nt,isDOM:st,deepClone:ot,deepMerge:it,checkUrl:Re,random:at}),lt={container:document.body,width:window.innerWidth,height:window.innerHeight,baseUrl:"",bgColor:null,bgUrl:null,env:null,scale:1,fog:{visible:!1,near:100,far:1e3},render:{antialias:!0,logarithmicDepthBuffer:!0,preserveDrawingBuffer:!1},controls:{visible:!0,autoRotate:!1,autoRotateSpeed:2,enableDamping:!1,dampingFactor:.25,enablePan:!0,enableRotate:!0,enableZoom:!0,maxAzimuthAngle:1/0,minAzimuthAngle:1/0,minDistance:1,maxDistance:2e3,minPolarAngle:0,maxPolarAngle:Math.PI,maxTargetRadius:1/0,rotateSpeed:1,screenSpacePanning:!0},ambientLight:{visible:!0,color:16777215,intensity:1.5},directionalLight:{visible:!0,helper:!1,position:[500,1e3,800],position2:[-500,800,-800],light2:!0,color:16777215,intensity:1.5},camera:{helper:!1,near:1,far:1e4,position:[-350,510,700]},cruise:{visible:!1,enabled:!1,runing:!1,helper:!1,points:[],segment:2,tension:0,baseUrl:"",repeat:[.1,1],width:15,speed:1,mapSpeed:.006,offset:10,factor:1,auto:!1,animateBack:void 0,alway:!1},grid:{visible:!1,opacity:.3,transparent:!0,width:800,divisions:80,centerLineColor:10592673,gridColor:10592673,fork:!1,forkSize:1.4,forkColor:10592673},axes:{visible:!1,size:50}};const ct=()=>({initCSS3DRender:(e,t)=>{const{width:A,height:n}=e,s=new T;return s.setSize(A,n),s.domElement.style.position="absolute",s.domElement.style.left="0px",s.domElement.style.top="0px",s.domElement.style.pointerEvents="none",t.appendChild(s.domElement),s},createCSS3DDom:e=>{const{name:t,className:A="",onClick:n,position:s,sprite:o}=e,i=document.createElement("div");i.innerHTML=t,i.className=A;const a=o?new K(i):new q(i);return i.style.pointerEvents=n?"auto":"none",i.style.position="absolute","function"==typeof n&&i.addEventListener("click",n),s&&a.position.set(...s),a}}),{createCSS3DDom:dt}=ct(),pt=()=>({visible:!0,enabled:!1,runing:!1,helper:!1,points:[],segment:2,close:!0,tension:0,baseUrl:"",mapUrl:Ze("arrow.png"),repeat:[.1,1],width:15,speed:1,mapSpeed:.006,offset:10,factor:1,index:0,auto:!1,tube:!1,color:16777215,radius:1,radialSegments:1,animateBack:void 0,alway:!1}),gt=()=>{let e,t,n,s=pt();const o=()=>{var e;return 900*(null!==(e=s.segment)&&void 0!==e?e:2)},i=()=>null==e?void 0:e.getPoints(o()),c=(e,t)=>new A(t.x,t.y+e,t.z),p=e=>{if(s.enabled)switch(e.keyCode){case 38:case 87:s.runing?(s.factor*=1.5,s.factor>10&&(s.factor=10)):s.index+=5;break;case 83:case 40:s.runing||(s.index-=5,s.index<0&&(s.index=o()))}},g=e=>{if(s.enabled)switch(s.factor=1,e.keyCode){case 32:s.runing=!s.runing;break;case 38:case 87:s.runing||(s.index+=10);break;case 83:case 40:s.runing||(s.index-=10,s.index<0&&(s.index=o()))}};return{createCruise:(o,c)=>{s=it(pt(),o);const{points:p,tension:g,mapUrl:u,baseUrl:m,repeat:f,width:v,helper:w,close:x,tube:E,color:j,radius:_,radialSegments:C}=s,M=[];for(let e=0;e<p.length;e++){const t=p[e];M.push(new A(t[0],t[1],t[2]))}e=new k(M,x,"catmullrom",null!=g?g:0),e=new k(i(),x,"catmullrom",null!=g?g:0);const S=new l;t=(new y).load(Ye(u,m),(e=>{e.wrapS=B,e.repeat.x=f[0],e.repeat.y=f[1],e.anisotropy=c.capabilities.getMaxAnisotropy()}));const z=new a({color:j,map:t,opacity:.9,transparent:!0,depthTest:!0,side:$}),L=new A(0,1,0),I=new Se;I.set(i(),_,C,L,!1);const O=E?new ee:new te;O.update(I,E?{radius:_,radialSegments:C,progress:1,startRad:0}:{width:v,arrow:!1,progress:1,side:"both"},!1);const P=new r(O,z);return S.add(P),S.name="cruise",w&&((t,A)=>{n=new r(new ke(2),new b({color:0,opacity:.8,depthTest:!1,transparent:!0})),t.add(n);const o=(new h).setFromPoints(A.concat(A[0])),i=new d({color:255,opacity:1,depthTest:!1,transparent:!0}),a=new Qe(o,i);t.add(a);const l=new Q(e,100,s.width/2,3,!0),c=new Ae({color:16711935,opacity:.1,depthTest:!1,transparent:!0}),p=new r(l,c),g=new b({color:16715760,opacity:.3,wireframe:!0,depthTest:!1,transparent:!0}),u=new r(l,g);p.add(u),t.add(p)})(S,M),S.renderOrder=99,S},updateCruise:e=>{s=it(s,e)},cruiseAnimate:A=>{if(!A)return;if(!e)return;const{mapSpeed:i,speed:a,factor:r,enabled:l,runing:d,offset:p,helper:g,auto:u,animateBack:m}=s;if(t&&(t.offset.x-=i),!(u||d&&l))return;(u||d&&l)&&(s.index+=r*a);const h=o(),f=s.index%h/h;let v=f+.001;v>1&&(v-=1);const y=e.getPointAt(v);if(g&&n){const e=c(p,y);n.position.copy(e)}const w=c(p,e.getPointAt(f));if(!u||d&&l){A.position.copy(w);const e=c(p,y);A._lookAt_=e,A.lookAt(e)}"function"==typeof m&&m(w,y,e,f)},bindEvent:()=>{window.addEventListener("keydown",p,!1),window.addEventListener("keyup",g,!1)},removeEvent:()=>{window.removeEventListener("keyup",g),window.removeEventListener("keydown",p)}}},ut=()=>({createFork:(e={})=>{const{width:t=800,divisions:A=80,forkSize:n=1.4,forkColor:s=10592673}=e;let o=t/A,i=-t/2;const a=new l;for(let l=0;l<=A;l++)for(let e=0;e<=A;e++){const t=i+l*o,A=i+e*o,c=new w(n,n/5),d=new Ae({color:s,transparent:!0,opacity:.9}),p=new r(c,d);p.rotateX(.5*-Math.PI),p.position.set(t,0,A);const g=p.clone();g.rotateZ(.5*Math.PI),a.add(p,g)}return a}}),mt=["216","217","218","219","220","221","222","223","224","225","226"];var ht,ft,vt=Object.freeze({__proto__:null,useConvertData:()=>({transformGeoJSON:e=>{let t=e.features;for(let A=0;A<t.length;A++){const e=t[A];"Polygon"===e.geometry.type&&(e.geometry.coordinates=[e.geometry.coordinates])}return e}}),useCountryLine:()=>{const e=(e,t,A="LineLoop")=>{let n;if("Line2"===A){const A=new ne;A.setPositions(e),n=new se(A,t),n.name="countryLine2",n.computeLineDistances()}else{const s=new h;s.setFromPoints(e),n=new oe[A](s,t),n.name="countryLine"}return n};return{createCountryFlatLine:(t,n,s="LineLoop")=>{let o={color:65535,linewidth:1,depthTest:!1};o=it(o,n);let i=new d(o);"Line2"===s&&(i=new p(o));let a=t.features,r=new l;for(let l=0;l<a.length;l++){const t=a[l].geometry.coordinates;for(let n=0;n<t.length;n++){const o=t[n],a=[];"Line2"===s?o.forEach((e=>{e.forEach((e=>{a.push(e[0],0,-e[1])}))})):o.forEach((e=>{e.forEach((e=>{a.push(new A(e[0],e[1],0))}))}));let l=e(a,i,s);r.add(l)}}return r},getPoints:(e,t=0,n)=>{let s=e.features;const o=[];for(let i=0;i<s.length;i++){const e=s[i].geometry.coordinates;for(let s=0;s<e.length;s++)e[s].forEach((e=>{e.forEach((e=>{n?o.push(new A(e[0],t,-e[1])):o.push(e[0],t,-e[1])}))}))}return o}}},useMapBar:(e={})=>{let t=it({height:10,size:2,factor:1,color1:1048575,color2:16777215},e);return{createBar:(e={},A={})=>{var n;t=it(t,A);let{size:s,height:o,factor:i,color1:a,color2:c}=t;s*=i,o*=i,o*=null!==(n=e.heightRatio)&&void 0!==n?n:i;const[d,p,h]=e.position||[0,0,0],f=new l,v=new g(s,s,o),y=new u({depthTest:!1,transparent:!0,vertexColors:!1,uniforms:{uColor1:{value:new m(a)},uColor2:{value:new m(c)},uOpacity:{value:.6}},vertexShader:"\n\t\t\t\tvarying vec3 vColor;\n\t\t\t\tuniform vec3 uColor1;\n\t\t\t\tuniform vec3 uColor2;\n\t\t\t\tvoid main() {\n\t\t\t\t\tfloat percent = (position.z + 0.0) / 100.0; // 计算当前像素点在立方体高度上的百分比\n\t\t\t\t\tvColor = mix(uColor1.rgb, uColor2.rgb, percent);\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\t\t\t\tvarying vec3 vColor;\n\t\t\t\tuniform float uOpacity;\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = vec4(vColor, uOpacity);\n\t\t\t\t}\n\t\t\t"}),w=new r(v,y);if(f.add(w),f.name="柱状图",f.position.set(d,p,h+o/2),f.renderOrder=99,e.label){const{name:t="",className:A="",onClick:n}=e.label,s=dt({name:t,className:A,position:[0,0,o/2],onClick:n});s.rotateX(.5*Math.PI),f.add(s)}return f}}},useOutline:(e={})=>{let t=it({size:.1,color:16085360,range:500,factor:1,speed:6},e);const A=e=>{const A=e.material,n=A.uniforms.uLength.value;A.uniforms.uIndex.value+=t.speed,A.uniforms.uIndex.value>=n&&(A.uniforms.uIndex.value=0)};return{createOutline:(e,A={})=>{t=it(t,A);const{size:n,factor:s,range:o,color:i}=t,a=new Float32Array(e),r=new h;r.setAttribute("position",new f(a,3));const l=new Float32Array(Math.floor(a.length/3)).map(((e,t)=>t));r.setAttribute("aIndex",new f(l,1));const c=new u({vertexShader:"\n\t\t\t\tattribute float aOpacity;\n\t\t\t\tuniform float uSize;\n\n\t\t\t\tattribute float aIndex;\n\t\t\t\tvarying vec3 vp;\n\t\t\t\tvarying float vertexIndex;\n\n\t\t\t\tvoid main(){\n\t\t\t\t\tgl_Position = projectionMatrix*modelViewMatrix*vec4(position,1.0);\n\t\t\t\t\tgl_PointSize = uSize;\n\n\t\t\t\t\tvp = position;\n\t\t\t\t\tvertexIndex = aIndex;\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\t\t\t\tvarying float vertexIndex;\n\t\t\t\tuniform vec3 uColor;\n\t\t\t\tuniform float uIndex;\n\t\t\t\tuniform float uRange;\n\n\t\t\t\tfloat invert(float n){\n\t\t\t\t\treturn 1.-n;\n\t\t\t\t}\n\n\t\t\t\tvoid main(){\n\t\t\t\t\tfloat uOpacity = 1.0;\n\t\t\t\t\tif(vertexIndex <= uIndex || vertexIndex >= (uRange + uIndex)){\n\t\t\t\t\t\t\tdiscard;\n\t\t\t\t\t}\n\t\t\t\t\tuOpacity = (vertexIndex - uIndex)/uRange;\n\t\t\t\t\tif ( uOpacity < 0.2) {\n\t\t\t\t\t\tdiscard;\n\t\t\t\t\t}\n\t\t\t\t\tvec2 uv=vec2(gl_PointCoord.x,invert(gl_PointCoord.y));\n\t\t\t\t\tvec2 cUv=2.*uv-1.;\n\t\t\t\t\tvec4 color=vec4(1./length(cUv));\n\t\t\t\t\tcolor*=uOpacity;\n\t\t\t\t\tcolor.rgb*=uColor;\n\t\t\t\t\tgl_FragColor=color;\n\t\t\t\t}\n\t\t\t",transparent:!0,depthTest:!1,uniforms:{uSize:{value:n*s},uIndex:{value:0},uLength:{value:l.length},uRange:{value:o},uColor:{value:new m(i)}}}),d=new v(r,c);return d.name="轮廓",d.scale.setScalar(s),d},update:A,outlineUpdate:A}},useMarkLight:(t={})=>{let A=it({pointTextureUrl:Ze("point.png"),circleTextureUrl:Ze("circle.png"),lightTextureUrl:Ze("light.png"),factor:1,color:65535},t);const n=new y;return{createMarkLight:(t=[0,0,0],s=10,o={})=>{A=it(A,o);const i=new l,a=new w(s/6.219,s);a.rotateX(-Math.PI/2),a.translate(0,0,s/2);const c=new b({map:n.load(A.lightTextureUrl),color:A.color,transparent:!0,depthWrite:!1,side:x});let d=new r(a,c);d.rotateX(Math.PI),d.position.z=s,d.renderOrder=3,d.name="光柱 01";let p=d.clone();p.name="光柱 02",p.rotateZ(Math.PI/2);const g=(()=>{const e=new w(3,3),t=new b({map:n.load(A.pointTextureUrl),color:A.color,side:x,transparent:!0,depthWrite:!1});let s=new r(e,t);s.renderOrder=1,s.name="底部光点";const o=.3*A.factor;return s.scale.setScalar(o),s})(),u=(()=>{const t=new w(3,3),s=new b({map:n.load(A.circleTextureUrl),color:A.color,side:x,opacity:0,transparent:!0,depthWrite:!1});let o=new r(t,s);o.renderOrder=2,o.name="createLightHalo";const i=.5*A.factor;o.scale.setScalar(i);const a=at(0,2e3);return o.tween1=new e({scale:i,opacity:0}).to({scale:1.5*i,opacity:1},1e3).delay(a).onUpdate((e=>{let{scale:t,opacity:A}=e;o.scale.setScalar(t),o.material.opacity=A})),o.tween2=new e({scale:1.5*i,opacity:1}).to({scale:2*i,opacity:0},1e3).onUpdate((e=>{let{scale:t,opacity:A}=e;o.scale.setScalar(t),o.material.opacity=A})),o.tween1.chain(o.tween2),o.tween2.chain(o.tween1),o.tween1.start(),o})();i.add(d,p,g,u);const[m,h,f]=t;return i.position.set(m,h,f),i.rotateX(.5*Math.PI),i.name="光柱标记",i}}},useFence:()=>{const e=[1,.8],t=.2,A=(new y).load(Ze("fenceMap0.png"),(A=>{A.wrapT=B,A.repeat.x=e[0],A.repeat.y=e[1],A.offset.y=t})),n=(new y).load(Ze("fenceMap1.png"),(A=>{A.wrapT=B,A.repeat.x=e[0],A.repeat.y=e[1],A.offset.x=t})),s=(new y).load(Ze("fenceMap2.png"),(e=>{e.wrapS=B,e.wrapT=B})),o=(e,t,o)=>{const i=[];for(let A=0;A<t.length;A++){const n=t[A];i.push(...e[n])}const c=new h,d=new Float32Array(i);c.setAttribute("position",new f(d,3));const p=t.length,g=new f(new Float32Array(3*p),3);c.setAttribute("normal",g);for(let A=0;A<p;A++)g.setXYZ(A,0,0,0);const u=new f(new Float32Array([1,1,0,1,0,0,0,0,1,0,1,1]),2);c.setAttribute("uv",u);const m=new a({color:o,map:A,transparent:!0,blending:C,side:x}),v=new a({color:o,map:n,transparent:!0,blending:C,side:x});var y=new a({color:o,map:s,opacity:.5,transparent:!0,side:x});const w=new r(c,m),b=new l,B=new r(c,v),E=new r(c,y);return b.add(w,B,E),b};return{createFence:(e,t=11009923)=>{const A=new l;var n=new E(e,t);n.update();const s=n.geometry.getAttribute("position").array,i=[];for(let o=0;o<s.length;o+=3){const e=s[o],t=s[o+1],A=s[o+2];i.push([e,t,A])}const a=o(i,[0,1,2,2,3,0],t),r=o(i,[4,5,6,6,7,4],t),c=o(i,[4,0,3,3,7,4],t),d=o(i,[1,5,6,6,2,1],t);return A.add(a,r,c,d),A},fenceAnimate:(e=1)=>{const s=.008*e;if(A){let e=A.offset.y-s;e<0&&(e=t),A.offset.y=e}if(n){let e=n.offset.y-s;e<0&&(e=t),n.offset.y=e}}}},useCorrugatedPlate:(e={})=>{let t=it({range:100,interval:.8,size:.2,color:47273,light:881527,factor:1},e);const n=(e,t)=>{const A=e.material,n=A.uniforms.uRange.value,s=A.uniforms.uLength.value;A.uniforms.uRadius.value+=t*(n/4),A.uniforms.uRadius.value>=n+s&&(A.uniforms.uRadius.value=0)};return{createCorrugatedPlate:(e={})=>{t=it(t,e);let{range:n,color:s,light:o,factor:i}=t;n*=i;const a=(()=>{let{range:e,interval:n,size:s,factor:o}=t;e*=o,n*=o,s*=o;const i=[],a=Math.floor(e/n);for(let t=-a;t<=a;t++)for(let e=-a;e<=a;e++){const o=new w(s,s),a=t*n,r=e*n,l=new j,c=new A(a,-s,r),d=new ie,p=new ae,g=new A(1,1,1);d.setFromEuler(p),l.compose(c,d,g),o.applyMatrix4(l),i.push(o)}return i})(),l=_(a),c=new u({uniforms:{uColor:{value:new m(o)},uTcolor:{value:new m(s)},uRadius:{value:1.25},uLength:{value:n/10},uRange:{value:n}},vertexShader:"\n\t\t\t\tvarying vec3 vp;\n\t\t\t\tvoid main(){\n\t\t\t\t\tvp = position;\n\t\t\t\t\tgl_Position\t= projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\t\t\t\tvarying vec3 vp;\n\t\t\t\tuniform vec3 uColor;\n\t\t\t\tuniform vec3 uTcolor;\n\t\t\t\tuniform float uRadius;\n\t\t\t\tuniform float uLength;\n\t\t\t\tfloat getLeng(float x, float y){\n\t\t\t\t\treturn\tsqrt((x-0.0)*(x-0.0)+(y-0.0)*(y-0.0));\n\t\t\t\t}\n\t\t\t\tvoid main(){\n\t\t\t\t\tfloat uOpacity = 0.8;\n\t\t\t\t\tvec3 vColor = uColor;\n\t\t\t\t\tfloat length = getLeng(vp.x,vp.z);\n\t\t\t\t\tif ( length <= uRadius && length > uRadius - uLength ) {\n\t\t\t\t\t\tfloat op = sin( (uRadius - length) / uLength ) ;\n\t\t\t\t\t\tuOpacity = op;\n\t\t\t\t\t\tif ( vp.y < 0.0 ) {\n\t\t\t\t\t\t\tvColor = uColor * op;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvColor = uTcolor;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvColor = uTcolor;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(vColor,uOpacity);\n\t\t\t\t}\n\t\t\t",transparent:!0,depthWrite:!1,side:x}),d=new r(l,c);return d.name="波纹板",d},update:n,corrugatedPlateUpdate:n}},useDiffusion:()=>{let e;return{createDiffusion:(t=10,A=16715760,n=5)=>{const s=new w(t,t,1,1),o=["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(""),i=["varying vec2 vUv;","uniform vec3 uColor;","uniform float uOpacity;","uniform float uSpeed;","uniform float uSge;","uniform float time;","float PI = 3.14159265;","float drawCircle(float index, float range) {","\tfloat opacity = 1.0;","\tif (index >= 1.0 - range) {","\t\topacity = 1.0 - (index - (1.0 - range)) / range;","\t} else if(index <= range) {","\t\topacity = index / range;","\t}","\treturn opacity;","}","float distanceTo(vec2 src, vec2 dst) {","\tfloat dx = src.x - dst.x;","\tfloat dy = src.y - dst.y;","\tfloat dv = dx * dx + dy * dy;","\treturn sqrt(dv);","}","void main() {","\tfloat iTime = -time * uSpeed;","\tfloat opacity = 0.0;","\tfloat len = distanceTo(vec2(0.5, 0.5), vec2(vUv.x, vUv.y));","\tfloat size = 1.0 / uSge;","\tvec2 range = vec2(0.65, 0.75);","\tfloat index = mod(iTime + len, size);","\tvec2 cRadius = vec2(0.06, 0.12);","\tif (index < size && len <= 0.5) {","\t\tfloat i = sin(index / size * PI);","\t\tif (i >= range.x && i <= range.y){","\t\t\tfloat t = (i - range.x) / (range.y - range.x);","\t\t\tfloat r = 0.3;","\t\t\topacity = drawCircle(t, r);","\t\t}","\t\topacity *=\t1.0 - len / 0.5;","\t};","\tgl_FragColor = vec4(uColor, uOpacity * opacity);","}"].join("");return e=new u({uniforms:{uColor:{value:new m(A)},uOpacity:{value:1},uSpeed:{value:.1},uSge:{value:n},uRadius:{value:t/2},time:{value:0}},transparent:!0,vertexShader:o,fragmentShader:i,depthTest:!1,blending:C,side:x}),new r(s,e)},updateDiffusion:(t=1)=>{if(!e)return;const A=.001*performance.now()*t;e.uniforms.time.value=A}}},useFlywire:(e={})=>{let t,n,s=it({depth:0,height:4,divisions:1e3,color:16777215,flyColor:16761095,pointColor:16715760,pointWidth:2.5,flyPointWidth:2.4,tubularSegments:256,radius:.5,radialSegments:8,closed:!1,length:100,factor:1,speed:4},e);const o=e=>{const[t,A]=e;let{pointWidth:o,depth:i,factor:a}=s;const l=o*a;i*=a;const c=new w(l,l,1,1),d=new r(c,n);return d.position.set(t,i,-A),d.rotateX(.5*-Math.PI),d},i=(e={})=>{s=it(s,e),t=new u({depthTest:!1,uniforms:{uColor:{value:new m(s.flyColor)},uIndex:{value:0},uTotal:{value:s.divisions},uWidth:{value:s.flyPointWidth},uLength:{value:s.length}},vertexShader:["attribute float aIndex;","uniform float uIndex;","uniform float uWidth;","uniform vec3 uColor;","varying float vSize;","uniform float uLength;","void main(){","\t\tvec4 viewPosition = viewMatrix * modelMatrix * vec4(position,1);","\t\tgl_Position = projectionMatrix * viewPosition;","\t\tif(aIndex >= uIndex - uLength && aIndex < uIndex){","\t\t\tvSize = uWidth * ((aIndex - uIndex + uLength) / uLength);","\t\t}","\t\tgl_PointSize = vSize;","}"].join(""),side:x,fragmentShader:["varying float vSize;","uniform vec3 uColor;","void main(){","\t\tif(vSize<=0.0){","\t\t\tgl_FragColor = vec4(1,0,0,0);","\t\t}else{","\t\t\tgl_FragColor = vec4(uColor,1);","\t\t}","}"].join(""),transparent:!0,vertexColors:!1}),n=new u({uniforms:{uColor:{value:new m(s.pointColor)},uOpacity:{value:1},uSpeed:{value:.1},uSge:{value:4},uRadius:{value:s.pointWidth*s.factor/2},time:{value:0}},transparent:!0,depthTest:!1,vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(""),fragmentShader:["varying vec2 vUv;","uniform vec3 uColor;","uniform float uOpacity;","uniform float uSpeed;","uniform float uSge;","uniform float time;","float PI = 3.14159265;","float drawCircle(float index, float range) {","\tfloat opacity = 1.0;","\tif (index >= 1.0 - range) {","\t\topacity = 1.0 - (index - (1.0 - range)) / range;","\t} else if(index <= range) {","\t\topacity = index / range;","\t}","\treturn opacity;","}","float distanceTo(vec2 src, vec2 dst) {","\tfloat dx = src.x - dst.x;","\tfloat dy = src.y - dst.y;","\tfloat dv = dx * dx + dy * dy;","\treturn sqrt(dv);","}","void main() {","\tfloat iTime = -time * uSpeed;","\tfloat opacity = 0.0;","\tfloat len = distanceTo(vec2(0.5, 0.5), vec2(vUv.x, vUv.y));","\tfloat size = 1.0 / uSge;","\tvec2 range = vec2(0.65, 0.75);","\tfloat index = mod(iTime + len, size);","\tvec2 cRadius = vec2(0.06, 0.12);","\tif (index < size && len <= 0.5) {","\t\tfloat i = sin(index / size * PI);","\t\tif (i >= range.x && i <= range.y){","\t\t\t// 归一","\t\t\tfloat t = (i - range.x) / (range.y - range.x);","\t\t\tfloat r = 0.3;","\t\t\topacity = drawCircle(t, r);","\t\t}","\t\topacity *=\t1.0 - len / 0.5;","\t};","\tgl_FragColor = vec4(uColor, uOpacity * opacity);","}"].join("\n"),side:x})},a=()=>{const e=t,A=e.uniforms.uTotal.value;e.uniforms.uIndex.value+=s.speed,e.uniforms.uIndex.value>=A&&(e.uniforms.uIndex.value=0);const o=.001*performance.now();n.uniforms.time.value=o};return i(),{createFlywireTexture:i,createFlywire:e=>{const n=new l,i=o(e[0]),a=o(e[1]);n.add(i,a);const c=(e=>{const[t,n]=e[0],[o,i]=e[1];let{depth:a,height:r,factor:l,divisions:c}=s;r=(a+r)*l,a*=l;const d=new A(t,a,-n),p=new A(t+(o-t)/4,r,-(n+(i-n)/4)),g=new A(t+3*(o-t)/4,r,-(n+3*(i-n)/4)),u=new A(o,a,-i);return new M(d,p,g,u).getPoints(c)})(e),d=new k(c,!1,"centripetal",.5),p=new Q(d,s.tubularSegments,s.radius,s.radialSegments,s.closed),g=new u({transparent:!0,opacity:1,depthTest:!1,vertexColors:!1,uniforms:{uColor:{value:new m(s.color)},uOpacity:{value:.6}},vertexShader:["varying vec3 vColor;","uniform vec3 uColor;","void main() {","\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(""),fragmentShader:["uniform vec3 uColor;","uniform float uOpacity;","void main() {","\tgl_FragColor = vec4(uColor, uOpacity);","}"].join("")}),y=new r(p,g);y.renderOrder=10;const w=(e=>{const A=new Float32Array(e.map(((e,t)=>t))),n=(new h).setFromPoints(e);return n.setAttribute("aIndex",new f(A,1)),new v(n,t)})(c);return n.add(y,w),n},update:a,flywireUpdate:a}},useLensflare:(e={})=>{let t=it({mainTextureUrl:Ze("lensflare0.png"),minorTextureUrl:Ze("lensflare3.png")},e);const A=new y,n=A.load(t.mainTextureUrl),s=A.load(t.minorTextureUrl);return{addLensflare:(e,t,A,o)=>{const i=new c(16777215,1,2e3,0);i.color.set(e),i.position.set(t,A,o);const a=new S;return a.addElement(new z(n,700,0,i.color)),a.addElement(new z(s,60,.6)),a.addElement(new z(s,70,.7)),a.addElement(new z(s,120,.9)),a.addElement(new z(s,70,1)),i.add(a),i}}},useFileLoader:()=>{const e=L(0);return{load:t=>{const A=new I;return new Promise(((n,s)=>{A.load(t,(e=>{let t={};try{t=JSON.parse(e)}catch(A){}n(t)}),(t=>{let{loaded:A,total:n}=t;e.value=Number((A/n*100).toFixed(0))}),s)}))},progress:e}},useUpload:e=>{const t=it({baseUrl:"",dracoPath:"/three/draco/gltf/",basisPath:"/three/basis/"},e);return{uploadModel:(e,A,n)=>{const{baseUrl:s,dracoPath:o,basisPath:i}=t,a=e[0],r=a.name,c=r.split(".").pop().toLowerCase(),d=new FileReader;d.addEventListener("progress",(e=>{const t="("+Math.floor(e.total/1e3)+" KB)",A=Math.floor(e.loaded/e.total*100)+"%";n&&n({progress:A,filename:r,size:t})})),d.addEventListener("load",(e=>Te(void 0,void 0,void 0,(function*(){const t=e.target.result;if(["glb","gltf"].includes(c)){const e=new W,n=new J;n.setDecoderPath(`${s}${o}`),e.setDRACOLoader(n);const a=new H;a.setTranscoderPath(`${s}${i}`),e.setKTX2Loader(a),e.setMeshoptDecoder(V),e.parse(t,"",(t=>{var n,s,o;const i=t.scene.children;let a=new l;i.length>1?a.add(...i):a=i[i.length-1],a.name=(null===(n=a.userData)||void 0===n?void 0:n.name)||r,a.animations.push(...t.animations),A(a),null===(s=e.dracoLoader)||void 0===s||s.dispose(),null===(o=e.ktx2Loader)||void 0===o||o.dispose()}))}else if("fbx"==c){const e=(new re).parse(t,"");A(e)}})))),d.readAsArrayBuffer(a)}}},useCollide:()=>{const e=new O,t=new A(0,2,0);return{checkCollide:(n,s,o,i=!0,a=t)=>{const r=s.clone().add(a),l=new A;return n.getWorldDirection(l),l.normalize(),e.ray.origin.copy(r),e.ray.direction.copy(l),e.intersectObjects(o,i)}}},useCoord:()=>({getBoundingBox:e=>{var t=new P;t.expandByObject(e);var n=new A;t.getSize(n);var s=new A;return t.getCenter(s),{box3:t,center:s,size:n}}}),useRaycaster:()=>{const e=new O,t=new le,A={left:0,top:0};return{raycaster:e,pointer:t,style:A,update:(e,n,s=1)=>{const o=n.getBoundingClientRect()||{left:0,top:0};t.x=(e.clientX-o.left)/(n.clientWidth*s)*2-1,t.y=-(e.clientY-o.top)/(n.clientHeight*s)*2+1;const i=n.clientWidth/2,a=n.clientHeight/2;A.left=t.x*i+i,A.top=-t.y*a+a}}},useCruise:gt,useCSS2D:()=>({initCSS2DRender:(e,t)=>{const{width:A,height:n}=e,s=new U;return s.setSize(A,n),s.domElement.style.position="absolute",s.domElement.style.left="0px",s.domElement.style.top="0px",s.domElement.style.pointerEvents="none",t.appendChild(s.domElement),s},createCSS2DDom:e=>{const{name:t,className:A="",onClick:n,position:s}=e,o=document.createElement("div");o.innerHTML=t,o.className=A;const i=new D(o);return o.style.pointerEvents=n?"auto":"none",o.style.position="absolute","function"==typeof n&&o.addEventListener("click",(e=>n(e,i))),s&&i.position.set(...s),i}}),CSS2DRenderer:U,useCSS3D:ct,CSS3DRenderer:T,useFloor:(A={})=>{const n=it({mode:"BA",margin:50},A),s=(A,n,s,o)=>{0!==n.length&&n.forEach((n=>{var i,a,r,l;const c=n._position_,d="UD"==A?(null!==(i=c.y)&&void 0!==i?i:0)+s:null!==(a=c.y)&&void 0!==a?a:0,p="BA"==A?(null!==(r=c.z)&&void 0!==r?r:0)+o:null!==(l=c.z)&&void 0!==l?l:0;new e(n.position).to({y:d,z:p},500).easing(t.Quadratic.Out).start()}))};return{floorAnimate:(A,o,i)=>{var a,r,l,c,d,p;const g=void 0!==o&&o>-1,{margin:u,mode:m}=n;for(let n=0;n<A.length;n++){const h=A[n],f=h._position_,v=(n-(g?o:n))*u;let y=(null!==(a=f.y)&&void 0!==a?a:0)+v,w=o==n?(null!==(r=f.z)&&void 0!==r?r:0)+u:null!==(l=f.z)&&void 0!==l?l:0;const b=o===n&&("UD"===m&&y===h.position.y||"BA"===m&&w===h.position.z);if(b&&(y=null!==(c=f.y)&&void 0!==c?c:0,w=null!==(d=f.z)&&void 0!==d?d:0),"UD"===m){if(h.position.y===y)continue}else if("BA"===m&&h.position.z===w)continue;if(null===(p=h.data)||void 0===p?void 0:p.mark){const e=i(h.data.mark);let t=o==n?u:0;b&&(t=0),s(m,e,v,t)}new e(h.position).to({y:"UD"===m?y:h.position.y,z:"BA"===m?w:h.position.z},500).easing(t.Quadratic.Out).start()}}}},useDialog:(e={})=>{const t=Z(it({show:!1,style:{left:"",top:""},select:[],data:{},title:"",position:{top:0,left:0}},e));return{dialog:t,options:t,show:R(t.show)}},useGrid:ut,useMaterial:()=>{const e=(e,t=.5)=>{const A=e=>{e.material.transparent=!0,e.material.opacity=t};e.isMesh?A(e):e.traverse((e=>{e.isMesh&&A(e)}))},t=e=>({color:e.color,map:e.map,emissive:e.emissive,emissiveIntensity:e.emissiveIntensity,emissiveMap:e.emissiveMap,bumpMap:e.bumpMap,normalMap:e.normalMap,displacementMap:e.displacementMap,opacity:e.opacity,transparent:e.transparent,side:e.side}),n=(e,A,s)=>{if(e instanceof Array){let t=e.map((e=>n(e,A,s)));e=t}else A?(e.metalness=.5,e.roughness=0):(e.metalness=.5,e.roughness=1),e=new X(Object.assign(Object.assign({},t(e)),{metalness:e.metalness,roughness:e.roughness,side:s?x:$}));return e},s=(e,t)=>{const A=document.createElement("a");A.style.display="none",document.body.appendChild(A),A.href=URL.createObjectURL(e),A.download=t,A.click(),A.remove()};return{materialReplace:(t,A,s,o=1211922)=>{const i=We.mesh,a=i.animatehName,r=i.transparentName,{type:l,name:c}=s;if(l.indexOf("Light")>-1){if(!s.shadow)return;let e=800;if(s.castShadow=!0,s.shadow.camera.right=e,s.shadow.camera.left=-e,s.shadow.camera.top=e,s.shadow.camera.bottom=-e,"SpotLight"===l){let e=new Y(s,s.color);t.add(e)}else if("PointLight"===l){let e=new G(s,s.color);t.add(e)}}else{if(!A.transformMaterial||!s.isMesh)return s.castShadow=!0,void(s.receiveShadow=!0);if(A.opacitySkin&&r.find((e=>c.indexOf(e)>-1))&&e(s,A.opacity),i.receiveShadowName.find((e=>c.indexOf(e)>-1))){s.receiveShadow=!0;const e=A.groundReflection;s.material=n(s.material,e,A.side)}else if(a.find((e=>c.indexOf(e)>-1))){let e=new X({color:o,metalness:.6,roughness:.6});s.material=e}else s.isMesh&&(s.castShadow=!0,s.receiveShadow=!0,s.material=n(s.material,A.glisten,A.side))}},changeTransparent:e,exportGlb:(e,t,A,n=!0)=>{if(!e)return;const o={binary:n,animations:t};(new N).parse(e,(e=>{var t,n,o;e instanceof ArrayBuffer?(o=A+".glb",s(new Blob([e],{type:"application/octet-stream"}),o)):(t=JSON.stringify(e,null,2),n=A+".gltf",s(new Blob([t],{type:"text/plain"}),n))}),(e=>{}),o)},getAnimations:e=>{const t=[];e.traverse((e=>{t.push(...e.animations)}));const A=[];for(const n of t)A.push(n.clone().optimize());return A},setMetalnessMaterial:(e={color:16777215},A,n)=>new X(Object.assign(Object.assign({},t(e)),{metalness:A,roughness:n})),setGlassMaterial:(e={color:16777215},{metalness:A=0,roughness:n=0,envMapIntensity:s=0,transmission:o=0,ior:i=0})=>new F(Object.assign(Object.assign({},t(e)),{metalness:A,roughness:n,envMapIntensity:s,transmission:o,ior:i})),centerBoxHelper:(e,t=16711680)=>{var n=new E(e,t);return n.update(),{helper:n,center:(new P).setFromObject(e).getCenter(new A)}}}},useMoveAnimate:()=>{let e;const t={index:0,length:0,runing:!1,model:void 0,speed:1,endCallback:void 0,rungingCall:void 0},A=(A=!0)=>{if(t.runing=!1,A){const A=t.index-1;t.model.position.copy((A=>{let n=A/t.length;return n>1?n=1:n<0&&(n=0),e.getPointAt(n)})(A))}};return{createMove:(A,n,s,o)=>{const i=A.position,a=Math.atan2(-n.z+i.z,n.x-i.x);A.rotation.y=.5*Math.PI+a;const r=i.distanceTo(n);let l=Math.floor(r/t.speed);l<2&&(l=2);var c;e=new k([i,n],!1,"catmullrom",0),e=new k((c=l,null==e?void 0:e.getPoints(c)),!1,"catmullrom",0),t.model=A,t.index=0,t.length=l,t.rungingCall=s,t.endCallback=o,t.runing=!0},moveAnimate:(n=1)=>{if(!t.runing)return;t.index+=n;let s=t.index/t.length;s>1&&(s=1);const o=e.getPointAt(s);t.model.position.copy(o),s>=1?(t.runing=!1,"function"==typeof t.endCallback&&t.endCallback(o)):"function"==typeof t.rungingCall&&t.rungingCall(o,A)}}},useRoam:()=>{let e,t={runing:!1,segment:2,close:!0,tension:0,offset:0,points:[],factor:1,speed:1,index:0,animateBack:void 0};const n=(n={})=>{if(e)return;t=it({runing:!1,segment:2,close:!0,tension:0,offset:0,points:[],factor:1,speed:1,index:0,animateBack:void 0},n);const{points:o,tension:i,close:a}=t,r=[];for(let e=0;e<o.length;e++){const t=o[e];r.push(new A(t[0],t[1],t[2]))}e=new k(r,a,"catmullrom",null!=i?i:0),e=new k(s(),a,"catmullrom",null!=i?i:0)},s=()=>null==e?void 0:e.getPoints(o()),o=()=>{var e;return 1e3*(null!==(e=t.segment)&&void 0!==e?e:2)},i=(e,t)=>new A(t.x,t.y+e,t.z);return{createRoam:n,updateRoam:e=>{t=it(t,e)},executeRoam:(A,n)=>{if(!A||!n)return;if(!e)return;const{runing:s,offset:a,factor:r,speed:l,animateBack:c}=t;if(!s)return;t.index+=r*l;const d=o(),p=t.index%d/d;let g=p+.01;g>1&&(g-=1);const u=e.getPointAt(g),m=i(a,e.getPointAt(p)),h=i(a,u);n.target=h,A._lookAt_=h,A.lookAt(n.target),"function"==typeof c&&c(m,u,e,p)},pause:()=>{t.runing=!1},play:()=>{t.runing=!0},reset:t=>{e=void 0,n(t)},getStatus:()=>t.runing}},useOpenTheDoor:()=>{let t={propertyName:"name",value:"",scale:10,axle:"z",isOpen:void 0,leftMatch:"左",rightMatch:"右",duration:1e3,angle:.5*Math.PI,autoClose:!0,delay:1e4};const n=(s,o)=>{const{propertyName:i,value:a,scale:r,axle:l,isOpen:c,leftMatch:d,rightMatch:p,duration:g,autoClose:u,delay:m}=it(t,o),h=s.getObjectByProperty(i,a);if(!h)return Promise.reject();const f=h.children.find((e=>e.name.indexOf(d)>-1)),v=h.children.find((e=>e.name.indexOf(p)>-1));if(!f||!v)return Promise.reject();u&&clearTimeout(h.__timer__);const y=f.position,w=v.position;return null==h.__open__&&(f.__position__=(new A).copy(y),v.__position__=(new A).copy(w)),h.__open__=void 0!==c?c:!h.__open__,new Promise((t=>{const A=v.__position__[l]+(h.__open__?-r:0);if(w[l]===A)return t(h);new e(y).to({[l]:f.__position__[l]+(h.__open__?r:0)},g).delay(0).start(),new e(w).to({[l]:A},g).delay(0).start().onComplete((()=>{t(h)})),u&&h.__open__&&(h.__timer__=setTimeout((()=>{n(s,o)}),m+g))}))},s=(A,n)=>{const{propertyName:o,value:i,angle:a,axle:r,isOpen:l,duration:c,autoClose:d,delay:p}=it(t,n),g=A.getObjectByProperty(o,i);if(!g)return Promise.reject();d&&clearTimeout(g.__timer__);const u=g.rotation;return null==g.__open__&&(g.__rotation__=(new ae).copy(u)),g.__open__=void 0!==l?l:!g.__open__,new Promise((t=>{const o=g.__rotation__[r]+(g.__open__?-a:0);if(u[r]===o)return t(g);new e(g.rotation).to({[r]:o},c).delay(0).start(),d&&g.__open__&&(g.__timer__=setTimeout((()=>{s(A,n)}),p+c))}))},o=(A,n)=>{const{propertyName:s,value:i,angle:a,axle:r,leftMatch:l,rightMatch:c,isOpen:d,duration:p,autoClose:g,delay:u}=it(t,n),m=A.getObjectByProperty(s,i);if(!m)return Promise.reject();const h=m.children.find((e=>e.name.indexOf(l)>-1)),f=m.children.find((e=>e.name.indexOf(c)>-1));if(!h||!f)return Promise.reject();g&&clearTimeout(m.__timer__);const v=h.rotation,y=f.rotation;return null==m.__open__&&(h.__rotation__=(new ae).copy(v),f.__rotation__=(new ae).copy(y)),m.__open__=void 0!==d?d:!m.__open__,new Promise((t=>{const s=f.__rotation__[r]+(m.__open__?-a:0);if(y[r]===s)return t(m);new e(h.rotation).to({[r]:h.__rotation__[r]+(m.__open__?a:0)},p).delay(0).start(),new e(f.rotation).to({[r]:s},p).delay(0).start(),g&&m.__open__&&(m.__timer__=setTimeout((()=>{o(A,n)}),u+p))}))};return{dubleHorizontal:n,oddRotate:s,dubleRotate:o}},useKeyboardState:()=>{const e=["shift","ctrl","alt","meta"],t={left:37,up:38,right:39,down:40,space:32,pageup:33,pagedown:34,tab:9},A={},n={};let s,o;const i=(e,t)=>{var s=e.keyCode;A[s]=t,n.shift=e.shiftKey,n.ctrl=e.ctrlKey,n.alt=e.altKey,n.meta=e.metaKey},a=e=>{i(e,!0),"function"==typeof s&&s(e)},r=e=>{i(e,!1),"function"==typeof o&&o(e)};document.addEventListener("keydown",a,!1),document.addEventListener("keyup",r,!1);const l=s=>{for(var o=s.split("+"),i=0;i<o.length;i++){var a=o[i];if(!(-1!==e.indexOf(a)?n[a]:-1!=Object.keys(t).indexOf(a)?A[t[a]]:A[a.toUpperCase().charCodeAt(0)]))return!1}return!0};return{keyboardPressed:e=>Array.isArray(e)?e.findIndex(l)>-1:l(e),insertEvent:(e,t)=>{s=e,o=t},destroyEvent:()=>{document.removeEventListener("keydown",a,!1),document.removeEventListener("keyup",r,!1)}}},useBackground:e=>{const t=mt.findIndex((t=>t==e)),A=L(t<0?0:t),n=e=>{const t=mt[A.value];t&&(o(e,t),A.value++,A.value>=mt.length&&(A.value=0))},s=e=>["posX.jpeg","negX.jpeg","posY.jpeg","negY.jpeg","posZ.jpeg","negZ.jpeg"].map((t=>{return A=e,n=t,new URL(Object.assign({"../src/assets/imgs/sky/216/negX.jpeg":"/imgs/negX-ba52c8a0.jpeg","../src/assets/imgs/sky/216/negY.jpeg":"/imgs/negY-aebb71ea.jpeg","../src/assets/imgs/sky/216/negZ.jpeg":"/imgs/negZ-8a623aca.jpeg","../src/assets/imgs/sky/216/posX.jpeg":"/imgs/posX-0b453472.jpeg","../src/assets/imgs/sky/216/posY.jpeg":"/imgs/posY-106f8c18.jpeg","../src/assets/imgs/sky/216/posZ.jpeg":"/imgs/posZ-46bd2041.jpeg","../src/assets/imgs/sky/217/negX.jpeg":"/imgs/negX-07572c4d.jpeg","../src/assets/imgs/sky/217/negY.jpeg":"/imgs/negY-df29a995.jpeg","../src/assets/imgs/sky/217/negZ.jpeg":"/imgs/negZ-e9c2566d.jpeg","../src/assets/imgs/sky/217/posX.jpeg":"/imgs/posX-412387d5.jpeg","../src/assets/imgs/sky/217/posY.jpeg":"/imgs/posY-2f852e1e.jpeg","../src/assets/imgs/sky/217/posZ.jpeg":"/imgs/posZ-a0169caf.jpeg","../src/assets/imgs/sky/218/negX.jpeg":"/imgs/negX-c075849c.jpeg","../src/assets/imgs/sky/218/negY.jpeg":"/imgs/negY-efe68319.jpeg","../src/assets/imgs/sky/218/negZ.jpeg":"/imgs/negZ-f8c06141.jpeg","../src/assets/imgs/sky/218/posX.jpeg":"/imgs/posX-859ff54e.jpeg","../src/assets/imgs/sky/218/posY.jpeg":"/imgs/posY-542d8770.jpeg","../src/assets/imgs/sky/218/posZ.jpeg":"/imgs/posZ-9bf87017.jpeg","../src/assets/imgs/sky/219/negX.jpeg":"/imgs/negX-93298305.jpeg","../src/assets/imgs/sky/219/negY.jpeg":"/imgs/negY-ab7d0097.jpeg","../src/assets/imgs/sky/219/negZ.jpeg":"/imgs/negZ-8e003bb8.jpeg","../src/assets/imgs/sky/219/posX.jpeg":"/imgs/posX-42faf44a.jpeg","../src/assets/imgs/sky/219/posY.jpeg":"/imgs/posY-1539f2e4.jpeg","../src/assets/imgs/sky/219/posZ.jpeg":"/imgs/posZ-207804dc.jpeg","../src/assets/imgs/sky/220/negX.jpeg":"/imgs/negX-438b9f2b.jpeg","../src/assets/imgs/sky/220/negY.jpeg":"/imgs/negY-e9e0d506.jpeg","../src/assets/imgs/sky/220/negZ.jpeg":"/imgs/negZ-4d22fd12.jpeg","../src/assets/imgs/sky/220/posX.jpeg":"/imgs/posX-a78e0796.jpeg","../src/assets/imgs/sky/220/posY.jpeg":"/imgs/posY-f63703dd.jpeg","../src/assets/imgs/sky/220/posZ.jpeg":"/imgs/posZ-08a079c0.jpeg","../src/assets/imgs/sky/221/negX.jpeg":"/imgs/negX-4d93f94f.jpeg","../src/assets/imgs/sky/221/negY.jpeg":"/imgs/negY-8e9f1ba0.jpeg","../src/assets/imgs/sky/221/negZ.jpeg":"/imgs/negZ-59dbfaea.jpeg","../src/assets/imgs/sky/221/posX.jpeg":"/imgs/posX-1819325d.jpeg","../src/assets/imgs/sky/221/posY.jpeg":"/imgs/posY-fc440547.jpeg","../src/assets/imgs/sky/221/posZ.jpeg":"/imgs/posZ-1d29759b.jpeg","../src/assets/imgs/sky/222/negX.jpeg":"/imgs/negX-ee411de3.jpeg","../src/assets/imgs/sky/222/negY.jpeg":"/imgs/negY-0544ac3d.jpeg","../src/assets/imgs/sky/222/negZ.jpeg":"/imgs/negZ-92b76742.jpeg","../src/assets/imgs/sky/222/posX.jpeg":"/imgs/posX-098f1b9a.jpeg","../src/assets/imgs/sky/222/posY.jpeg":"/imgs/posY-d7813922.jpeg","../src/assets/imgs/sky/222/posZ.jpeg":"/imgs/posZ-c09fed75.jpeg","../src/assets/imgs/sky/223/negX.jpeg":"/imgs/negX-971935c3.jpeg","../src/assets/imgs/sky/223/negY.jpeg":"/imgs/negY-d3d51ab8.jpeg","../src/assets/imgs/sky/223/negZ.jpeg":"/imgs/negZ-c76bfdd8.jpeg","../src/assets/imgs/sky/223/posX.jpeg":"/imgs/posX-a1fef9f5.jpeg","../src/assets/imgs/sky/223/posY.jpeg":"/imgs/posY-93b527f3.jpeg","../src/assets/imgs/sky/223/posZ.jpeg":"/imgs/posZ-322f39df.jpeg","../src/assets/imgs/sky/224/negX.jpeg":"/imgs/negX-de81e2d2.jpeg","../src/assets/imgs/sky/224/negY.jpeg":"/imgs/negY-60e5367a.jpeg","../src/assets/imgs/sky/224/negZ.jpeg":"/imgs/negZ-b8b9ffd1.jpeg","../src/assets/imgs/sky/224/posX.jpeg":"/imgs/posX-4fc91917.jpeg","../src/assets/imgs/sky/224/posY.jpeg":"/imgs/posY-1e22430a.jpeg","../src/assets/imgs/sky/224/posZ.jpeg":"/imgs/posZ-f948bb21.jpeg","../src/assets/imgs/sky/225/negX.jpeg":"/imgs/negX-a708b91f.jpeg","../src/assets/imgs/sky/225/negY.jpeg":"/imgs/negY-0dfbb158.jpeg","../src/assets/imgs/sky/225/negZ.jpeg":"/imgs/negZ-2fc11854.jpeg","../src/assets/imgs/sky/225/posX.jpeg":"/imgs/posX-09f2a3c1.jpeg","../src/assets/imgs/sky/225/posY.jpeg":"/imgs/posY-a4956363.jpeg","../src/assets/imgs/sky/225/posZ.jpeg":"/imgs/posZ-858845b8.jpeg","../src/assets/imgs/sky/226/negX.jpeg":"/imgs/negX-375e5484.jpeg","../src/assets/imgs/sky/226/negY.jpeg":"/imgs/negY-4b8767fa.jpeg","../src/assets/imgs/sky/226/negZ.jpeg":"/imgs/negZ-bc039d21.jpeg","../src/assets/imgs/sky/226/posX.jpeg":"/imgs/posX-8a1b126b.jpeg","../src/assets/imgs/sky/226/posY.jpeg":"/imgs/posY-a7e935b8.jpeg","../src/assets/imgs/sky/226/posZ.jpeg":"/imgs/posZ-0af4e872.jpeg"})[`../src/assets/imgs/sky/${A}/${n}`],self.location).href;var A,n})),o=(e,t)=>{const A=s(t);if("function"==typeof e.setBgTexture)e.setBgTexture(A);else if(Array.isArray(A)){const t=(new ce).load(A);e.background=t}else e.background=(new y).load(A)};return{skys:mt,index:A,change:n,changeBackground:n,load:o,getBgGroup:s,backgroundLoad:o}},useModelLoader:(e={})=>{let t;const A=it({baseUrl:"",dracoPath:"/three/draco/gltf/",basisPath:"/three/basis/",modelSizeKB:1048576,colors:{normal:{color:8954293},runing:{color:3045368},error:{color:12717056}},loadCache:!0,colorMeshName:[],indexDB:{cache:!0}},e),n=Z({percentage:0,show:!1,isEnd:!1,list:[],total:0,loaded:0}),s={base:"base",device:"device",font:"font",sprite:"sprite",pipe:"pipe",warning:"warning",remote:"remote",local:"local",disabled:"disabled",spotlight:"spotlight"},o=new Map,i=new J;i.setDecoderPath(A.baseUrl+A.dracoPath);const a=new W;a.setDRACOLoader(i);const r=new H;r.setTranscoderPath(A.baseUrl+A.basisPath),a.setKTX2Loader(r),a.setMeshoptDecoder(V);const c=e=>{const t=e.loaded,A=n.total;let s=Number((t+n.loaded)/A*100);s>100&&(s=100),n.percentage=Number(s.toFixed(2))},d=(e,t,n,s)=>{if(!n)return;const{baseUrl:i,colorMeshName:a}=A,{mapUrl:r,key:l,mapMeshName:c,repeat:d=[1,1]}=e;let p;r&&c&&(p=(new y).load(Ye(r,i)),p.wrapS=B,p.wrapT=B,p.repeat.set(d[0],d[1]));const g=Ve(n);return g.traverse((e=>{e.isMesh&&p&&e.name.indexOf(c)>-1?e.material=new Ae({side:x,transparent:!0,opacity:0,map:p.clone()}):Ke(e,t,a||[])})),r&&c&&(g._mapMeshName_=c),g.animations=s,l&&o.set(l,g),g},p=(e,n=0)=>new Promise((s=>Te(void 0,void 0,void 0,(function*(){var o;A.indexDB.cache||s(null);const i=de.get(e);if(i)i instanceof ArrayBuffer?(c({loaded:i.byteLength}),a.parse(i,"",(t=>{de.add(e,t),s(t)}))):(c({loaded:n*A.modelSizeKB}),setTimeout((()=>{s(i)}),10));else{const n=yield Fe(t,(null===(o=A.indexDB)||void 0===o?void 0:o.tbName)||We.indexdb.tbName,e);if(n&&n.data){const e=n.data;"string"==typeof e?(c({loaded:e.length}),de.add(n.path,e),setTimeout((()=>{s(e)}),10)):(c({loaded:e.byteLength}),a.parse(e,"",(e=>{de.add(n.path,e),s(e)})))}else s(null)}})))),g=e=>{var n;if(!A.indexDB.cache)return;const s=de.get(e);if(s&&t){const o=(null===(n=A.indexDB)||void 0===n?void 0:n.tbName)||We.indexdb.tbName;t.transaction(o,"readwrite").objectStore(o).add({path:e,data:s})}},u=(e,t)=>{const{key:n,url:s="",size:o=0}=e,{baseUrl:i,colors:r}=A;return new Promise(((A,u)=>Te(void 0,void 0,void 0,(function*(){let m=r.normal[n]||r.normal.color;m=qe(m)[0];const h=Ye(s,i),f=yield p(h,o);if(f){const t=f.scene.children[0],n=d(e,m,t,f.animations);return void A(n)}let v=(h.split(".").pop()||"").toLowerCase();if("glb"!==v)throw new Error("模型类型错误,必须为 GLB 格式，当前格式："+v);a.load(h,(t=>{const n=t.scene.children;let s=new l;n.length>1?s.add(...n):s=n[n.length-1];const o=d(e,m,s,t.animations);g(h),A(o)}),(e=>{c(e),"function"==typeof t&&t(e)}),u)}))))},m=(e,t={})=>{t=it({color:57599,wireframe:!0,opacity:.5,filter:[],filterMatch:[]},t),e.traverse((e=>{var A;(null===(A=t.filter)||void 0===A?void 0:A.includes(e.name))||h(e.name,t.filterMatch)||e.isMesh&&(e.__material__||(e.__material__=e.material),e.material=new b({color:t.color,wireframe:t.wireframe,transparent:!0,opacity:t.opacity}))}))},h=(e="",t=[])=>t.filter((t=>e.indexOf(t)>-1)).length>0;return{progress:n,MODEL_MAP:s,loadModel:u,loadModels:(e,i,a)=>Te(void 0,void 0,void 0,(function*(){var r,l,d;yield Ne((null===(r=A.indexDB)||void 0===r?void 0:r.tbName)||We.indexdb.tbName,(null===(l=A.indexDB)||void 0===l?void 0:l.dbName)||We.indexdb.dbName,(null===(d=A.indexDB)||void 0===d?void 0:d.version)||We.indexdb.version).then((e=>(e&&(de.enabled=!0,t=e),e)));const m=e.length;if(!(0==m?(n.isEnd=!0,n.show=!1,0):(n.isEnd=!1,n.percentage=0,n.show=!0,1)))return;(e=>{for(let t=0;t<e.length;t++)n.total+=(e[t].size||0)*A.modelSizeKB})(e);let h=0;const f=()=>Te(void 0,void 0,void 0,(function*(){const t=e[h],{type:r=s.device,size:l=0}=t;switch(r){case s.device:case s.pipe:yield u(t,a);break;case s.sprite:(e=>{const{key:t,range:n={x:1,y:1},mapUrl:s=""}=e;let i=(new y).load(A.baseUrl+s),a=new Ie({map:i}),r=new Oe(a),l=n.x,c=n.y;r.scale.set(l,c,1),r.name="sprite",o.set(t,r)})(t);break;case s.font:yield((e,t)=>{const{url:n="",size:i=0}=e,{baseUrl:a}=A,r=Ye(n,a),l=new Le;return new Promise(((e,A)=>Te(void 0,void 0,void 0,(function*(){const n=yield p(r,i);if(n){const t=l.parse(JSON.parse(n));return o.set(s.font,t),void setTimeout((()=>{e(t)}),10)}l.load(r,(t=>{o.set(s.font,t),g(r),e(t)}),(e=>{c(e),"function"==typeof t&&t(e)}),A)}))))})(t,a);break;case s.warning:t.key=s.warning,yield u(t,a);break;case s.local:t.key=s.local,yield u(t,a);break;case s.disabled:t.key=s.disabled,yield u(t,a);break;case s.spotlight:(e=>{const{key:t,color:A=16777215,intensity:n=8,distance:s=10,angle:i=.2*Math.PI,penumbra:a=.2,decay:r=0}=e;let l=new ze(A,n,s,i,a,r);l.castShadow=!0,l.visible=!1,o.set(t,l)})(t)}h++,n.loaded+=l*A.modelSizeKB,h>=m?(n.percentage=100,n.isEnd=!0,i()):f()}));f()})),getModel:e=>o.get(e),virtualization:(e=[],t,A={})=>{const n=A.filter||[],s=A.filterMatch||[];if(e.length)for(let o=0;o<e.length;o++){const i=e[o];t.uuid===i.uuid||n.includes(i.name)||h(i.name,s)||m(i,A)}else m(t,A)},closeVirtualization:e=>{if(Array.isArray(e))for(let t=0;t<e.length;t++)e[t].traverse((e=>{e.isMesh&&e.__material__&&(e.material=e.__material__)}));else e.traverse((e=>{e.isMesh&&e.__material__&&(e.material=e.__material__)}))}}}});const{createCruise:yt,cruiseAnimate:wt,updateCruise:bt,bindEvent:xt,removeEvent:Bt}=gt(),{createFork:Et}=ut();class jt{constructor(e={}){ht.add(this);const t=lt;this.options=it(t,e),jt.total++,this.pointer={tsp:0,isClick:!1},st(this.options.container)?this.container=this.options.container:this.container=document.querySelector(this.options.container),this.options.width=this.container.offsetWidth,this.options.height=this.container.offsetHeight,this.scene=new pe,this.renderer=this.initRenderer(),this.baseCamera=this.initCamera(),this.controls=this.initControls(),this.init(),this.initCruise()}get camera(){const{visible:e,runing:t,auto:A}=this.options.cruise;return e&&this.cruiseCamera&&t?this.cruiseCamera:this.baseCamera}init(){this.initLight(),this.initGrid(),this.initAxes(),this.initModel()}run(){this.loop()}loop(){this.animationId=window.requestAnimationFrame((()=>{this.loop()})),this.animate(),this.modelAnimate()}animate(){var e;this.renderer&&this.renderer.render(this.scene,this.camera),this.options.controls.visible&&(null===(e=this.controls)||void 0===e||e.update()),wt(this.cruiseCamera),ge()}initModel(){}modelAnimate(){}initRenderer(){const{width:e,height:t,bgColor:A,bgUrl:n,env:s}=this.options,o=new ue(this.options.render);if(s&&this.setEnvironment(s),n?this.setBgTexture(n):this.setBgColor(A),this.options.fog.visible){const{color:e,near:t,far:A}=this.options.fog;this.scene.fog=new me(null!=e?e:this.scene.background,t,A)}return o.sortObjects=!0,o.shadowMap.enabled=!0,o.shadowMap.type=he,o.setSize(e,t),o.setPixelRatio(window.devicePixelRatio),this.container.appendChild(o.domElement),o}initLight(){const{ambientLight:e,directionalLight:t}=this.options;if(e.visible){const t=new fe(e.color,e.intensity);this.addObject(t)}if(t.visible){const e=this.createDirectionalLight(),[A=0,n=0,s=0]=t.position;if(e.position.set(A,n,s),this.addObject(e),t.helper){const t=new ve(e,1);this.addObject(t)}if(t.light2){const e=this.createDirectionalLight(!1),[A=0,n=0,s=0]=t.position2;if(e.position.set(A,n,s),this.addObject(e),t.helper){const t=new ve(e,1);this.addObject(t)}}}}createDirectionalLight(e=!0,t=2e3,A=4096,n=1,s=2e4){const{color:o,intensity:i}=this.options.directionalLight,a=new ye(o,i);if(e){a.shadow.mapSize.setScalar(A),a.shadow.bias=-1e-5,a.shadow.normalBias=.01,a.castShadow=e;const o=a.shadow.camera;o.near=n,o.far=s,o.top=o.right=t,o.left=o.bottom=-t,o.updateProjectionMatrix()}return a}initCamera(){const{width:e,height:t,camera:A}=this.options;let n=new we(36,e/t,A.near,A.far);if(A.orthogonal){let s=e/t,o=260;n=new be(-o*s,o*s,o,-o,A.near,A.far)}if(n.position.set(...A.position),n.lookAt(0,0,0),A.helper){const e=new xe(n);this.addObject(e)}return n}initControls(){const e=this.options.controls;if(!e.visible)return;const t=new Be(this.camera,this.renderer.domElement);return Object.keys(e).forEach((A=>{t[A]=e[A]})),t.target.set(0,0,0),t.saveState(),t}initCruise(){const{visible:e}=this.options.cruise;e&&(this.cruiseCamera=this.initCamera(),function(e,t,A,n){if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n}(this,ht,0,ft).call(this))}initGrid(){const e=this.options.grid;if(!e.visible)return;const{width:t,divisions:A,centerLineColor:n,gridColor:s,opacity:o,transparent:i,fork:a}=e,r=new Ee(t,A,n,s);if(r.material.opacity=o,r.material.transparent=i,this.grid=r,this.addObject(r),a){const t=Et(e);t.name="辅助交叉点",t._isGridFork_=!0,this.addObject(t)}}initAxes(){if(!this.options.axes.visible)return;const e=new je(this.options.axes.size);this.addObject(e)}createGround(e=5e3,t,A=11721691){const n=new w(e,t=void 0===t?e:t),s=new a({color:A,shininess:10}),o=new r(n,s);return o.name="ground",o.rotation.x=1.5*Math.PI,o.receiveShadow=!0,o}createClock(){this.clock=new _e}setCruisePoint(e){this.options.cruise.points=e,this.createCruise()}createCruise(){const{visible:e,points:t,alway:A}=this.options.cruise;if(!e)return;if(this.cruiseGroup&&this.disposeObj(this.cruiseGroup),xt(),!t||0==t.length)return;const n=yt(this.options.cruise,this.renderer);this.cruiseGroup=n,n.visible=A,this.addObject(n)}toggleCruise(e){let{visible:t,runing:A,auto:n,alway:s}=this.options.cruise;t&&(A=null!=e?e:A,this.options.cruise.runing=!A,this.options.cruise.enabled=!A,this.controls&&(this.controls.enabled=n||A),this.cruiseGroup&&!s&&(this.cruiseGroup.visible=!A),bt(this.options.cruise))}toggleCruiseDepthTest(e){this.cruiseGroup&&this.cruiseGroup.traverse((t=>{(t.isMesh||t.isLine)&&(t.material.depthTest=null!=e?e:!t.material.depthTest)}))}setScale(e){this.options.scale=e}setEnvironment(e){(new Ce).load(Ye(e,this.options.baseUrl),(e=>{e.mapping=Me,this.scene.environment=e}))}setBgTexture(e){if(Array.isArray(e)){const t=(new ce).load(Ye(e,this.options.baseUrl));this.scene.background=t}else this.scene.background=(new y).load(Ye(e))}setBgColor(e){this.scene.background=e?new m(e):null}bindEvent(){const e=this.renderer.domElement;e.addEventListener("dblclick",this.onDblclick.bind(this)),e.addEventListener("pointerdown",this.onPointerDown.bind(this)),e.addEventListener("pointermove",this.onPointerMove.bind(this)),e.addEventListener("pointerup",this.onPointerUp.bind(this))}onDblclick(e){}onPointerDown(e){this.pointer.isClick=!0,this.pointer.tsp=e.timeStamp}onPointerMove(e){}onPointerUp(e){this.pointer.isClick=!1}exportImage(){const e=document.createElement("a");e.download="render.png",e.href=this.renderer.domElement.toDataURL().replace("image/png","image/octet-stream"),e.click()}getPosition(){var e;return{position:this.camera.position,target:null===(e=this.controls)||void 0===e?void 0:e.target}}isCameraMove(e,t=1){const A=this.camera.position;return Math.abs(A.x-e.x)<t&&Math.abs(A.y-e.y)<t&&Math.abs(A.z-e.z)<t}addObject(...e){this.scene.add(...e)}controlSave(){var e;null===(e=this.controls)||void 0===e||e.saveState()}controlReset(){var e;null===(e=this.controls)||void 0===e||e.reset(),this.toggleCruise(!0)}getValidTargetPosition(e,t,A,n={x:-104,y:7,z:58}){const s=t||e.to||n,o=A||e.target||{x:0,y:0,z:0},i=this.controls;return i&&i.target&&i.target.set(o.x,o.y,o.z),s}resize(){this.options.width=this.container.offsetWidth||window.innerWidth,this.options.height=this.container.offsetHeight||window.innerHeight;const{width:e,height:t,camera:A}=this.options,n=e/t;A.orthogonal||(this.baseCamera.aspect=n),this.baseCamera.updateProjectionMatrix(),this.cruiseCamera&&(A.orthogonal||(this.cruiseCamera.aspect=n),this.cruiseCamera.updateProjectionMatrix()),this.renderer.setSize(e,t)}stopAnimate(){window.cancelAnimationFrame(this.animationId)}clear(e){e&&e.traverse&&(e.traverse((e=>{e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose(),null==e||e.clear()})),null==e||e.clear())}disposeObj(e){e&&e.traverse&&(e.traverse((e=>{e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose(),null==e||e.clear()})),null==e||e.clear(),this.scene.remove(e))}dispose(){var e;Bt(),this.stopAnimate();try{de.clear(),this.disposeObj(this.scene),this.scene.clear(),this.renderer.dispose(),this.renderer.forceContextLoss();let t=this.renderer.domElement.getContext("webgl");t&&(null===(e=t.getExtension("WEBGL_lose_context"))||void 0===e||e.loseContext()),this.disposeObj(this.cruiseGroup),this.disposeObj(this.grid),this.controls&&this.controls.dispose(),this.scene=void 0,this.renderer=void 0,this.baseCamera=void 0,this.cruiseCamera=void 0,this.controls=void 0,this.grid=void 0,this.cruiseGroup=void 0,this.container.innerHTML=""}catch(t){}}}ht=new WeakSet,ft=function(){const e=this.options.cruise;e.enabled=!1,e.runing=!1,e.baseUrl&&(e.baseUrl=this.options.baseUrl),e.factor=1},jt.total=0;const _t=Object.freeze(Object.defineProperty({__proto__:null,Hooks:vt,Scene:jt,Utils:rt},Symbol.toStringTag,{value:"Module"})),Ct=e=>({resize:()=>{const t=()=>null==e?void 0:e.resize();Pe((()=>De().sidebar.opened),(()=>{setTimeout(t,300)})),window.addEventListener("resize",t,!1),Ue((()=>{null==e||e.dispose(),window.removeEventListener("resize",t)}))}});export{_t as T,vt as d,rt as e,Ct as u,jt as v};
