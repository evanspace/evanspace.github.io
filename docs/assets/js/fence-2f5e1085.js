import{b6 as e,bw as t,bs as n,d6 as a,bA as s,c0 as r,bo as o,bx as p,bp as c,bc as w}from"./vendor-4ee42cfe.js";import{a as f}from"./scene-resize-41508b8f.js";const i=()=>{const i=[1,.8],l=.2,d=(new e).load(f("fenceMap0.png"),(e=>{e.wrapT=t,e.repeat.x=i[0],e.repeat.y=i[1],e.offset.y=l})),b=(new e).load(f("fenceMap1.png"),(e=>{e.wrapT=t,e.repeat.x=i[0],e.repeat.y=i[1],e.offset.x=l})),y=(new e).load(f("fenceMap2.png"),(e=>{e.wrapS=t,e.wrapT=t})),u=(e,t,a)=>{const f=[];for(let n=0;n<t.length;n++){const a=t[n];f.push(...e[a])}const i=new s,l=new Float32Array(f);i.setAttribute("position",new r(l,3));const u=t.length,g=new r(new Float32Array(3*u),3);i.setAttribute("normal",g);for(let n=0;n<u;n++)g.setXYZ(n,0,0,0);const m=new r(new Float32Array([1,1,0,1,0,0,0,0,1,0,1,1]),2);i.setAttribute("uv",m);const A=new o({color:a,map:d,transparent:!0,blending:p,side:c}),h=new o({color:a,map:b,transparent:!0,blending:p,side:c});var x=new o({color:a,map:y,opacity:.5,transparent:!0,side:c});const v=new w(i,A),F=new n,M=new w(i,h),T=new w(i,x);return F.add(v,M,T),F};return{createFence:(e,t=11009923)=>{const s=new n;var r=new a(e,t);r.update();const o=r.geometry.getAttribute("position").array,p=[];for(let n=0;n<o.length;n+=3){const e=o[n],t=o[n+1],a=o[n+2];p.push([e,t,a])}const c=u(p,[0,1,2,2,3,0],t),w=u(p,[4,5,6,6,7,4],t),f=u(p,[4,0,3,3,7,4],t),i=u(p,[1,5,6,6,2,1],t);return s.add(c,w,f,i),s},fenceAnimate:(e=1)=>{const t=.008*e;if(d){let e=d.offset.y-t;e<0&&(e=l),d.offset.y=e}if(b){let e=b.offset.y-t;e<0&&(e=l),b.offset.y=e}}}};export{i as u};
