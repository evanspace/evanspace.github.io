var t=Object.defineProperty,e=(e,s,n)=>(((e,s,n)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n})(e,"symbol"!=typeof s?s+"":s,n),n);import{m as s,u as n}from"./scene-resize-8ac40260.js";import{cZ as i,bn as a,de as o,c$ as r,bm as h,df as c,d5 as l,bj as m,bf as d,dU as p,dV as b,e as u,i as w,l as y,o as f,g,h as v,n as M}from"./vendor-29458cef.js";import{_ as A}from"./index-c9e1fac8.js";class x extends s{constructor(t){super(t),e(this,"mesh"),e(this,"raycaster"),e(this,"position"),e(this,"line"),this.mesh=(()=>{let t=new o;const e=new Float32Array(45e3),s=new Float32Array(45e3),n=new Float32Array(45e3),i=new r,a=500,p=250,b=new h,u=new h,w=new h,y=new h,f=new h;for(let o=0;o<e.length;o+=9){const t=Math.random()*a-p,r=Math.random()*a-p,h=Math.random()*a-p,c=t+80*Math.random()-40,l=r+80*Math.random()-40,m=h+80*Math.random()-40,d=t+Math.random()*a-p,g=r+Math.random()*a-p,v=h+Math.random()*a-p,M=t+Math.random()*a-p,A=r+Math.random()*a-p,x=h+Math.random()*a-p;e[o]=c,e[o+1]=l,e[o+2]=m,e[o+3]=d,e[o+4]=g,e[o+5]=v,e[o+6]=M,e[o+7]=A,e[o+8]=x,b.set(c,l,m),u.set(d,g,v),w.set(M,A,x),y.subVectors(w,u),f.subVectors(b,u),y.cross(f),y.normalize();const _=y.x,j=y.y,F=y.z;s[o]=_,s[o+1]=j,s[o+2]=F,s[o+3]=_,s[o+4]=j,s[o+5]=F,s[o+6]=_,s[o+6]=j,s[o+7]=F;const z=t/a+.5,E=r/a+.5,O=h/a+.5;i.setRGB(z,E,O),n[o]=i.r,n[o+1]=i.g,n[o+2]=i.b,n[o+3]=i.r,n[o+4]=i.g,n[o+5]=i.b,n[o+6]=i.r,n[o+7]=i.g,n[o+8]=i.b}t.setAttribute("position",new c(e,3)),t.setAttribute("normal",new c(s,3)),t.setAttribute("color",new c(n,3));const g=new l({color:11184810,specular:16777215,shininess:250,side:m,vertexColors:!0}),v=new d(t,g);return v.name="缓冲几何图形",v})(),this.raycaster=new i,this.position=new a,this.line=(()=>{const t=new o;t.setAttribute("position",new c(new Float32Array(12),3));const e=new p({color:16777215,transparent:!0});return new b(t,e)})(),this.bindEvent()}bindEvent(){this.addObject(this.mesh),this.addObject(this.line),this.renderer.domElement.addEventListener("positionmove",this.onPointerMove.bind(this))}onPointerMove(t){const e=this.container,s=e.getBoundingClientRect()||{left:0,top:0},n=this.options.scale;this.position.x=(t.clientX-s.left)/(e.clientWidth*n)*2-1,this.position.y=-(t.clientY-s.top)/(e.clientHeight*n)*2+1}modelAnimate(){const t=.001*Date.now();this.mesh.rotation.x=.15*t,this.mesh.rotation.y=.25*t,this.raycaster.setFromCamera(this.position,this.camera);const e=this.raycaster.intersectObject(this.mesh);if(e.length>0){const t=e[0].face,s=this.line.geometry.attributes.position,n=this.mesh.geometry.attributes.position;s.copyAt(0,n,t.a),s.copyAt(1,n,t.b),s.copyAt(2,n,t.c),s.copyAt(3,n,t.a),this.mesh.updateMatrix(),this.line.geometry.applyMatrix4(this.mesh.matrix),this.line.visible=!0}else this.line.visible=!1}}const _=A(u({__name:"index",setup(t){const e=w(),s={camera:{position:[0,1e3,2e3]},render:{alpha:!0},grid:{visible:!0},axes:{visible:!0}};let i;return y((()=>{s.container=e.value,i=new x(s),i.run(),n(i).resize()})),(t,s)=>(f(),g("div",{class:M([t.$style.page,"h-100 o-h"])},[v("div",{class:"h-100",ref_key:"containerRef",ref:e},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_12f6y_2"}}]]);export{_ as default};
