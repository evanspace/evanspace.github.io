var t=Object.defineProperty,e=(e,s,n)=>(((e,s,n)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n})(e,"symbol"!=typeof s?s+"":s,n),n);import{bm as s,bl as n,bs as i,bb as a,bd as o,b$ as r,b3 as h,bG as l,b4 as c,bt as m,bu as b,e as d,j as p,m as u,o as y,g as w,h as g,n as v}from"./vendor-2f79a1da.js";import{T as M,u as f}from"./resize-7c86c92f.js";import{_ as A}from"./common-23e9c4bd.js";class x extends M{constructor(t){super(t),e(this,"mesh"),e(this,"raycaster"),e(this,"pointer"),e(this,"line"),this.mesh=(()=>{let t=new i;const e=new Float32Array(45e3),s=new Float32Array(45e3),n=new Float32Array(45e3),m=new a,b=500,d=250,p=new o,u=new o,y=new o,w=new o,g=new o;for(let i=0;i<e.length;i+=9){const t=Math.random()*b-d,a=Math.random()*b-d,o=Math.random()*b-d,r=t+80*Math.random()-40,h=a+80*Math.random()-40,l=o+80*Math.random()-40,c=t+Math.random()*b-d,v=a+Math.random()*b-d,M=o+Math.random()*b-d,f=t+Math.random()*b-d,A=a+Math.random()*b-d,x=o+Math.random()*b-d;e[i]=r,e[i+1]=h,e[i+2]=l,e[i+3]=c,e[i+4]=v,e[i+5]=M,e[i+6]=f,e[i+7]=A,e[i+8]=x,p.set(r,h,l),u.set(c,v,M),y.set(f,A,x),w.subVectors(y,u),g.subVectors(p,u),w.cross(g),w.normalize();const _=w.x,j=w.y,F=w.z;s[i]=_,s[i+1]=j,s[i+2]=F,s[i+3]=_,s[i+4]=j,s[i+5]=F,s[i+6]=_,s[i+6]=j,s[i+7]=F;const z=t/b+.5,E=a/b+.5,O=o/b+.5;m.setRGB(z,E,O),n[i]=m.r,n[i+1]=m.g,n[i+2]=m.b,n[i+3]=m.r,n[i+4]=m.g,n[i+5]=m.b,n[i+6]=m.r,n[i+7]=m.g,n[i+8]=m.b}t.setAttribute("position",new r(e,3)),t.setAttribute("normal",new r(s,3)),t.setAttribute("color",new r(n,3));const v=new h({color:11184810,specular:16777215,shininess:250,side:l,vertexColors:!0}),M=new c(t,v);return M.name="缓冲几何图形",M})(),this.raycaster=new s,this.pointer=new n,this.line=(()=>{const t=new i;t.setAttribute("position",new r(new Float32Array(12),3));const e=new m({color:16777215,transparent:!0});return new b(t,e)})(),this.bindEvent()}bindEvent(){this.addObject(this.mesh),this.addObject(this.line),this.renderer.domElement.addEventListener("pointermove",this.onPointerMove.bind(this))}onPointerMove(t){const e=this.container,s=e.getBoundingClientRect()||{left:0,top:0},n=this.options.scale;this.pointer.x=(t.clientX-s.left)/(e.clientWidth*n)*2-1,this.pointer.y=-(t.clientY-s.top)/(e.clientHeight*n)*2+1}modelAnimate(){const t=.001*Date.now();this.mesh.rotation.x=.15*t,this.mesh.rotation.y=.25*t,this.raycaster.setFromCamera(this.pointer,this.camera);const e=this.raycaster.intersectObject(this.mesh);if(e.length>0){const t=e[0].face,s=this.line.geometry.attributes.position,n=this.mesh.geometry.attributes.position;s.copyAt(0,n,t.a),s.copyAt(1,n,t.b),s.copyAt(2,n,t.c),s.copyAt(3,n,t.a),this.mesh.updateMatrix(),this.line.geometry.applyMatrix4(this.mesh.matrix),this.line.visible=!0}else this.line.visible=!1}}const _=A(d({__name:"index",setup(t){const e=p(),s={camera:{position:[0,1e3,2e3]},grid:{visible:!0},axes:{visible:!0}};let n;return u((()=>{s.container=e.value,n=new x(s),n.run(),f(n).resize()})),(t,s)=>(y(),w("div",{class:v([t.$style.page,"h-100 o-h"])},[g("div",{class:"h-100",ref_key:"containerRef",ref:e},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_12f6y_2"}}]]);export{_ as default};
