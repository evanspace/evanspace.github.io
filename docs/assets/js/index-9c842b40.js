var t=Object.defineProperty,e=(e,i,o)=>(((e,i,o)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o})(e,"symbol"!=typeof i?i+"":i,o),o);import{bf as i,be as o,b7 as s,bs as n,d5 as r,cz as a,c,cn as l,bh as h,e as d,Y as u,i as p,f as m,l as _,o as g,g as f,h as y,u as b,n as v,q as k,F as C,r as x,t as w,a7 as G,a8 as j,m as A,p as D,I as O,a9 as S,B as P,ak as T,aa as M}from"./vendor-e22d82ce.js";import{u as L,t as z}from"./css2d-4c70c4b7.js";import{T as E,u as B}from"./scene-resize-97ffaa82.js";import{u as $}from"./raycaster-42f9caa4.js";import{u as N,a as I}from"./move-animate-eb48df46.js";import{u as F}from"./fence-912e0579.js";import{j as R,k as U,l as H,c as W,d as K,b as J}from"./model-dac7364a.js";import{e as V,A as q,_ as Y}from"./index-dadfedf9.js";import{u as Z}from"./background-1400bbec.js";import{u as Q}from"./model-loader-e32ce951.js";import"./config-9a637eb0.js";import"./posZ-95d90af9.js";const X="ANCHOR_POS",tt="ANCHOR_TARGET",et="MAIN_SCENE",it="ROBOT",ot="CHARACTER",st="WAIT_LIFT",nt="LIGHT_SWITCH",rt="access_gate",at="GATE_SWITCH",ct=.1,lt=146,ht=104,dt=[];for(let $t=0;$t<5;$t++)dt.push([lt-20*$t,ct,20*((0==$t?1:$t)-1)-104]),dt.push([lt-20*$t,ct,ht-20*$t]),dt.push([20*$t-146,ct,ht-20*$t]),dt.push([20*$t-146,ct,20*$t-104]);const ut=300,{raycaster:pt,pointer:mt,update:_t,style:gt}=$(),{initCSS2DRender:ft,createCSS2DDom:yt}=L(),{createDiffusion:bt,updateDiffusion:vt}=N(),{createMove:kt,moveAnimate:Ct}=I(),{createFence:xt,fenceAnimate:wt}=F(),{keyboardPressed:Gt,destroyEvent:jt,insertEvent:At}=(()=>{const t=["shift","ctrl","alt","meta"],e={left:37,up:38,right:39,down:40,space:32,pageup:33,pagedown:34,tab:9},i={},o={};let s,n;const r=(t,e)=>{var s=t.keyCode;i[s]=e,o.shift=t.shiftKey,o.ctrl=t.ctrlKey,o.alt=t.altKey,o.meta=t.metaKey},a=t=>{r(t,!0),"function"==typeof s&&s(t)},c=t=>{r(t,!1),"function"==typeof n&&n(t)};document.addEventListener("keydown",a,!1),document.addEventListener("keyup",c,!1);const l=s=>{for(var n=s.split("+"),r=0;r<n.length;r++){var a=n[r];if(!(-1!==t.indexOf(a)?o[a]:-1!=Object.keys(e).indexOf(a)?i[e[a]]:i[a.toUpperCase().charCodeAt(0)]))return!1}return!0};return{keyboardPressed:t=>Array.isArray(t)?t.findIndex(l)>-1:l(t),insertEvent:(t,e)=>{s=t,n=e},destroyEvent:()=>{document.removeEventListener("keydown",a,!1),document.removeEventListener("keyup",c,!1)}}})(),{checkCollide:Dt}=(()=>{const t=new i,e=new o(0,2,0);return{checkCollide:(i,s,n,r=!0,a=e)=>{const c=s.clone().add(a),l=new o;i.getWorldDirection(l),l.normalize(),t.ray.origin.copy(c),t.ray.direction.copy(l);return t.intersectObjects(n,r)}}})(),Ot="FULL",St="NPC";class Pt extends E{constructor(t,i){super(t),e(this,"buildingGroup"),e(this,"anchorGroup"),e(this,"dotGroup"),e(this,"lightGroup"),e(this,"extend"),e(this,"css2DRender"),e(this,"mouseClickDiffusion"),e(this,"character"),e(this,"clock"),e(this,"currentSight"),e(this,"historyTarget"),e(this,"historyCameraPosition"),e(this,"animateModels"),e(this,"moveFactor",1),e(this,"fence"),this.extend=i,this.css2DRender=ft(this.options,this.container),this.css2DRender.domElement.className="three-scene__dot-wrap",this.mouseClickDiffusion=bt(4,void 0,6),this.mouseClickDiffusion.rotation.x=.5*-Math.PI,this.mouseClickDiffusion.position.y=.5,this.mouseClickDiffusion.visible=!1,this.addObject(this.mouseClickDiffusion),this.clock=new s,this.currentSight=Ot,this.historyTarget=new o,this.historyCameraPosition=new o,this.animateModels=[],this.bindEvent(),this.addBuildingGroup(),this.addAnchorGroup(),this.addDotGroup(),this.addLightGroup()}addBuildingGroup(){const t=new n;t.name="建筑组",this.buildingGroup=t,this.addObject(t)}clearBuilding(){this.buildingGroup&&this.disposeObj(this.buildingGroup),this.animateModels=[],this.addBuildingGroup(),this.clearAnchor(),this.clearDot()}addBuilding(...t){this.buildingGroup&&this.buildingGroup.add(...t)}addAnchorGroup(){const t=new n;t.name="锚点组",this.anchorGroup=t,this.addObject(t)}clearAnchor(){this.anchorGroup&&this.disposeObj(this.anchorGroup),this.addAnchorGroup()}addAnchor(t){this.anchorGroup&&this.anchorGroup.add(t);const{x:e,y:i,z:o}=t.position;R(t,[e,i,o],.2,8)}addDotGroup(){const t=new n;t.name="点位组",this.dotGroup=t,this.scene.add(t)}clearDot(){this.dotGroup&&this.disposeObj(this.dotGroup),this.addDotGroup()}addDot(t,e){const i=t.position,{size:o,color:s}=t.font||{},{x:n=0,y:r=0,z:a=0}=i||{},c=yt({name:`\n        <div class="bg"></div>\n        <span class="inner" style="${null!=o?`font-size: ${"string"==typeof o?o:o+"px"};`:""} ${null!=s?`color: ${s}`:""}"></span>\n      `,className:"dot-2D-label",position:[n,r,a],onClick:e});return c.name=t.name,c.data=t,c._position_={x:n,y:r,z:a},this.dotGroup.add(c),c}addLightGroup(){const t=new n;t.name="灯光组",this.lightGroup=t,this.addObject(t)}clearLightGroup(){this.lightGroup&&this.disposeObj(this.lightGroup),this.addLightGroup()}addLight(t,e,i){if(this.lightGroup){e.name=t.name;const{to:o={x:0,y:0,z:0}}=t;if(e.target.position.set(o.x,o.y,o.z),this.lightGroup.add(e),i){const t=new r(e,e.color);this.lightGroup.add(t)}}}addCharacter(t,e){const{x:i,y:o,z:s}=e;t.position.set(i,o,s),this.character=t;const n=t.animations,r=new a(t),c={};for(let a=0;a<n.length;a++){const t=n[a],e=r.clipAction(t);c[t.name]=e}c.Dance.play();const l=c.Walking;t.extra={mixer:r,actions:c,runging:l},this.addObject(t);const h=["W","S"].map((t=>t.toUpperCase().charCodeAt(0)));At((e=>{t.__runing__||h.includes(e.keyCode)&&l.play()}),(e=>{t.__runing__||h.includes(e.keyCode)&&l.stop()}))}toggleSight(){if(this.judgeCruise())return;const t=this.currentSight==Ot?St:Ot;this.currentSight=t;const e=t===St;this.controls.maxDistance=e?10:800,this.controls.screenSpacePanning=!e,this.controls.enablePan=!e,this.controls.maxPolarAngle=Math.PI*(e?.8:.48);const i=this.character.position,s=new o(0,1.5,0);if(e){c.success({message:"鼠标点击地面移动，或键盘 W、S 前后移动，A、D调整左右方向！",duration:15e3}),this.historyTarget=this.controls.target.clone(),this.historyCameraPosition=this.camera.position.clone();const t=i.clone().add(s);this.camera.lookAt(t)}else this.camera.position.copy(this.historyCameraPosition),this.camera.lookAt(i);const n=(e?i:this.historyTarget).clone().add(s);this.controls.target.copy(n)}isPerspectives(){return this.currentSight==St}characterAccelerate(t=1){this.moveFactor+=t,this.moveFactor>=10?this.moveFactor=10:this.moveFactor<=1&&(this.moveFactor=1),c.success({message:"人物速度："+this.moveFactor,grouping:!0})}setControlTarget(t){this.controls.target.copy(t.clone().add(new o(0,1.5,0))),this.camera.lookAt(this.controls.target)}waitLift(t,e,i){var o;const s=this.scene.getObjectByName(e),n=null==(o=t.data)?void 0:o.to;if(!s||!n)return;const r=s.position;if(n.y!=r.y){const o=s.__bind_lift__;void 0!==o&&this.openTheDoubleSlidingDoor({data:{bind:o}},200,!1),this.openTheDoubleSlidingDoor({data:{bind:e}},4,!1).then((()=>{new l(r).to({y:n.y},1500).delay(0).start().onUpdate((t=>{i&&(this.character.position.y=t.y,this.camera.position.y=t.y,this.setControlTarget(this.character.position))})).onComplete((()=>{s.__bind_lift__=t.data.bind,this.openLift(t,e)}))}))}else this.openLift(t,e)}openLift(t,e){this.openTheDoubleSlidingDoor(t,60),this.openTheDoubleSlidingDoor({data:{bind:e}},1.2)}lightSwitch(t){var e;this.lightGroup.getObjectsByProperty("name",null==(e=t.data)?void 0:e.bind).forEach((t=>{t.visible=!t.visible}))}openTheDoubleSlidingDoor(t,e=400,i){const s=this.scene.getObjectByName(t.data.bind);if(!s)return Promise.reject();const n=s.children.find((t=>t.name.indexOf("左")>-1)),r=s.children.find((t=>t.name.indexOf("右")>-1)),a=n.position,c=r.position;return null==s.__open__&&(n.__position__=(new o).copy(a),r.__position__=(new o).copy(c)),s.__open__=void 0!==i?i:!s.__open__,new Promise((t=>{const i=r.__position__.x+(s.__open__?e:0);if(c.x===i)return t(s);new l(a).to({x:n.__position__.x+(s.__open__?-e:0)},1e3).delay(0).start(),new l(c).to({x:i},1e3).delay(0).start().onComplete((()=>{t(s)}))}))}openGate(t){const e=this.scene.getObjectByName(t.data.bind);if(!e)return;clearTimeout(t.__timer__);const i=e.getObjectByName("左-玻璃"),s=e.getObjectByName("右-玻璃"),n=i.position,r=s.position;null==e.__open__&&(i.__position__=(new o).copy(n),s.__position__=(new o).copy(r)),e.__open__=!e.__open__;new l(i.rotation).to({z:e.__open__?.5*Math.PI:0},1500).delay(0).start(),new l(s.rotation).to({z:e.__open__?.5*-Math.PI:0},1500).delay(0).start(),e.__open__&&(t.__timer__=setTimeout((()=>{this.openGate(t)}),3500))}mouseClickGround(t,e){if(this.currentSight!==St)return Promise.reject();const i=this.character;if(!i)return Promise.reject();const{runing:o}=this.options.cruise;if(o)return Promise.reject();const s=t.point,n=this.mouseClickDiffusion,{runging:r}=i.extra;return r.play(),n.position.copy(s),n.visible=!0,i.__runing__=!0,new Promise((o=>{kt(i,s,((o,s)=>{this.setControlTarget(o),this.checkCharacterCollide(o,t.object.name===e?2:.14)&&(s(),r.stop(),i.__runing__=!1,n.visible=!1)}),(t=>{this.setControlTarget(t),r.stop(),i.__runing__=!1,n.visible=!1,o(i)}))}))}checkCharacterCollide(t,e=.14){const i=Dt(this.character,t,this.buildingGroup.children,!0,new o(0,e,0));if(i.length){if(i[0].distance<.2)return c.warning({message:"撞到了！",grouping:!0}),!0}}cameraLookatMoveTo(t){U(this.camera,t,this.controls.target)}judgeCruise(){return!!this.options.cruise.runing&&(c.warning({message:"请退出巡航！",grouping:!0}),!0)}addModelAnimate(t,e=[],i=!0,o=1){if(!e.length)return;const s=new a(t),n=e.reduce(((t,e)=>{const n=e.name||"";return t[n]=s.clipAction(e),i&&t[n].play(),t[n].timeScale=o,t}),{});t.__action__=n,t.__mixer__=s,this.animateModels.push(t)}cameraTransition(t){var e;if(this.judgeCruise())return;if(this.mouseClickDiffusion.visible)return void c.warning({message:"人物移动中，不可操作！",grouping:!0});this.isPerspectives()&&this.toggleSight();const{to:i,target:o=t.position}=t.data;if(!i)return;this.isCameraMove(i)||H(this.controls,this.camera,i,o);const{bind:s}=t.data;if(!s)return;const n=null==(e=this.buildingGroup)?void 0:e.getObjectByName(s);this.addFence(n)}addFence(t){if(this.fence&&(this.disposeObj(this.fence),this.fence=void 0),t){const e=xt(t,5439406);this.fence=e,this.addObject(e)}}modelAnimate(){this.css2DRender.render(this.scene,this.camera),"function"==typeof this.extend.animateCall&&this.extend.animateCall(),this.restoreAnchorMaterial();let t=this.clock.getDelta();if(this.animateModels.length&&this.animateModels.forEach((e=>{e.__mixer__&&e.__mixer__.update(t)})),this.anchorGroup.children.forEach((e=>{e.__mixer__&&e.__mixer__.update(t)})),this.character){this.character.extra.mixer.update(t),Ct(.2*this.moveFactor)}if(this.mouseClickDiffusion.visible&&vt(),wt(),this.isPerspectives()&&!this.character.__runing__){const e=10*t,i=.2*Math.PI*t,s=this.character,n=Gt("S");if(Gt("W")||n){const t=new o;s.getWorldDirection(t);const i=t.clone().multiplyScalar(n?-e:e),r=s.position.clone().add(i);this.checkCharacterCollide(r)||(s.position.copy(r),this.setControlTarget(s.position))}Gt("A")?s.rotation.y+=i:Gt("D")&&(s.rotation.y-=i)}}onPointerMove(t){this.checkIntersectObjects(t)}onPointerUp(t){var e;super.onPointerUp(t);const i=t.timeStamp-this.pointer.tsp<ut;2==t.button?i&&"function"==typeof(null==(e=this.extend)?void 0:e.onClickRight)&&this.extend.onClickRight(t):0==t.button?i&&this.checkIntersectObjects(t):t.button}checkIntersectObjects(t){var e,i,o;const s=this.container,n=this.options.scale;_t(t,s,n);let r="pointerdown"==t.type||"pointerup"==t.type;const a=this.buildingGroup.children.filter((t=>t.visible&&(r||t.__ground__))).concat(this.anchorGroup.children);pt.setFromCamera(mt,this.camera);let c=pt.intersectObjects(a,r);if(r)if(s.style.cursor="auto",c.length){const t=c[0],o=t.object,s="string"==typeof o.name&&(this.extend.groundMeshName||[]).some((t=>o.name.indexOf(t)>-1)),n=this.findParentGroup(o);if(s&&"function"==typeof(null==(e=this.extend)?void 0:e.onClickGround)&&this.extend.onClickGround(n,t),!n)return;"function"==typeof(null==(i=this.extend)?void 0:i.onClickLeft)&&this.extend.onClickLeft(n,t)}else"function"==typeof(null==(o=this.extend)?void 0:o.onClickLeft)&&this.extend.onClickLeft();else this.hoverAnchor(c)}hoverAnchor(t){if("function"==typeof this.extend.onHoverAnchor&&this.extend.onHoverAnchor(t[0],gt),t.length){const e=t[0].object;if(this.container.style.cursor=e._isAnchor_?"pointer":"auto",!e._isAnchor_)return;const i=e.material;void 0===e.__mat_color__&&(e.__mat_color__=i.color),i.color=new h(16715760),this.anchorGroup.children.forEach((t=>{t.__change_color__=t.uuid===e.uuid}))}else this.container.style.cursor="auto",this.anchorGroup.children.forEach((t=>{t.__change_color__=!1}))}restoreAnchorMaterial(){this.anchorGroup.traverse((t=>{t.isSprite&&!t.__change_color__&&t.__mat_color__&&(t.material.color=t.__mat_color__)}))}findParentGroup(t){const e=t=>{if(t._isBuilding_)return t;let i=t.parent;return i?i&&i._isBuilding_?i:e(i):void 0};return e(t)}getAll(){return this.buildingGroup.children.concat(this.dotGroup.children)}resize(){super.resize();const{width:t,height:e}=this.options;this.css2DRender.setSize(t,e)}dispose(){jt(),this.animateModels=[],this.disposeObj(this.buildingGroup),this.disposeObj(this.character),this.disposeObj(this.dotGroup),this.disposeObj(this.anchorGroup),this.disposeObj(this.fence),this.disposeObj(this.lightGroup),this.disposeObj(this.mouseClickDiffusion),this.clock=null,this.css2DRender=null,this.buildingGroup=null,this.character=null,this.dotGroup=null,this.anchorGroup=null,this.lightGroup=null,this.fence=null,this.mouseClickDiffusion=null,this.extend={},super.dispose()}}const Tt=(t,e)=>{const i=40*Math.random();return void 0!==i&&(t.value=i),t.show=Math.random()>.5,t.value=Number(Number(t.value||0).toFixed(2)),{value:t.value,show:t.show,font:{...t.font||{},color:"#"+(16777215+1e6*i).toString(16).substring(0,6)}}},Mt={class:"scene-operation"},Lt=["onClick"],zt=["innerHTML"],Et="单元1号电梯",Bt=Y(d({__name:"index",setup(t){const e=u((i=(t,e,i,s)=>{if(!H)return;(s+=.005)>1&&(s-=1),t=((t,e=0)=>new o(t.x,t.y+e,t.z))(i.getPointAt(s));let n=s+.001;n>1&&(n-=1),e=i.getPointAt(n),H.position.set(t.x,ct,t.z);const r=Math.atan2(-e.z+t.z,e.x-t.x);H.rotation.z=.5*Math.PI+r},{devEnv:!0,baseUrl:"",bgColor:"",skyCode:"221",env:"/oss/textures/hdr/3.hdr",config:{},dotKey:"DOT",dotShowStrict:!1,anchorType:[X,tt,st,nt,at],animationModelType:[et],models:[{key:et,name:"场景",size:3.1,url:"/电梯.glb"},{key:rt,name:"闸机",size:.3,url:"/闸机.glb"},{key:X,name:"定位",type:"sprite",range:{x:4,y:4},mapUrl:"/pos.png"},{key:tt,name:"锚点",type:"sprite",range:{x:4,y:4},mapUrl:"/dw.png"},{key:st,name:"电梯门",type:"sprite",range:{x:1,y:1},mapUrl:"/lift.png"},{key:at,name:"闸机",type:"sprite",range:{x:1,y:1},mapUrl:"/gate.png"},{key:it,name:"机器人",size:.3,url:"/oss/model/park/机器人.glb"},{key:ot,name:"人物",size:2.2,url:"/oss/model/park/RobotExpressive.glb"},{key:"spot_light_floor_2",type:"spotlight",name:"聚光灯",intensity:8,color:57599,distance:8},{key:nt,name:"开关灯",type:"sprite",range:{x:1.2,y:1.2},mapUrl:"/light.png"}].map((t=>(t.url&&t.url.indexOf("oss")<0&&(t.url="/oss/model/office"+t.url),t.mapUrl&&(t.mapUrl="/oss/textures/office"+t.mapUrl),t))),cruise:{visible:!0,auto:!0,mapUrl:"/oss/textures/cruise/line18.png",repeat:[1,1],width:2,segment:30,tension:.01,speed:1,mapSpeed:.01,points:dt,close:!1,offset:5.2,animateBack:i}}));var i;const s=u({active:1,show:!1,list:[{name:"一楼",key:1,y:.2},{name:"二楼",key:2,y:13.8},{name:"三楼",key:3,y:19.83},{name:"五楼",key:5,y:31.76}]}),n=u({show:!1,style:{left:0,top:0},msg:""}),{changeBackground:r,backgroundLoad:a}=Z(),{progress:c,loadModels:l,getModel:h}=Q({baseUrl:e.baseUrl,indexDB:{cache:!0,dbName:"THREE__OFFICE__DB",tbName:"TB",version:15}}),d=p(),L={env:e.env,cruise:e.cruise,controls:{visible:!0,enableDamping:!0,dampingFactor:.48,maxPolarAngle:.48*Math.PI,screenSpacePanning:!1,maxDistance:800},camera:{},directionalLight:{},axes:{visible:!0}};let E;const $=t=>{var i;const o=t.data;{const t=Tt(o,E.buildingGroup);"object"==typeof t&&Object.keys(t).forEach((e=>{o[e]=t[e]}))}t.visible=o.show||!e.dotShowStrict;const s=null==(i=t.element)?void 0:i.getElementsByClassName("inner")[0];if(s){const{size:t,color:e}=o.font||{};null!=t&&(s.style.fontSize="string"==typeof t?t:t+"px"),null!=e&&(s.style.color=e),s.textContent=`${o.value||0}${o.unit}`}},N=async t=>{if(!t)return;const{type:i}=t,o=h(i);if(!o)return void(i===e.dotKey&&(t=>{$(E.addDot(t,(e=>{E.cameraLookatMoveTo(t.position)})))})(t));const{anchorType:s=[],animationModelType:n=[]}=e;let r=K(o);const{position:a,scale:c,rotation:l}=J(r,t),[d,u,p]=a;return r.scale.set(...c),r.position.set(d,u,p),r.rotation.set(...l),r._isBuilding_=!0,r.data=t,n.includes(i)&&E.addModelAnimate(r,o.animations,!0,1),i===rt&&(r.name=t.name),s.includes(i)?(r._isAnchor_=!0,E.addAnchor(r)):r.isSpotLight?E.addLight(t,r,!0):E.addBuilding(r),Promise.resolve()},I=async()=>{c.percentage=100,c.show=!1,E.clearBuilding(),await M(),await(()=>{let t=0,e=F.value.length;return new Promise((i=>{if(0==e)return i(null);const o=async()=>{const s=F.value[t];await N(s),t++,t<e?o():i(t)};o()}))})(),E.setCruisePoint(e.cruise.points);const t=E.getValidTargetPosition(e.config||{});W(E.camera,t,E.controls.target).then((()=>{E.controlSave()}))},F=p([]),R=m((()=>F.value.filter((t=>t.type===X)))),U=()=>{l(e.models,(()=>{V.get(q.d3.office).then((async t=>{let i={};if(t.ConfigJson instanceof Object)i=t.ConfigJson;else if("string"==typeof t.ConfigJson)try{i=JSON.parse(t.ConfigJson)}catch(o){}F.value=t.JsonList,Object.keys(i).forEach((t=>{e.config&&(e.config[t]=i[t])})),await I(),Y(),lt()}))}))};let H;const Y=()=>{H=h(it),H.position.z=ct,H.rotation.z=.5*Math.PI,E.addObject(H)},lt=()=>{const t=h(ot);t.traverse((t=>{t.isMesh&&(t.castShadow=!0)}));t.scale.setScalar(.5),E.addCharacter(t,{x:0,y:0,z:0})};return _((()=>{L.container=d.value;const t="轿厢-ground";E=new Pt(L,{groundMeshName:["ground",t],onClickLeft:(t,e)=>{if(t&&t.data){const e=t.data;switch(null==e?void 0:e.type){case X:E.cameraTransition(t);break;case st:E.waitLift(t,Et);break;case nt:E.lightSwitch(t);break;case at:E.openGate(t)}}},onClickGround:(e,i)=>{E.mouseClickGround(i,t).then((e=>{s.show=i.object.name===t})).catch((()=>{}))},onHoverAnchor:(t,e)=>{const i=!!t&&t.object._isAnchor_;if(n.show=i,i){n.style.top=e.top,n.style.left=e.left;const i=t.object.data;n.msg=`\n          <p>${i.name}</p>\n          <p>类型：${i.type}</p>\n          <p>绑定：${i.bind||"无"}</p>\n        `}}}),E.run(),B(E).resize(),U(),a(E,e.skyCode)})),(t,i)=>{const o=T;return g(),f("div",{class:v(t.$style.page)},[y("div",Mt,[y("div",{class:"btn",onClick:i[0]||(i[0]=()=>{E.getAll().forEach(((t,i)=>{t.data&&(t.data.type!==e.dotKey||$(t))}))})},"随机更新"),y("div",{class:"btn",onClick:i[1]||(i[1]=()=>{var t;return null==(t=b(E))?void 0:t.getPosition()})},"场景坐标"),y("div",{class:"btn",onClick:i[2]||(i[2]=()=>b(r)(b(E)))},"切换背景")]),y("div",{class:v(t.$style.container),ref_key:"containerRef",ref:d},null,2),k(z,{modelValue:b(c).show,"onUpdate:modelValue":i[3]||(i[3]=t=>b(c).show=t),progress:b(c).percentage},null,8,["modelValue","progress"]),y("div",{class:v(t.$style.camera)},[(g(!0),f(C,null,x(b(R),(e=>(g(),f("div",{class:v(t.$style.item),onClick:t=>(t=>{E.cameraTransition({position:t.position,data:t})})(e)},w(e.name),11,Lt)))),256)),y("div",{class:v(t.$style.item),onClick:i[4]||(i[4]=()=>{var t;return null==(t=b(E))?void 0:t.toggleCruise()})},"定点巡航",2),y("div",{class:v(t.$style.item),onClick:i[5]||(i[5]=()=>{var t;return null==(t=b(E))?void 0:t.controlReset()})},"视角重置",2),y("div",{class:v(t.$style.item),onClick:i[6]||(i[6]=()=>b(E).toggleSight())},"人物视角",2),y("div",{class:v(t.$style.item),onClick:i[7]||(i[7]=()=>b(E).characterAccelerate())},"人物加速",2),y("div",{class:v(t.$style.item),onClick:i[8]||(i[8]=()=>b(E).characterAccelerate(-1))},"人物减速",2)],2),G(y("div",{class:v(t.$style["floor-select"])},[(g(!0),f(C,null,x(b(s).list,(t=>(g(),A(o,{type:"primary",disabled:b(s).active===t.key,onClick:e=>(t=>{s.active=t.key;const e="电梯门"+t.key;E.waitLift({data:{bind:e,to:{y:t.y}}},Et,!0)})(t)},{default:D((()=>[O(w(t.name),1)])),_:2},1032,["disabled","onClick"])))),256))],2),[[j,b(s).show]]),b(n).show?(g(),f("div",{key:0,class:v(t.$style.tip),style:S({left:b(n).style.left+"px",top:b(n).style.top+"px"})},[y("div",{class:v(t.$style.msg),innerHTML:b(n).msg},null,10,zt)],6)):P("",!0)],2)}}}),[["__cssModules",{$style:{page:"_page_1sasb_2",container:"_container_1sasb_10","floor-select":"_floor-select_1sasb_14",tip:"_tip_1sasb_20",msg:"_msg_1sasb_30",camera:"_camera_1sasb_38",item:"_item_1sasb_45"}}]]);export{Bt as default};
