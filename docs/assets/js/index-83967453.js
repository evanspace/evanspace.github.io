var e=Object.defineProperty,s=(s,t,a)=>(((s,t,a)=>{t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a})(s,"symbol"!=typeof t?t+"":t,a),a);import{bX as t,bb as a,bp as r,bY as o,bz as n,bk as i,bZ as h,bc as l,b8 as u,b_ as d,b$ as b,bA as c,bh as p,be as m,c0 as w,ba as y,c1 as M,e as f,i as g,l as R,o as v,g as x,h as _,n as O}from"./vendor-e7f34225.js";import{T as A,u as j}from"./scene-resize-d28e167b.js";import{_ as z}from"./index-002d2389.js";let I=new t;I.attributes=["position","normal","color"],I.useGroups=!1;const W={displayBrush:!0,operation:d};class B extends A{constructor(e){super(e),s(this,"brush1"),s(this,"brush2"),s(this,"brushResult"),this.addModel()}addModel(){let e=(()=>{let e=new c;const s=new Float32Array(45e3),t=new Float32Array(45e3),a=new Float32Array(45e3),r=new p,o=500,n=250,i=new m,h=new m,l=new m,u=new m,d=new m;for(let c=0;c<s.length;c+=9){const e=Math.random()*o-n,b=Math.random()*o-n,p=Math.random()*o-n,m=e+80*Math.random()-40,w=b+80*Math.random()-40,y=p+80*Math.random()-40,M=e+Math.random()*o-n,f=b+Math.random()*o-n,g=p+Math.random()*o-n,R=e+Math.random()*o-n,v=b+Math.random()*o-n,x=p+Math.random()*o-n;s[c]=m,s[c+1]=w,s[c+2]=y,s[c+3]=M,s[c+4]=f,s[c+5]=g,s[c+6]=R,s[c+7]=v,s[c+8]=x,i.set(m,w,y),h.set(M,f,g),l.set(R,v,x),u.subVectors(l,h),d.subVectors(i,h),u.cross(d),u.normalize();const _=u.x,O=u.y,A=u.z;t[c]=_,t[c+1]=O,t[c+2]=A,t[c+3]=_,t[c+4]=O,t[c+5]=A,t[c+6]=_,t[c+6]=O,t[c+7]=A;const j=e/o+.5,z=b/o+.5,I=p/o+.5;r.setRGB(j,z,I),a[c]=r.r,a[c+1]=r.g,a[c+2]=r.b,a[c+3]=r.r,a[c+4]=r.g,a[c+5]=r.b,a[c+6]=r.r,a[c+7]=r.g,a[c+8]=r.b}e.setAttribute("position",new w(s,3)),e.setAttribute("normal",new w(t,3)),e.setAttribute("color",new w(a,3));const b=.002;return e.scale(b,b,b),e})(),s=new a({vertexColors:!0,side:r,roughness:.2});this.brush1=new o(e,s),this.brush1.position.y=1,this.brush1.updateMatrixWorld(!0),e=new n,s=new i({color:16777215,transparent:!0,depthWrite:!1,opacity:.1,side:h}),this.brush2=new o(e,s),this.addObject(this.brush2),this.brushResult=new l,this.addObject(this.brushResult);const t=(()=>{const e=new l(new y(5),new M({color:14743546,opacity:.05,depthWrite:!1,transparent:!0}));return e.scale.setScalar(10),e.rotation.x=-Math.PI/2,e.receiveShadow=!0,e})();this.addObject(t),this.createGUI()}createGUI(){var e;const s=new u;s.add(W,"operation",{NONE:-1,HOLLOW_INTERSECTION:d,HOLLOW_SUBTRACTION:b}).name("布尔类型"),s.add(W,"displayBrush").name("计算元素"),s.domElement.style="position: absolute; top: 10px; right: 10px",null==(e=this.container)||e.appendChild(s.domElement)}modelAnimate(){const{brush1:e,brush2:s,brushResult:t}=this;s&&(s.position.y=1*Math.sin(.0025*window.performance.now()*.5)+1,s.position.x=1*Math.sin(.0035*window.performance.now()*.5),s.position.z=1*Math.sin(.002*window.performance.now()*.5),s.visible=W.displayBrush,s.updateMatrixWorld(!0)),-1===W.operation?(this.brushResult.geometry.dispose(),this.brushResult.geometry.copy(this.brush1.geometry),this.brushResult.position.y=1):(this.brushResult=I.evaluate(e,s,W.operation,t),this.brushResult.position.y=0,this.brushResult.castShadow=!0)}}const E=z(f({__name:"index",setup(e){const s=g(),t={camera:{position:[0,3,5]},render:{alpha:!0},grid:{visible:!0},axes:{visible:!0}};let a;return R((()=>{t.container=s.value,a=new B(t),a.run(),j(a).resize()})),(e,t)=>(v(),x("div",{class:O([e.$style.page,"h-100 o-h"])},[_("div",{class:"h-100",ref_key:"containerRef",ref:s},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_12f6y_2"}}]]);export{E as default};
