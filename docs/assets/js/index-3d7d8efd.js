var e=Object.defineProperty,a=(a,s,t)=>(((a,s,t)=>{s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t})(a,"symbol"!=typeof s?s+"":s,t),t);import{b6 as s,en as t,eo as n,dx as o,bi as i,dE as r,ep as d,bg as c,bs as l,b7 as m,eq as u,e as h,i as p,l as x,o as f,g as b,h as g}from"./vendor-4c59ff80.js";import{m as w,u as v}from"./scene-resize-e14e822b.js";import"./index-7cc312c2.js";const{color:M,positionView:y,float:j,positionWorld:N,uniform:z,triNoise3D:D,fog:P,normalWorld:k}=u,A=z(40);class E extends w{constructor(e){super(e),a(this,"gui");const d=M(15791605),c=M(14607334),l=y.z.negate().smoothstep(0,this.camera.far),m=l.mul(20).max(A),u=j(m).sub(N.y).div(m).pow(3).saturate().mul(.98),h=z(0).onFrameUpdate((e=>e.time)),p=D(N.mul(5e-4),1,h),x=D(N.mul(.001),1,h.mul(.5)),f=p.add(x).mul(c);this.scene.fogNode=P(l.oneMinus().mix(c,f),u),this.scene.backgroundNode=k.y.max(0).mix(c,d);const b=N.y.mul(5).floor().mod(50).sign().mix(M(102).add(l),M(16777215)),g=new s(1,1,1),w=new t({colorNode:b}),v=new n(g,w,1e3);this.addObject(v);const E=new o,O=new i;for(let a=0;a<v.count;a++){const e=7*Math.random()+5;E.position.x=2e3*Math.random()-1e3,E.position.z=2e3*Math.random()-1e3;const s=Math.max(.012*E.position.distanceTo(O),5);E.position.y=.5*e*s,E.scale.x=E.scale.z=30*Math.random()+10,E.scale.y=e*s,E.updateMatrix(),v.setMatrixAt(a,E.matrix)}this.gui=new r,this.addGui()}render(){this.renderer.renderAsync(this.scene,this.camera)}createRender(){return new d(this.options.render)}initModel(){const e=new c(200,200),a=new l({color:10066329}),s=new m(e,a);s.rotation.x=-Math.PI/2,s.scale.setScalar(20),s.castShadow=!0,s.receiveShadow=!0,this.addObject(s)}addGui(){var e;const a=this.gui;a.add(A,"value",20,300).name("雾化高度"),a.domElement.className+=" gui-wrap",null==(e=this.container.parentNode)||e.appendChild(a.domElement)}}const O={class:"three-page"},S=h({__name:"index",setup(e){const a=p(),s={axes:{visible:!0},camera:{far:2e3},directionalLight:{visible:!1},render:{logarithmicDepthBuffer:!1},ambientLight:{},controls:{maxPolarAngle:.48*Math.PI,minDistance:7,maxDistance:1e3}};let t;return x((()=>{s.container=a.value,t=new E(s).run(),v(t).resize()})),(e,s)=>(f(),b("div",O,[g("div",{class:"h-100",ref_key:"containerRef",ref:a},null,512)]))}});export{S as default};
