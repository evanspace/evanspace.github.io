var e=Object.defineProperty,t=(t,s,n)=>(((t,s,n)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n})(t,"symbol"!=typeof s?s+"":s,n),n);import{E as s,u as n}from"./scene-resize-b06d5078.js";import{dl as i,bF as a,dD as o,dn as r,bE as h,dE as l,du as c,bB as m,bx as d,eg as p,eh as b,e as u,i as y,l as w,o as g,g as M,h as v,n as f}from"./vendor-d7bf715b.js";import{_ as x}from"./index-09682213.js";class A extends s{constructor(e){super(e),t(this,"mesh"),t(this,"raycaster"),t(this,"position"),t(this,"line"),this.mesh=(()=>{let e=new o;const t=new Float32Array(45e3),s=new Float32Array(45e3),n=new Float32Array(45e3),i=new r,a=500,p=250,b=new h,u=new h,y=new h,w=new h,g=new h;for(let o=0;o<t.length;o+=9){const e=Math.random()*a-p,r=Math.random()*a-p,h=Math.random()*a-p,l=e+80*Math.random()-40,c=r+80*Math.random()-40,m=h+80*Math.random()-40,d=e+Math.random()*a-p,M=r+Math.random()*a-p,v=h+Math.random()*a-p,f=e+Math.random()*a-p,x=r+Math.random()*a-p,A=h+Math.random()*a-p;t[o]=l,t[o+1]=c,t[o+2]=m,t[o+3]=d,t[o+4]=M,t[o+5]=v,t[o+6]=f,t[o+7]=x,t[o+8]=A,b.set(l,c,m),u.set(d,M,v),y.set(f,x,A),w.subVectors(y,u),g.subVectors(b,u),w.cross(g),w.normalize();const _=w.x,j=w.y,E=w.z;s[o]=_,s[o+1]=j,s[o+2]=E,s[o+3]=_,s[o+4]=j,s[o+5]=E,s[o+6]=_,s[o+6]=j,s[o+7]=E;const F=e/a+.5,z=r/a+.5,O=h/a+.5;i.setRGB(F,z,O),n[o]=i.r,n[o+1]=i.g,n[o+2]=i.b,n[o+3]=i.r,n[o+4]=i.g,n[o+5]=i.b,n[o+6]=i.r,n[o+7]=i.g,n[o+8]=i.b}e.setAttribute("position",new l(t,3)),e.setAttribute("normal",new l(s,3)),e.setAttribute("color",new l(n,3));const M=new c({color:11184810,specular:16777215,shininess:250,side:m,vertexColors:!0}),v=new d(e,M);return v.name="缓冲几何图形",v})(),this.raycaster=new i,this.position=new a,this.line=(()=>{const e=new o;e.setAttribute("position",new l(new Float32Array(12),3));const t=new p({color:16777215,transparent:!0});return new b(e,t)})(),this.bindEvent()}bindEvent(){this.addObject(this.mesh),this.addObject(this.line),this.renderer.domElement.addEventListener("positionmove",this.onPointerMove.bind(this))}onPointerMove(e){const t=this.container,s=t.getBoundingClientRect()||{left:0,top:0},n=this.options.scale;this.position.x=(e.clientX-s.left)/(t.clientWidth*n)*2-1,this.position.y=-(e.clientY-s.top)/(t.clientHeight*n)*2+1}modelAnimate(){const e=.001*Date.now();this.mesh.rotation.x=.15*e,this.mesh.rotation.y=.25*e,this.raycaster.setFromCamera(this.position,this.camera);const t=this.raycaster.intersectObject(this.mesh);if(t.length>0){const e=t[0].face,s=this.line.geometry.attributes.position,n=this.mesh.geometry.attributes.position;s.copyAt(0,n,e.a),s.copyAt(1,n,e.b),s.copyAt(2,n,e.c),s.copyAt(3,n,e.a),this.mesh.updateMatrix(),this.line.geometry.applyMatrix4(this.mesh.matrix),this.line.visible=!0}else this.line.visible=!1}}const _=x(u({__name:"index",setup(e){const t=y(),s={camera:{position:[0,1e3,2e3]},render:{alpha:!0},grid:{visible:!0},axes:{visible:!0}};let i;return w((()=>{s.container=t.value,i=new A(s),i.run(),n(i).resize()})),(e,s)=>(g(),M("div",{class:f([e.$style.page,"h-100 o-h"])},[v("div",{class:"h-100",ref_key:"containerRef",ref:t},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_12f6y_2"}}]]);export{_ as default};
