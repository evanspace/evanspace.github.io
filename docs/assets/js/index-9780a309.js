import{d as s,r,g as o,c as e,M as a,k as t,J as i,c8 as p,a as l,b as m,u as d,i as n,D as u,at as c,aS as j,ak as w,aQ as f,p as g,f as v}from"./vendor-59c65e9f.js";import{j as b,k as h}from"./common-24a0b7a6.js";import{_}from"./api-4fe51afc.js";import"./hash-0ad4cab1.js";import"./linear-border-02036c22.js";import"./loading-08e1cc15.js";import"./animation-44c6d291.js";import"./path-9d1a3677.js";import"./stroke-de8cc189.js";import"./character-rain-587040ec.js";import"./fireworks-ffeb797d.js";import"./canvas-40a658f7.js";import"./entry-direction-e2773158.js";import"./carousel-55796b62.js";import"./attribute-932e31c4.js";import"./border-4b6288a8.js";import"./clip-dc0cdeb2.js";import"./coffee-cup-a8f45a43.js";import"./multiple-paths-457b76f8.js";import"./polygon-f9ed855e.js";import"./corrugation-19503851.js";import"./flex-cb6ba34a.js";import"./grid-60c54772.js";import"./houdini-9a366c4d.js";import"./css-c8db7731.js";import"./preserve-3d-00f243bc.js";import"./pseudo-df2d2a7e.js";import"./text-56b93129.js";import"./olympic-rings-62b5e08e.js";import"./transform-3dd559a1.js";import"./cssd2-8d8e037d.js";import"./cssd3-ecc8ba41.js";import"./device-5ba8f176.js";import"./data-07702360.js";import"./G1-ea28b39c.js";import"./5-3-5-5-51f32552.js";import"./d3-c3505a59.js";import"./water-263c837a.js";import"./drag-6d215279.js";import"./editor-4b111c1b.js";import"./pipe-74ca3955.js";import"./mouse-pointing-93b1e9a6.js";import"./event-33a46c7d.js";import"./img-89093cea.js";import"./map-097da9c0.js";import"./music-player-a629e226.js";import"./media-f8a32dde.js";import"./video-auto-play-01492a57.js";import"./ele-intersection-6b62f4d5.js";import"./monitor-a0073a56.js";import"./button-69593bda.js";import"./card-9c24f33a.js";import"./cursor-follow-ea771ec5.js";import"./debounce-0dcdc29e.js";import"./excess-8a5e53db.js";import"./skill-c6f37e4e.js";import"./svg-d565e4c5.js";import"./texture-167bd3c6.js";import"./directives-1cbe6763.js";import"./vue-91546867.js";const y={class:"content"},P=(s=>(g("data-v-27ad2f5b"),s=s(),v(),s))((()=>m("div",{class:"clearfix"},[m("span",null,"修改密码")],-1))),$={class:"change-pwd"},k=_(s({__name:"index",setup(s){const g=r(null),v=o({password:"",newPassword:"",confirmNewPassword:""}),_=r(!1),k={password:[{required:!0,trigger:"blur",message:"请输入旧密码。"}],newPassword:[{trigger:"blur",required:!0,validator:(s,r,o)=>{if(""===r)o(new Error("请输入密码"));else{const s=g.value;""!==v.confirmNewPassword&&s.validateField("confirmNewPassword"),(r.length<6||r.length>24)&&o(new Error("确保至少包含6个或最多24个字符"));/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\W_!@#$%^&*`~()-+=]+$)(?![a-z0-9]+$)(?![a-z\W_!@#$%^&*`~()-+=]+$)(?![0-9\W_!@#$%^&*`~()-+=]+$)[a-zA-Z0-9\W_!@#$%^&*`~()-+=]/.test(r)||o(new Error("密码必须包含数字，特殊字符，小写字母，大写字母其中三项")),r===v.password&&o(new Error("新密码不能与旧密码相同")),o()}}}],confirmNewPassword:[{trigger:"blur",required:!0,validator:(s,r,o)=>{""===r?o(new Error("请再次输入密码")):r!==v.newPassword?o(new Error("两个输入不匹配！")):o()}}]},V=b(),x=i(),E=()=>{g.value.validate((s=>{if(!s)return!1;_.value=!0;const r={...v};V.changePwd(r).then((async()=>{u({type:"success",title:"提示",message:"密码修改成功！"}),await V.logout(),x.push(`${h}/login`)}))}))},N=()=>{g.value.resetFields()};return(s,r)=>{const o=c,i=j,u=w,b=f,h=p;return l(),e("div",y,[a(h,{class:"box-card"},{header:t((()=>[P])),default:t((()=>[m("div",$,[a(b,{ref_key:"formRef",ref:g,model:d(v),rules:k,"status-icon":"","label-position":"top"},{default:t((()=>[a(i,{label:"旧密码",prop:"password"},{default:t((()=>[a(o,{modelValue:d(v).password,"onUpdate:modelValue":r[0]||(r[0]=s=>d(v).password=s),type:"password",placeholder:"旧密码",clearable:"","show-password":"",autocomplete:"off"},null,8,["modelValue"])])),_:1}),a(i,{label:"新密码",prop:"newPassword"},{default:t((()=>[a(o,{modelValue:d(v).newPassword,"onUpdate:modelValue":r[1]||(r[1]=s=>d(v).newPassword=s),type:"password",placeholder:"新密码",clearable:"","show-password":"",autocomplete:"off"},null,8,["modelValue"])])),_:1}),a(i,{label:"确认新密码",prop:"confirmNewPassword"},{default:t((()=>[a(o,{modelValue:d(v).confirmNewPassword,"onUpdate:modelValue":r[2]||(r[2]=s=>d(v).confirmNewPassword=s),type:"password",placeholder:"确认密码",clearable:"","show-password":"",autocomplete:"off"},null,8,["modelValue"])])),_:1}),a(i,null,{default:t((()=>[a(u,{type:"primary",loading:d(_),onClick:E},{default:t((()=>[n("提交")])),_:1},8,["loading"]),a(u,{onClick:N},{default:t((()=>[n("重置")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})])}}}),[["__scopeId","data-v-27ad2f5b"]]);export{k as default};
