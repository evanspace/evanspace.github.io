var e=Object.defineProperty,t=(t,s,a)=>(((t,s,a)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a})(t,"symbol"!=typeof s?s+"":s,a),a);import{f9 as s,bi as a,d2 as i,eD as o,dq as n,bg as r,c_ as d,dc as c,fa as h,er as l,e as p,i as u,l as g,o as m,g as b,h as w}from"./vendor-317257ae.js";import{E as f,u as S}from"./scene-resize-5cdbd2b0.js";import"./index-88d3e5b6.js";const v=(new s).setPath("");class y extends f{constructor(e){super(e),t(this,"lightGroup",new a),t(this,"gui",new i),this.addLight(),console.log(this)}createRender(){return new o(this.options.render)}render(){this.renderer.renderAsync(this.scene,this.camera)}modelAnimate(){const e=Date.now()/1e3;this.lightGroup.children.forEach(((t,s)=>{const a=(Math.sin((e+s)*(Math.PI/2))+1)/2,i=t.position,o=n.lerp(i.x,0,a),r=n.lerp(i.z,0,a);t.target.position.x=o,t.target.position.z=r,t.userData.helper.update()}))}initModel(){const e=this.createGround(500,500,8421504);this.addObject(e);const t=new r(new d(30,30,30),new c({color:10066329}));t.position.y=15,t.castShadow=!0,this.addObject(t)}async addLight(){const e=this.lightGroup,[t,s,a,i]=await Promise.all([v.loadAsync("/oss/ies/101.ies"),v.loadAsync("/oss/ies/102.ies"),v.loadAsync("/oss/ies/103.ies"),v.loadAsync("/oss/ies/104.ies")]);console.log(t,s,a,i),this.addObject(e);const o=this.createIESSpotLight([65,30,65],16711680,t);e.add(o);const n=this.createIESSpotLight([-65,30,65],65280,s);e.add(n);const r=this.createIESSpotLight([-65,30,-65],255,a);e.add(r);const d=this.createIESSpotLight([65,30,-65],16777215,i);e.add(d),this.addGui()}createIESSpotLight(e,t,s){const a=new h(t,30,200,Math.PI/8,.7,0);a.iesMap=s,a.castShadow=!0;const[i,o,n]=e;a.position.set(i,o,n);const r=new l(a);return this.addObject(a.target,r),a.userData.helper=r,a}addGui(){var e;const t=this.gui,s=this.lightGroup.children;t.add({helper:!0},"helper").onChange((e=>{s.forEach((t=>{t.userData.helper.visible=e}))})),s.forEach(((e,s)=>{t.addColor(e,"color").name("灯光"+(s+1)).onChange((()=>{e.userData.helper.update()}))})),t.domElement.className+=" gui-wrap",null==(e=this.container.parentNode)||e.appendChild(t.domElement)}}const E={class:"three-page"},L=p({__name:"index",setup(e){const t=u(),s={grid:{visible:!0},ambientLight:{visible:!1},directionalLight:{visible:!1}};let a;return g((()=>{s.container=t.value,a=new y(s).run(),S(a).resize()})),(e,s)=>(m(),b("div",E,[w("div",{class:"h-100",ref_key:"containerRef",ref:t},null,512)]))}});export{L as default};
