import{aT as e,aU as a,aV as t,aW as s,aX as n,aY as o,d as i,L as l,r as d,aZ as r,a_ as c,a$ as p,o as m,z as u,a as h,c as w,b as g,h as b,b0 as v,b1 as E,b2 as _,b3 as f,b4 as x,b5 as y,b6 as j,b7 as $,b8 as M,b9 as k,H as S,ba as z,bb as L}from"./vendor-59c65e9f.js";import{u as P,a as C}from"./common-24a0b7a6.js";import{_ as T}from"./api-4fe51afc.js";const H={title:"cssd2",order:20},W=a=>{const t=a.clientWidth,s=a.clientHeight,n=new e({antialias:!0});return n.setSize(t,s),n.setPixelRatio(window.devicePixelRatio),a.appendChild(n.domElement),n},A=(e,t=.1,s=1e4)=>{const n=e.clientWidth,o=e.clientHeight,i=new a(36,n/o,t,s);return i.position.set(-350,510,700),i},O=(e=16777215,a=1,t=800,s=2048,o=1,i=2e3)=>{const l=new n(e,a);return l.position.set(500,800,500),l.castShadow=!0,l.shadow.camera.near=o,l.shadow.camera.far=i,l.shadow.camera.right=t,l.shadow.camera.left=-t,l.shadow.camera.top=t,l.shadow.camera.bottom=-t,l.shadow.mapSize.set(s,s),l},R=(e,a)=>{const s=new t(e,a.domElement);return s.minDistance=.1,s.maxPolarAngle=.495*Math.PI*1.1,s.target.set(0,20,0),s},X=()=>{let e=new s(800,80,10592673,10592673);return e.material.opacity=.3,e.material.transparent=!0,e},Y=(e,a)=>{let t=(new o).load([`${a}/posX.jpeg`,`${a}/negX.jpeg`,`${a}/posY.jpeg`,`${a}/negY.jpeg`,`${a}/posZ.jpeg`,`${a}/negZ.jpeg`]);e.background=t},Z={class:"page h-100"},D=T(i({__name:"index",setup(e){const a=P(),t=C();let s;l((()=>a.sidebar.opened),(()=>{clearTimeout(s),s=setTimeout(B,300)}));const o=d(),i=new r;let T,H,D,F,I,N,q;i.background=new c("#fff");const B=()=>{const e=o.value;if(!T)return;const a=(null==e?void 0:e.clientWidth)??0,t=(null==e?void 0:e.clientHeight)??0,s=a/t;T.aspect=s,T.updateProjectionMatrix(),H.setSize(a,t),ee&&ee.setSize(a,t)};let G;const U=()=>{G=requestAnimationFrame(U),K(),H.render(i,T)},V=new f;let J;const K=()=>{v(),ee.render(i,T);const e=V.getElapsedTime();J&&J.position.set(200*Math.sin(e),0,200*Math.cos(e))},Q=d("217");let ee;const ae=new p,te=()=>{const e=new j(50,160,160),a=new $({specular:3355443,shininess:5,map:ae.load(`${t.oss}/textures/planets/earth_atmos_2048.jpg`),specularMap:ae.load(`${t.oss}/textures/planets/earth_specular_2048.jpg`),normalMap:ae.load(`${t.oss}/textures/planets/earth_normal_2048.jpg`),normalScale:new M(.85,.85)}),s=new k(e,a);s.name="earth",i.add(s);const n=document.createElement("div");n.className="dot",n.innerHTML='\n    <div class="bg"></div>\n    <span class="inner">Earth</span>\n  ',n.style.pointerEvents="auto",n.addEventListener("click",(e=>{S.success("click Earth ！")}));const o=new z(n);o.position.set(0,50,0),s.add(o)},se=()=>{const e=new j(40,160,160),a=new $({shininess:5,map:ae.load(`${t.oss}/textures/planets/moon_1024.jpg`)});J=new k(e,a),J.position.set(0,100,0),i.add(J);const s=document.createElement("div");s.className="dot",s.innerHTML='\n    <div class="bg"></div>\n    <span class="inner">Moon</span>\n  ',s.style.pointerEvents="auto",s.addEventListener("click",(e=>{S.success("click Moon ！")}));const n=new z(s);n.position.set(0,40,0),J.add(n)},ne=()=>{const e=o.value;H=W(e),T=A(e,1,1e6),I=new _(16777215,1.5),i.add(I),N=O(16777215,1.5),i.add(N),q=new n(16777215,1.5),q.position.set(-500,800,-500),i.add(q),D=R(T,H),D.maxPolarAngle=.45*Math.PI,D.screenSpacePanning=!1,F=X(),i.add(F);let a=new E(50);i.add(a),(()=>{Y(i,`${t.oss}/img/sky/${Q.value}`),H.shadowMap.enabled=!0,H.shadowMap.type=x;const e=o.value;ee=new y,ee.domElement.style.pointerEvents="none";const a=(null==e?void 0:e.clientWidth)??0,s=(null==e?void 0:e.clientHeight)??0;ee.setSize(a,s),ee.domElement.style.position="absolute",ee.domElement.style.top="0px";const n=o.value;null==n||n.appendChild(ee.domElement),te(),se()})(),(e=>{const a=new L,s={background:"217",display:()=>{i.children.forEach((e=>{if(e.isMesh){const a=e.children.find((e=>e.isCSS2DObject));a.visible=!a.visible}}))},earth:()=>{const e=i.children.find((e=>"earth"==e.name));e?(e.clear(),i.remove(e)):te()}};a.add(s,"background").options(["216","217","218","219","220","221","222","223","224","225"]).name("切换背景").onChange((e=>{Q.value=e,Y(i,`${t.oss}/img/sky/${Q.value}`)})),a.add(s,"display").name("隐藏/展示"),a.add(s,"earth").name("删除/添加地球"),a.domElement.style="position: absolute; top: 10px; right: 10px",e.appendChild(a.domElement)})(e)};return m((()=>{ne(),U(),window.addEventListener("resize",B,!1)})),u((()=>{clearTimeout(s),window.addEventListener("resize",B,!1),cancelAnimationFrame(G);try{i.clear(),H.dispose(),H.forceContextLoss(),H.content=null;let e=H.domElement.getContext("webgl");e&&e.getExtension("WEBGL_lose_context").loseContext()}catch(e){}})),(e,a)=>(h(),w("div",Z,[g("div",{ref_key:"containerRef",ref:o,class:b(e.$style.container)},null,2)]))}}),[["__cssModules",{$style:{container:"_container_1kxrr_2"}}]]),F=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));export{H as _,A as a,R as b,W as c,X as d,O as e,F as i,Y as l};
