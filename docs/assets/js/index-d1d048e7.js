var e=Object.defineProperty,s=(s,a,t)=>(((s,a,t)=>{a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t})(s,"symbol"!=typeof a?a+"":a,t),t);import{E as a,w as t,u as o}from"./scene-resize-9435930a.js";import{dM as i,dN as r,bo as n,dO as d,bb as l,dP as h,dQ as m,bj as c,d2 as p,e as b,i as u,l as g,o as x,g as P,h as f,n as w}from"./vendor-01fc5bd0.js";import{_}from"./index-8ac7069f.js";const v=t,{loadModel:y}=v.useModelLoader({baseUrl:"",indexDB:{cache:!1,dbName:"THREE__BLOOM__DB",tbName:"TB",version:1}}),M={glb:"/oss/model/gltf/PrimaryIonDrive.glb",threshold:0,strength:1,radius:0,exposure:1};class j extends a{constructor(e){super(e),s(this,"bloomPass"),s(this,"composer"),s(this,"mixer"),s(this,"clock");const a=new i(this.scene,this.camera),{width:t,height:o}=this.options,c=new r(new n(t,o),1.5,.4,.85);c.threshold=M.threshold,c.strength=M.strength,c.radius=M.radius,this.bloomPass=c;const p=new d;this.clock=new l;const b=new h(this.renderer);b.addPass(a),b.addPass(c),b.addPass(p),this.composer=b,this.renderer.toneMapping=m,this.createGUI()}initModel(){y({url:M.glb,key:"",name:""}).then((e=>{e.scale.setScalar(50),this.addObject(e);const s=new c(e),a=e.animations[0];s.clipAction(a.optimize()).play(),this.mixer=s}))}createGUI(){var e;const s=new p,a=s.addFolder("泛光");a.add(M,"threshold",0,1).name("限制发光值").onChange((e=>{this.bloomPass&&(this.bloomPass.threshold=Number(e))})),a.add(M,"strength",0,3).name("强度").onChange((e=>{this.bloomPass&&(this.bloomPass.strength=Number(e))})),a.add(M,"radius",0,1).step(.01).name("半径").onChange((e=>{this.bloomPass&&(this.bloomPass.radius=Number(e))}));s.addFolder("渲染器").add(M,"exposure",.1,2).name("亮度").onChange((e=>{this.renderer.toneMappingExposure=Math.pow(e,4)})),s.domElement.style="position: absolute; top: 10px; right: 10px",null==(e=this.container)||e.appendChild(s.domElement)}animate(){if(this.composer&&this.composer.render(),this.mixer){const e=this.clock.getDelta();this.mixer.update(e)}}}const E=_(b({__name:"index",setup(e){const s=u(),a={camera:{position:[0,80,300]},grid:{visible:!1},axes:{visible:!1}};let t;return g((()=>{a.container=s.value,t=new j(a),t.run(),o(t).resize()})),(e,a)=>(x(),P("div",{class:w([e.$style.page,"h-100 o-h"])},[f("div",{ref_key:"containerRef",ref:s,class:"h-100"},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_12f6y_2"}}]]);export{E as default};
