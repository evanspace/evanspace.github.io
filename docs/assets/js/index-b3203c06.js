var s=Object.defineProperty,e=(e,t,a)=>(((e,t,a)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);import{b5 as t,b6 as a,b7 as r,b8 as o,b9 as n,ba as i,bb as h,bc as l,bd as u,be as b,bf as d,bg as c,bh as p,bi as m,bj as w,bk as y,bl as M,bm as f,e as g,i as R,l as v,o as x,g as O,h as _,n as j}from"./vendor-fdf0d3de.js";import{u as A}from"./scene-resize-c9309c3a.js";import{_ as I}from"./common-9bcd4cdd.js";let W=new t;W.attributes=["position","normal","color"],W.useGroups=!1;const z={displayBrush:!0,operation:d};class B extends a{constructor(s){super(s),e(this,"brush1"),e(this,"brush2"),e(this,"brushResult"),this.addModel()}addModel(){let s=(()=>{let s=new p;const e=new Float32Array(45e3),t=new Float32Array(45e3),a=new Float32Array(45e3),r=new m,o=500,n=250,i=new w,h=new w,l=new w,u=new w,b=new w;for(let c=0;c<e.length;c+=9){const s=Math.random()*o-n,d=Math.random()*o-n,p=Math.random()*o-n,m=s+80*Math.random()-40,w=d+80*Math.random()-40,y=p+80*Math.random()-40,M=s+Math.random()*o-n,f=d+Math.random()*o-n,g=p+Math.random()*o-n,R=s+Math.random()*o-n,v=d+Math.random()*o-n,x=p+Math.random()*o-n;e[c]=m,e[c+1]=w,e[c+2]=y,e[c+3]=M,e[c+4]=f,e[c+5]=g,e[c+6]=R,e[c+7]=v,e[c+8]=x,i.set(m,w,y),h.set(M,f,g),l.set(R,v,x),u.subVectors(l,h),b.subVectors(i,h),u.cross(b),u.normalize();const O=u.x,_=u.y,j=u.z;t[c]=O,t[c+1]=_,t[c+2]=j,t[c+3]=O,t[c+4]=_,t[c+5]=j,t[c+6]=O,t[c+6]=_,t[c+7]=j;const A=s/o+.5,I=d/o+.5,W=p/o+.5;r.setRGB(A,I,W),a[c]=r.r,a[c+1]=r.g,a[c+2]=r.b,a[c+3]=r.r,a[c+4]=r.g,a[c+5]=r.b,a[c+6]=r.r,a[c+7]=r.g,a[c+8]=r.b}s.setAttribute("position",new y(e,3)),s.setAttribute("normal",new y(t,3)),s.setAttribute("color",new y(a,3));const d=.002;return s.scale(d,d,d),s})(),e=new r({vertexColors:!0,side:o,roughness:.2});this.brush1=new n(s,e),this.brush1.position.y=1,this.brush1.updateMatrixWorld(!0),s=new i,e=new h({color:16777215,transparent:!0,depthWrite:!1,opacity:.1,side:l}),this.brush2=new n(s,e),this.addObject(this.brush2),this.brushResult=new u,this.addObject(this.brushResult);const t=(()=>{const s=new u(new M(5),new f({color:14743546,opacity:.05,depthWrite:!1,transparent:!0}));return s.scale.setScalar(10),s.rotation.x=-Math.PI/2,s.receiveShadow=!0,s})();this.addObject(t),this.createGUI()}createGUI(){var s;const e=new b;e.add(z,"operation",{NONE:-1,HOLLOW_INTERSECTION:d,HOLLOW_SUBTRACTION:c}).name("布尔类型"),e.add(z,"displayBrush").name("计算元素"),e.domElement.style="position: absolute; top: 10px; right: 10px",null==(s=this.container)||s.appendChild(e.domElement)}modelAnimate(){const{brush1:s,brush2:e,brushResult:t}=this;e&&(e.position.y=1*Math.sin(.0025*window.performance.now()*.5)+1,e.position.x=1*Math.sin(.0035*window.performance.now()*.5),e.position.z=1*Math.sin(.002*window.performance.now()*.5),e.visible=z.displayBrush,e.updateMatrixWorld(!0)),-1===z.operation?(this.brushResult.geometry.dispose(),this.brushResult.geometry.copy(this.brush1.geometry),this.brushResult.position.y=1):(this.brushResult=W.evaluate(s,e,z.operation,t),this.brushResult.position.y=0,this.brushResult.castShadow=!0)}}const E=I(g({__name:"index",setup(s){const e=R(),t={camera:{position:[0,3,5]},grid:{visible:!0},axes:{visible:!0}};let a;return v((()=>{t.container=e.value,a=new B(t),a.run(),A(a).resize()})),(s,t)=>(x(),O("div",{class:j([s.$style.page,"h-100 o-h"])},[_("div",{class:"h-100",ref_key:"containerRef",ref:e},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_12f6y_2"}}]]);export{E as default};
