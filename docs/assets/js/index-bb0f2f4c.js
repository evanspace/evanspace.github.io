import{e,Y as a,o as s,g as l,q as t,p as n,I as o,h as r,u as c,B as i,F as m,r as p,m as u,n as d,aI as g,aE as f,P as v,Q as x,ak as h,b2 as j,c as w}from"./vendor-b9b94b6b.js";import{_}from"./index-8d9d4caa.js";const b={class:"flex flex-ac"},y={class:"f-x pl-sm"},V={key:0,class:"mt-sm"},k={class:"flex flex-ac"},I={class:"f-x pl-sm"},U={class:"flex flex-ac"},C={class:"f-x pl-sm"},E=_(e({__name:"index",setup(e){const _=a({compress:1,name:"",url:"",types:["png","jpeg","jpg"],format:"image/jpg",options:[{label:"png",value:"image/png"},{label:"jpg",value:"image/jpg"},{label:"jpeg",value:"image/jpeg"},{label:"webp",value:"image/webp"}]}),E=()=>{const e=_.name.split(".").pop()||"";return!!_.types.includes(e)||(w.error("图片格式错误，支持"+_.types.join("、")+" 格式"),!1)},R=e=>{const a=e.target.files[0];if(console.log(a),_.name=a.name,!E())return;const s=new FileReader;s.onload=e=>{const a=e.target.result;_.url=a},s.readAsDataURL(a)},D=()=>{if(!E())return;const e=new Image;e.onload=function(){const a=document.createElement("canvas");a.width=e.width,a.height=e.height;const s=a.getContext("2d");if(!s)return;s.drawImage(e,0,0);const l=a.toDataURL(_.format,_.compress),t=document.createElement("a");t.href=l,t.download=_.name+"."+_.format.split("/")[1],t.click()},e.src=_.url};return(e,a)=>{const w=g,E=f,F=v,L=x,$=h,q=j;return s(),l("div",{class:d(e.$style.page)},[t(q,null,{header:n((()=>a[2]||(a[2]=[o("图片转换")]))),default:n((()=>[r("div",b,[a[3]||(a[3]=r("div",{class:"name"},"上传文件",-1)),r("div",y,[r("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:R},null,32)])]),c(_).url?(s(),l("div",V,[t(w,{src:c(_).url,style:{width:"120px"},"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[c(_).url],"show-progress":"","initial-index":4,fit:"cover"},null,8,["src","preview-src-list"])])):i("",!0),r("div",k,[a[4]||(a[4]=r("div",{class:"name"},"压缩等级",-1)),r("div",I,[t(E,{modelValue:c(_).compress,"onUpdate:modelValue":a[0]||(a[0]=e=>c(_).compress=e),max:1,step:.01},null,8,["modelValue"])])]),r("div",U,[a[5]||(a[5]=r("div",{class:"name"},"导出格式",-1)),r("div",C,[t(L,{modelValue:c(_).format,"onUpdate:modelValue":a[1]||(a[1]=e=>c(_).format=e)},{default:n((()=>[(s(!0),l(m,null,p(c(_).options,(e=>(s(),u(F,{label:e.label,value:e.value},null,8,["label","value"])))),256))])),_:1},8,["modelValue"])])]),t($,{type:"success",onClick:D},{default:n((()=>a[6]||(a[6]=[o("导出")]))),_:1})])),_:1})],2)}}}),[["__cssModules",{$style:{page:"_page_r82yl_2"}}]]);export{E as default};
