var e=Object.defineProperty,s=(s,a,t)=>(((s,a,t)=>{a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t})(s,"symbol"!=typeof a?a+"":a,t),t);import{bH as a,bt as t,dp as n,fn as o,bI as r,fs as c,df as i,bx as l,eb as d,e9 as u,eY as p,eZ as m,e as h,i as g,l as w,o as b,g as y,h as f}from"./vendor-d7bf715b.js";import{p as _,E as v,u as j}from"./scene-resize-b06d5078.js";import{u as x}from"./sky-949952e2.js";import"./index-09682213.js";const{uniform:P,texture:G,parallaxUV:k,uv:A,blendOverlay:I}=m,{skys:S}=x(),N=(new a).setPath("/oss/textures/gpu/"),J=P(.3),{backgroundLoad:K}=_.useBackground("/oss/sky/",S);class R extends v{constructor(e){super(e),s(this,"gui"),K(this.scene,"501");const a=this.convertPmremTexture(this.scene.background);this.scene.environment=a,this.gui=new t,this.addGui()}async initModel(){const e=await N.loadAsync("Ice002_1K-JPG_Color.jpg");e.colorSpace=n;const s=await N.loadAsync("Ice002_1K-JPG_Roughness.jpg");s.colorSpace=o;const a=await N.loadAsync("Ice002_1K-JPG_NormalGL.jpg");a.colorSpace=o;const t=await N.loadAsync("Ice002_1K-JPG_Displacement.jpg");t.colorSpace=o;const d=await N.loadAsync("Ice003_1K-JPG_Color.jpg");d.colorSpace=n,d.wrapS=r,d.wrapT=r;const u=G(t).mul(J),p=k(A(),u),m=G(d,p),h=I(G(e),m),g=new c({colorNode:h.mul(5),normalMap:a,metalness:0});g.roughnessNode=G(s);const w=new i(10,10,10),b=new l(w,g);b.rotateX(-Math.PI/2),b.scale.setScalar(40),this.addObject(b)}render(){this.renderer.renderAsync(this.scene,this.camera)}createAmbientLight(e,s){return new d(e,s)}createDirectionalLight(e,s){return new u(e,s)}createRender(){return new p(this.options.render)}addGui(){var e;const s=this.gui;s.add(this.controls,"autoRotate").name("自动旋转"),s.add(J,"value",0,1).name("视差大小"),s.domElement.className+=" gui-wrap",null==(e=this.container.parentNode)||e.appendChild(s.domElement)}}const L={class:"three-page"},M=h({__name:"index",setup(e){const s=g(),a={grid:{},controls:{autoRotate:!0}};let t;return w((()=>{a.container=s.value,t=new R(a).run(),j(t).resize()})),(e,a)=>(b(),y("div",L,[f("div",{class:"h-100",ref_key:"containerRef",ref:s},null,512)]))}});export{M as default};
