var e=Object.defineProperty,s=(s,t,a)=>(((s,t,a)=>{t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a})(s,"symbol"!=typeof t?t+"":t,a),a);import{ck as t,cl as a,bl as o,cm as n,bk as r,cn as i,co as d,bF as h,b7 as l,bW as c,e as m,j as p,m as u,o as b,g,h as f,n as w}from"./vendor-3d3976e5.js";import{T as x,u as v}from"./resize-c7c84d0c.js";import{_ as y}from"./common-e18260a2.js";const P={glb:"/oss/model/gltf/PrimaryIonDrive.glb",threshold:0,strength:1,radius:0,exposure:1};class _ extends x{constructor(e){super(e),s(this,"bloomPass"),s(this,"composer"),s(this,"mixer"),s(this,"clock");const h=new t(this.scene,this.camera),{width:l,height:c}=this.options,m=new a(new o(l,c),1.5,.4,.85);m.threshold=P.threshold,m.strength=P.strength,m.radius=P.radius,this.bloomPass=m;const p=new n;this.clock=new r;const u=new i(this.renderer);u.addPass(h),u.addPass(m),u.addPass(p),this.composer=u,this.renderer.toneMapping=d,this.createGUI()}initModel(){(new h).load(P.glb,(e=>{const s=e.scene;s.scale.setScalar(50),this.addObject(s);const t=new l(s),a=e.animations[0];t.clipAction(a.optimize()).play(),this.mixer=t}))}createGUI(){var e;const s=new c,t=s.addFolder("泛光");t.add(P,"threshold",0,1).name("限制发光值").onChange((e=>{this.bloomPass.threshold=Number(e)})),t.add(P,"strength",0,3).name("强度").onChange((e=>{this.bloomPass.strength=Number(e)})),t.add(P,"radius",0,1).step(.01).name("半径").onChange((e=>{this.bloomPass.radius=Number(e)}));s.addFolder("渲染器").add(P,"exposure",.1,2).name("亮度").onChange((e=>{this.renderer.toneMappingExposure=Math.pow(e,4)})),s.domElement.style="position: absolute; top: 10px; right: 10px",null==(e=this.container)||e.appendChild(s.domElement)}animate(){if(this.composer&&this.composer.render(),this.mixer){const e=this.clock.getDelta();this.mixer.update(e)}}}const j=y(m({__name:"index",setup(e){const s=p(),t={camera:{position:[0,80,300]},grid:{visible:!1},axes:{visible:!1}};let a;return u((()=>{t.container=s.value,a=new _(t),a.run(),v(a).resize()})),(e,t)=>(b(),g("div",{class:w([e.$style.page,"h-100 o-h"])},[f("div",{ref_key:"containerRef",ref:s,class:"h-100"},null,512)],2))}}),[["__cssModules",{$style:{page:"_page_12f6y_2"}}]]);export{j as default};
