
`Vue2` 与 `Vue3` 差异
=
1. 性能 `Vue3` 比 `Vue2` 快
  - diff 方法优化
    - `Vue2` 中的虚拟 `dom` 都是全量的对比（每个借点不论写死还是动态的都回比较）
    - `Vue3` 中新增了静态标记（`patchflag`）与上次虚拟节点对比时，只对带有 `patchflag` 标记的节点（动态数据所在节点），可通过 `flag` 信息得知当前节点要对比的具体内容
  - 静态提升
    - `Vue2` 中无论元素是否参与更新，每次都会重新创建
    - `Vue3` 中对于不参与更新的元素，会做静态提升，只会被创建一次，在渲染时直接复用即可
  - 事件监听缓存
    - `Vue2` 中通过 `$on` 绑定的事件处理函数并未被缓存
    - `Vue3` 中通过 `$on` 绑定的事件处理函数会被缓存
  - 模板编译的优化
    - `Vue2` 中模板中用到的数据，都需要在 `render` 函数中通过 `with` 才能访问到
    - `Vue3` 中模板中用到的数据，直接在模板中访问即可
2. 按需编译，`Vue3` 体积更小
3. 组合 API （类似于 react hooks）
4. 更好的 Ts 支持
5. 暴露自定义的渲染 API
6. 支持碎片（`Fragment`）(模板中可以有多个根节点)
7. 支持 `Teleport` （传送门）
8. 支持 `<script setup>`
9. 全局 API 改动